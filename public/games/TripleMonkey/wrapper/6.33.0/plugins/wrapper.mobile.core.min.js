(window.webpackJsonp1584113172316=window.webpackJsonp1584113172316||[]).push([[9],{100:function(e,t,i){},102:function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));const s=(e,t)=>{e.textContent!==t&&(e.textContent=t)}},117:function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var s=i(3),n=i(0),a=i(8);const o=(e,t)=>Object.assign(Object.assign({},t),e);let r=class{constructor(){this.dispatcher=Object(n.d)(a.a),this.data={},this.subscriptions={}}isEnabledFor(e){return!!this.subscriptions[e]}enableFor(e,t=o){if(this.isEnabledFor(e))return;const i=i=>{this.data[e]=t(i,this.data[e])};this.dispatcher.on(e,i),this.subscriptions[e]=()=>this.dispatcher.off(e,i)}disableFor(e){this.isEnabledFor(e)&&(this.subscriptions[e](),this.subscriptions[e]=null)}getData(e){return this.data[e]}pull(e){const t=this.getData(e);return this.data[e]=null,this.disableFor(e),t}};r=Object(s.a)([n.a],r)},148:function(e,t,i){},149:function(e,t,i){"use strict";i.r(t);var s=i(4),n=i(1);const a={asia:"UA-118256484-3",defaultDev:"UA-118256484-1",defaultProd:"UA-118256484-2"},o=a[Object(n.c)("ga")]||a.defaultProd;Object(s.e)(`https://www.googletagmanager.com/gtag/js?id=${o}`),window.dataLayer=window.dataLayer||[],window.gtag=function(){window.dataLayer.push(arguments)},window.gtag("js",new Date),window.gtag("config",o)},154:function(e,t,i){},155:function(e,t){e.exports=function(e){var t="<div ";return e.cssClass&&(t+='class="'+e.cssClass+'"'),t+="></div>"}},156:function(e,t,i){},157:function(e,t,i){},158:function(e,t){e.exports=function(e){return'<div class="nav-btn nav-btn-menu hidden"></div>'}},159:function(e,t){e.exports=function(e){return'<div class="wrapper-menu sidebar-menu hidden"> <div class="menu-overlay hidden"></div> <div class="menu-holder hidden"> <div class="menu-list-container touch-disabled"> '+e.sidebar+" </div> </div></div>"}},160:function(e,t){e.exports=function(e){var t="";function i(e){return'<span class="menu-label'+(e.indexOf("<br>")>-1?" two-lines":"")+'">'+e+"</span>"}t+='<ul class="menu-list">';var s=e;if(s)for(var n,a=-1,o=s.length-1;a<o;)if(t+=" ","link"==(n=s[a+=1]).type)t+=' <li class="menu-list-item menu-list-item-'+n.id+'"> <a href="'+(n.href||"#")+'" ',n.newTab&&(t+='target="_blank" '),t+=' class="menu-list-link menu-'+n.id+" ",n.href||(t+="disabled"),t+='" data-id="'+n.id+'">  ',n.iconTemplate?t+=" "+n.iconTemplate()+" ":t+=' <span class="menu-icon"></span> ',t+=' <span class="menu-label">'+n.label+"</span> </a></li> ";else if("switch"==n.type){t+=" ";var r=n.disabled?"disabled":n.checked?"checked":"";t+='<li class="menu-list-item"> <label class="menu-list-link menu-'+n.id+" menu-switch "+r+'"> <input class="menu-switch-input" type="checkbox" data-id="'+n.id+'" '+r+">  ",n.iconTemplate?t+=" "+n.iconTemplate()+" ":t+=' <span class="menu-icon"></span> ',t+=" "+i(n.label)+' <div class="menu-switch-fake '+r+'"> <div class="menu-switch-pin"></div> </div> </label></li> '}else"button"==n.type?(t+=' <li class="menu-list-item '+(n.hidden?"hidden":"")+'"> <div class="menu-list-link menu-'+n.id+'" data-id="'+n.id+'">  ',n.iconTemplate?t+=" "+n.iconTemplate()+" ":t+=' <span class="menu-icon"></span> ',t+=" "+i(n.label)+" </div></li> "):"history"==n.type&&(t+=' <li class="menu-list-item '+(n.hidden?"hidden":"")+'"> <a href="'+(n.href||"#")+'" rel="noreferrer" target="_blank" class="menu-list-link menu-'+n.id+" "+(n.disabled?"disabled":"")+'" data-id="'+n.id+'">  ',n.iconTemplate?t+=" "+n.iconTemplate()+" ":t+=' <span class="menu-icon"></span> ',t+=' <span class="menu-label">'+n.label+"</span> </a></li> ");return t+="</ul>"}},161:function(e,t,i){},162:function(e,t){e.exports=function(e){return'<div class="swipe-overlay"> <div class="swipe-content"> <div class="swipe-text">'+e.t(e.text)+'</div> <div class="swipe-hand"></div> </div></div>'}},163:function(e,t,i){"use strict";i.r(t),i.d(t,"NativeFullScreen",(function(){return o}));var s=i(99),n=i(8);const a=i(50);class o{enter(){return this.mobileRequest()}async mobileRequest(){n.a.emit("LOCK_SWIPE",!0);const{up:e}=s.f,t=()=>a.request().then(()=>{removeEventListener(e,t),n.a.emit("LOCK_SWIPE",!1)},e=>{});addEventListener(e,t,{passive:!1})}exit(){return a.exit()}get isFullscreen(){return a.isFullscreen}onChange(e){return a.onchange(e)}}},164:function(e,t,i){},165:function(e,t){e.exports=function(e){var t='<div class="lock-screen '+e.orientation+' lock-screen_hidden"> ';return e.message&&(t+=' <div class="lock-screen__message">'+e.message+"</div> "),t+="</div>"}},166:function(e,t){},226:function(e,t,i){"use strict";i.r(t);var s=i(0),n=i(16),a=i(3),o=i(97),r=i(80),h=i(89),c=(i(154),i(6)),d=i(9),l=i(14),u=i(1),p=i(8);let m=class extends d.EventEmitter{constructor(){super(),this.dispatcher=Object(s.d)(p.a),this.isSidebar=Object(s.d)(r.a).isSidebar,this.isEnabled=!1,this.isMenuVisible=!1,this.options={visible:this.isEnabled},this.addListeners(),this.startClock()}startClock(){const e=new Date,t=e.getHours(),i=e.getMinutes(),s=60-e.getSeconds();this.time=Object(c.c)(t,i),this.emit("Clock.UPDATE_TIME",this.time),setTimeout(this.startClock,1e3*s+500)}addListeners(){this.isEnabled||this.dispatcher.once("SET_CLOCK_VISIBILITY",this.onSetVisible,this),this.isSidebar&&this.dispatcher.once("MENU_WAS_DISPLAYED",this.onMenuDisplayed,this).on("MENU_SET_OPTIONS",this.onSetMenuOptions,this).on("UPDATE_UI_ELEMENT_CLOCK",this.onClockUpdate,this)}onSetVisible(e){this.isEnabled=this.options.visible=e,this.update()}onSetMenuOptions({clockOptions:e}){if(e&&Object.keys(e).length){const{clockBounds:t,style:i,disabled:s,show:n}=e,{options:a}=this;void 0!==n&&(a.visible=n),void 0!==s&&(a.visible=!s),i&&(a.style=i),t&&(a.bounds=t),this.update()}}onMenuDisplayed(){this.isMenuVisible=!0,this.update()}onClockUpdate(e){this.options=Object.assign(Object.assign({},this.options),e),this.update()}update(){this.emit("Clock.OPTIONS",Object.assign(Object.assign({},this.options),{visible:this.isVisible}))}get isVisible(){return!!this.isMenuVisible&&(this.isEnabled&&this.options.visible)}};Object(a.a)([l.a],m.prototype,"startClock",null),m=Object(a.a)([s.a],m);var b=i(88),g=i(102);class O extends b.a{constructor(){super(...arguments),this.model=Object(s.d)(m)}addListeners(){super.addListeners(),this.model.on("Clock.UPDATE_TIME",this.updateValue),this.options.configurable&&this.model.on("Clock.OPTIONS",this.updateOptions)}removeListeners(){super.removeListeners(),this.model.off("Clock.UPDATE_TIME",this.updateValue),this.options.configurable&&this.model.on("Clock.OPTIONS",this.updateOptions)}render(){return super.render(),this.updateValue(this.model.time),this.options.configurable&&(this.visible=this.model.isVisible),this.el}updateValue(e){Object(g.a)(this.el,e)}getTemplate(){return i(155)}}Object(a.a)([l.a],O.prototype,"updateValue",null);i(156);class v extends b.a{getTemplate(){return()=>'<div class="extra-elements-container"></div>'}addListeners(){super.addListeners(),this.dispatcher.on("RESIZE",this.onResize,this)}removeListeners(){super.removeListeners(),this.dispatcher.off("RESIZE",this.onResize)}onResize({marginSettings:e,dynamicOffsets:t}){this.el.style.top=`${e.top+t.top}px`}}let E=class{constructor(){this.dispatcher=Object(s.d)(p.a),this.widgetManager=Object(s.d)(h.a),this.isSidebar=Object(s.d)(r.a).isSidebar,this.initialize()}initialize(){this.initMenu(),this.initExtraElements(),this.initClock(),this.initGameName()}initMenu(){i(228),Object(s.d)(o.a)}initExtraElements(){this.extraElements=new v,this.widgetManager.addWidget({root:document.body,widget:this.extraElements})}initClock(){this.widgetManager.addWidget({root:this.extraElements.element,widget:new O({cssClass:"clock",configurable:!0})})}async initFSButton(){0}initGameName(){}};E=Object(a.a)([s.a],E);var S=i(5),M=i(4);const f=[["HELP","MENU_HELP"],["FB_START","FREEBETS_START"],["MENU_BUTTON_UPDATE","MENU_BUTTON_UPDATE"],["MENU_VISIBILITY","MENU_STATE_UPDATE"],["POPUP_STATE_UPDATE","UPDATE_POPUP_STATE"],["FULLSCREEN_CHANGE","FULLSCREEN_CHANGE"],["BC_UPDATE_TIMER","BC_UPDATE_TIMER"],["BC_CREATE_SIDEBAR_BUTTON","BC_CREATE_SIDEBAR_BUTTON"],["BC_CREATE_SIDEBAR_BUTTON","BC_CREATE_BUTTON_BNS_MOBILE"],["BC_CREATE_BALANCE_PANEL","BC_CREATE_BALANCE_PANEL"],["BC_CREATE_BALANCE_PANEL","BC_CREATE_PANEL_BNS_MOBILE"],["BC_READY_TO_REDEEM","BC_READY_TO_REDEEM"],["BC_HIDE_CUSTOM_REAL_BUTTON","BC_HIDE_CUSTOM_REAL_BUTTON"],["ERROR_POPUP_BUTTON_PRESSED","ERROR_POPUP_BUTTON_PRESSED"],["JP_TICKERS_UPDATED","JP_TICKERS_UPDATED"],["DOCUMENT_VISIBILITY_CHANGE","DOCUMENT_VISIBILITY_CHANGE"],["MENU_ITEM_CLICK","MENU_ITEM_CLICK"]];var w=i(81),y=i(83),T=i(99),_=i(17),C=i(85),j=i(12),I=i(96),P=i(112),L=i(84),A=i(117),k=i(120),B=i(87),N=i(18),R=i(11),U=i(94);let D=class{constructor(){this.wrapperModel=Object(s.d)(j.a),this.gameDetector=Object(s.d)(U.a),this.isIFrameMode=Object(c.b)();const{features:{live:e},isSlot:t}=this.gameDetector;this.isLive=e,this.isSlot=t,this.isAllowExternalGameModules=this.gameDetector.isAllowExternalGameModules(),this.BNSCanBeLoaded=!1!==Object(u.d)("bns")&&!e,this.isBNSMode=this.wrapperModel.isBNSMode,this.hasPokerStars=this.isIFrameMode&&Object(u.j)("pokerstars"),this.isFunMode=this.wrapperModel.funMode}};D=Object(a.a)([s.a],D);const F=e=>{const t=Object(s.d)(D),i=R.b[e].reduce((e,i)=>((({predicateFn:e,iFramePlugin:t,name:i})=>e||(t?({isIFrameMode:e})=>e&&Object(u.j)(i):()=>Object(u.j)(i)))(i)(t)&&e.push(Object(N.a)(i.name)),e),[]);return Promise.all(i)},G=(e,t)=>{const i=R.a[e];if(!i)return Promise.reject(`Can not find plugin "${e}" !`);const{predicateFn:n}=i;return n&&!n(Object(s.d)(D))?Promise.reject():Object(N.a)(i.name,t)};var x=i(86);const H=["jackpot","live_adapter"];let V=class{constructor(){this.server=Object(s.d)(w.a),this.wrapperModel=Object(s.d)(j.a),this.dispatcher=Object(s.d)(p.a);const e=Object(s.d)(D),{BNSCanBeLoaded:t,isBNSMode:i,isSlot:n}=e;!i&&n&&this.addFreeBetsMiddleware(),i||(()=>{const e=Object(u.c)("promo_id"),t=Object(s.d)(B.a).gamePlayerStorage.getItem("bns_redeem");if(!e||!t)return!1;const{id:i,result:n}=JSON.parse(t);return n&&i===e})()?G("bns"):t&&this.addBNSMiddleware(),(()=>{let e;const t=Object(s.d)(B.a).playerStorage.getItem("abTesting");try{e=t&&JSON.parse(t)}catch(e){}e&&G("ab_testing",{abDataFromStorage:e})})(),this.addListeners()}addBNSMiddleware(){const e=this.server.responseMiddleware.add(async t=>{var i;return(null===(i=t.balance)||void 0===i?void 0:i.bonusCoins)&&(e(),await G("bns")),t})}addFreeBetsMiddleware(){const e=this.server.responseMiddleware.add(async t=>{var i,s;return(null===(s=null===(i=t.balance)||void 0===i?void 0:i.freeBets)||void 0===s?void 0:s.amount)&&(e(),await G("free_bets")),t})}async addListeners(){this.dispatcher.once("INIT_RESPONSE_RECEIVED",this.onInitResponse,this);const[e]=await this.dispatcher.awaitAllOnce("INIT_RESPONSE_RECEIVED",x.a.GAME_API_INITIALIZED);(({jrsdSettings:e={},brandSettings:t={},gameSettings:i={}})=>{i.turbo&&!1!==e.turbo&&!1!==t.turbo&&G("default_turbo")})(e)}onInitResponse(e){const{abTesting:t,extraData:i={}}=e,{POPItalyInsight:s,POPSpainRegulation:n}=i;(s||!1)&&(G("popitaly"),this.wrapperModel.fsButtonVisible=!1),(n||!1)&&G("popspain");const a=t||!1;a&&G("ab_testing",{abDataFromServer:a})}async install(){this.wrapperModel.liveGame||await i.e(36).then(i.bind(null,233));const e=[F("main")];await Promise.all(e)}loadPlugin(e){return H.includes(e)?G(e):Promise.reject(`There is no public plugin with name: ${e}`)}beforeGameLoad(){return F("beforeGameLoad")}};V=Object(a.a)([s.a],V);let z=class{constructor(){this.dispatcher=Object(s.d)(p.a);const e={hidden:"visibilitychange",webkitHidden:"webkitvisibilitychange",mozHidden:"mozvisibilitychange",msHidden:"msvisibilitychange"};let t;for(const i in e)if(i in document){this.hiddenPropertyName=i,t=e[i];break}document.addEventListener(t,()=>{this.dispatcher.emit("DOCUMENT_VISIBILITY_CHANGE",this.visible)})}get visible(){return!document[this.hiddenPropertyName]}};z=Object(a.a)([s.a],z);var Y=i(101),W=i(95);let $=class{constructor(){this.splash=Object(s.d)(n.a),this.device=Object(s.d)(L.a),this.dispatcher=Object(s.d)(p.a),this.isIOS=this.device.deviceOS===T.b.IOS,this.enterFullScreen=()=>{},this.exitFullscreen=()=>{}}initialize(){this.device.isAllowFullScreen()&&(this.force=this.getForceType(),this.strategy=((e,t)=>{if(e){const{FullScreenSwiper:e}=i(227);return new e(t)}const{NativeFullScreen:s}=i(163);return new s})(this.isIOS,this.force),this.enterFullScreen=()=>{this.strategy.enter()},this.exitFullscreen=()=>{this.strategy.exit()},this.addListeners())}getForceType(){{const{fullscreen:e={}}=Object(s.d)(S.a).game,{force:t={}}=e,i=t[this.device.deviceOS];return void 0!==i?i:this.isIOS?"once":"always"}}addListeners(){this.dispatcher.on("FULLSCREEN_EXIT",this.exitFullscreen,this),this.performAfterSplash(this.emitFullScreenData),this.strategy.onChange(()=>this.emitFullScreenData()),this.force&&this.performAfterSplash(this.enterFullScreen),"always"===this.force&&this.strategy.onChange(()=>{this.isFullscreen||this.enterFullScreen()})}async performAfterSplash(e){this.splash.isComplete||await this.dispatcher.promisifiedOnce("SPLASH_COMPLETE"),e.call(this)}get isFullscreen(){var e;return null===(e=this.strategy)||void 0===e?void 0:e.isFullscreen}emitFullScreenData(){this.dispatcher.emit("FULLSCREEN_CHANGE",this.isFullscreen)}};$=Object(a.a)([s.a],$);i(92);var K=i(104),q=i(103);class J extends d.EventEmitter{constructor(){super(),this.device=Object(s.d)(L.a),this.document=Object(s.d)(z),this.isCheatsSet=!1,this.balanceModel=Object(s.d)(I.a),this.deviceConfig=Object(s.d)(P.a),this.dispatcher=Object(s.d)(p.a),this.errorPopupMapping=Object(s.d)(Y.a),this.fullScreenManager=Object(s.d)($),this.gameDetector=Object(s.d)(U.a),this.history=Object(s.d)(W.a),this.locale=Object(s.d)(y.a),this.menu=Object(s.d)(o.a),this.menuModel=Object(s.d)(r.a),this.popupManager=Object(s.d)(C.a),this.server=Object(s.d)(w.a),this.splash=Object(s.d)(n.a),this.toasterManager=Object(s.d)(k.ToasterManager),this.wrapperModel=Object(s.d)(j.a),this.initialize()}initialize(){Object(s.d)(A.a).enableFor("BC_UI_UPDATE"),this.addListeners();{const{ScreenLock:e}=i(229);this.screenLock=new e}}addListeners(){this.dispatcher.on("RELOAD",this.onReload,this).on("SHOW_GAME_MENUBUTTON",this.showGameMenuButton,this),f.push(["SCREEN_LOCK","SCREEN_LOCK"]);for(const[e,t]of f)this.dispatcher.on(e,e=>this.emit(t,e))}showPopup(e,t){return"number"==typeof e?this.popupManager.showById(e,t):(e.params=t,this.popupManager.show(0,e))}showLoadErrorPopup(){return this.dispatcher.emit("FAILED_LOAD_RESOURCES"),""}showLoadingPopup(){return this.popupManager.showLoading()}hidePopup(e){this.popupManager.hide(e)}showToaster(e){return this.toasterManager.show(e)}onPopupsStateUpdated(e){this.on("UPDATE_POPUP_STATE",e)}isPopupOpened(){return this.popupManager.isPopupOpened}showLimitPopup(e){return this.popupManager.show(2,e)}showLimitInfoPopup(e){return this.popupManager.show(3,e)}showHelp(e){return this.popupManager.show(6,{params:e})}showContentWindow(e,t,i){var s;return(null===(s=t)||void 0===s?void 0:s.buildNumber)?this.popupManager.show(6,{params:Object(q.b)(t),content:e}):this.popupManager.show(4,{content:e,params:t,className:i,buttons:[]})}showFreeBetsPopup(e){return this.freeBets.showPopup(e)}updateFreeBetsButton(e={}){return this.freeBets.updateButtonState(e)}updateMobileClock(e){this.setMenuOptions({clockOptions:e})}setAdditionalServerParams(e){this.server.setAdditionalParams(e)}onResize(e){this.dispatcher.on("RESIZE",e)}onFullScreen(e){this.device.isAllowFullScreen()&&this.device.deviceOS===T.b.IOS&&this.dispatcher.on("FULLSCREEN_CHANGE",e)}showSplash(){return this.splash.show(),Promise.resolve()}removeSplash(){this.splash.destroy()}enterFullScreen(){0}exitFullScreen(){this.fullScreenManager.exitFullscreen()}isFullScreen(){return!!this.device.isAllowFullScreen()&&this.fullScreenManager.isFullscreen}onSplashRemoved(e){this.dispatcher.once("SPLASH_COMPLETE",e)}isSplashActive(){return this.splash.isActive}getVolume(){return this.menuModel.getVolume()}setVolume(e){this.menu.setVolume(e)}muteSound(e){this.dispatcher.emit("MUTE_SOUND",e)}onChangeSoundsVolume(e){this.dispatcher.on("SOUND",e),this.menu.initSound()}onPayTableButtonClicked(e){this.menuModel.isSidebar&&this.dispatcher.on("ONPAYTABLE",e)}setButtonClickedSoundCallBack(e){this.dispatcher.off("BUTTON_CLICK").on("BUTTON_CLICK",e)}setupServerEmulator(e){}serverRequest(e,t){return this.server.genericRequestSafe(e,t)}spin(e,t,i,s){return this.server.spinRequest({lines:e,bet:t,coin:i},s)}bonusSelection(e){return this.server.bonusSelectionRequest(e)}getJackpotTicker(){return this.server.jackpotTickerRequest()}startJackpotMiniGame(){return this.server.jackpotStartMiniGameRequest()}playJackpotMiniGame(e){return this.server.jackpotPlayMiniGameRequest(e)}initServer(e={},t={}){return this.setServerOptions(e),this.server.initServer(t)}setupGameParameters(e,t){var i;if(this.dispatcher.emit("SETUP_GAME_PARAMS",e),!1===Object(u.d)("script"))return;const{scripts:n=[]}=(null===(i=e)||void 0===i?void 0:i.server)||Object(s.d)(S.a).server;Object(M.f)(n)}showMenu(){this.updateMenuState({visible:!0})}hideMenu(){this.updateMenuState({visible:!1})}disableMenu(){this.updateMenuState({enabled:!1})}enableMenu(){this.updateMenuState({enabled:!0})}openMenu(){this.updateMenuState({open:!0})}closeMenu(){this.updateMenuState({open:!1})}getBalance(){return this.balanceModel.getBalance()}addBalanceUpdateCallback(e,t=!0){this.dispatcher.on("balanceUpdate",e),t&&this.balanceModel.getLastBalanceData()&&e(this.balanceModel.getLastBalanceData())}removeBalanceUpdateCallback(e){this.dispatcher.off("balanceUpdate",e)}updateViewBalance(e,t){this.balanceModel.updateViewBalance(e)}getViewBalance(){return this.balanceModel.viewBalance}initCheats(e){}addViewBalanceUpdateCallback(e){this.dispatcher.on("viewBalanceUpdate",e)}removeViewBalanceUpdateCallback(e){this.dispatcher.off("viewBalanceUpdate",e)}getLocale(){return this.locale.code}activateHistory(){this.history.activate()}setHistoryParams(e){this.history.setParams(e)}openHistory(){this.history.open({source:2})}getHistoryURL(){return this.history.URL}getMenuConfiguration(){return this.menu.getMenuConfiguration()}setMenuConfiguration(e){this.menu.setMenuConfiguration(e)}setMenuOptions(e){this.dispatcher.emit("MENU_SET_OPTIONS",e)}setMenuItemState(e,t){this.menu.setMenuItemState(e,t)}getBottomMargin(){return 0}activateReelsConfigPanel(e){0}onError(e){this.dispatcher.on("SERVER_ERROR",e)}pageReload(){this.dispatcher.emit("RELOAD")}addToAnalyticsLog(e){this.dispatcher.emit("ADD_TO_ANALYTICS",e)}sendToAnalytics(e){this.dispatcher.emit("ANALYTICS_SEND_CUSTOM_DATA",e)}lazyAssetsLoaded(){this.device.saveDensitySettings()}onShowPayTable(e){this.dispatcher.emit("TOGGLE_PAYTABLE",e)}getFunMode(){return this.wrapperModel.funMode}isDevicePropertyMatched(e){return this.deviceConfig.isDevicePropertyMatched(e)}showError(e,t){this.server.handleError({code:e,message:t})}visibilityMenuItem(e,t){return this.dispatcher.emit("CHANGE_MENU_ITEM_VISIBILITY",e,t)}goToLobby(){this.dispatcher.emit("GO_LOBBY")}createSocketConnection(e){return this.server.createSocketConnection(e)}formatMoney(e,t,i){const n=Object(s.d)(K.a);return n.setCurrencySymbol(t),n.formatNumber(e,i)}openCashier(){return this.dispatcher.emit("CASHIER_OPEN",{source:2})}visibilityPopups(e){this.popupManager.visibility(e)}get currentPopupOptions(){const{currentPopup:e}=this.popupManager;return e&&e.options}get externalModulesList(){return this.wrapperModel.externalModulesList}get socket(){return this.server.transport.socket}get serverModes(){return this.server.transportModes}get moneyFormatter(){return Object(s.d)(K.a)}showGameMenuButton(e){this.emit(e?"SHOW_MENU_BUTTON":"HIDE_MENU_BUTTON")}updateBonusCoinsUI(e){this.dispatcher.emit("BC_UI_UPDATE",e)}forceBnsTimerUpdate(){this.dispatcher.emit("FORCE_BC_UI_UPDATE")}skipAvailableRedeemCheck(){this.dispatcher.emit("BC_SKIP_AVAILABLE_REDEEM_CHECK")}getPlayMode(){return this.wrapperModel.token.playmode}loadImages(e){return Object(M.c)(e)}addErrorCodeToGroup(e,t){this.errorPopupMapping.addToGroup(e,t)}updateMenuState(e){this.dispatcher.emit("MENU_STATE",e)}updateUIElement(e,t){this.dispatcher.emit(`UPDATE_UI_ELEMENT_${e}`,t)}setServerOptions(e){this.dispatcher.emit("SET_SERVER_OPTIONS",e)}showGameName(e){this.gameDetector.showGameName(e)}onReload(){this.fullScreenManager.exitFullscreen(),location.reload()}getPlugin(e){return Object(s.d)(V).loadPlugin(e)}get token(){return this.wrapperModel.token}get viewBalance(){return this.getViewBalance()}set viewBalance(e){this.updateViewBalance(e)}}Object(a.a)([Object(s.e)(_.a)],J.prototype,"freeBets",void 0);var Z=i(93);let Q=0;function X(){const e=document.querySelector(".ph-jackpot-mega-win-iframe");if(!e){if(Q>40)return;return setTimeout(X,2e3),void Q++}const{contentWindow:t}=e,i=new(t.AudioContext||t.webkitAudioContext);"suspended"===i.state&&i.resume().then(()=>{})}var ee=i(82);i.d(t,"WrapperLoader",(function(){return te}));class te{constructor(){this.configs=Object(s.d)(S.a),this.device=Object(s.d)(L.a),this.dispatcher=Object(s.d)(p.a),this.pluginManager=Object(s.d)(V),this.popupManager=Object(s.d)(C.a),this.wrapperModel=Object(s.d)(j.a),this.initialize().then(()=>this.dispatcher.emit("CORE_READY"))}jpPopup(){const{funMode:e,isFunModeDisabled:t,playForRealURL:i,lobbyURL:s}=this.wrapperModel;if(!e||!t)return!1;this.dispatcher.emit("MENU_STATE",{visible:!1});const n=[];return i?n.push({title:"playForReal",action:()=>location.href=i}):s&&n.push({title:"lobby",action:()=>location.href=s}),this.popupManager.show(0,{message:"realModeOnlyMessage",buttons:n}),!0}wrapGame(){const{device:e}=this,{liveGame:t}=this.wrapperModel;if(t)return void this.dispatcher.emit("INITIATE_RESIZE");const i=document.getElementById("canvas");i?(i.parentElement===document.body&&e.gameWrapper.appendChild(i),this.dispatcher.emit("INITIATE_RESIZE"),i.addEventListener("webglcontextlost",()=>{this.dispatcher.emit("RELOAD")})):setTimeout(()=>this.wrapGame(),500)}gameRunner(){const e=this.wrapperModel.liveGame?this.configs.game.loadingTimeout:60;return new Promise((t,i)=>{const s=e&&setTimeout(i,1e3*e),n=()=>{const{launchGame:e}=window;e&&e instanceof Function?(clearTimeout(s),this.device.preLaunchGameHooks(),e(this.wrapperAPI),t()):setTimeout(n,500)};n()})}async initialize(){if(this.jpPopup())return;Object(s.d)(E),this.wrapperAPI=new J,Object(s.d)(Z.a).initialize(),this.device.browser.isUC||function(){const e=window.AudioContext,t=e||window.webkitAudioContext;if(!t)return;let i,n;const a=(()=>{function e(){if(n=new t,i||"suspended"!==n.state)return n;const{click:e}=Object(s.d)(L.a).event;return i=()=>{n.resume().then(()=>{location.search.indexOf("phantom_link")>-1&&X()}),document.body.removeEventListener(e,i)},document.body.addEventListener(e,i),n}return e.prototype=t.prototype,e})();!e&&window.webkitAudioContext&&(window.webkitAudioContext=a),window.AudioContext=a}();const e=[];this.wrapperModel.liveGame||e.push(this.device.benchMarkPromise),await Promise.all(e),this.dispatcher.emit("GAME_STARTED_LOADING"),this.getNetworkSpeed();const t=Object(u.c)("script");if(t&&await Object(M.e)(t),await this.pluginManager.install(),Object(s.d)($).initialize(),await this.loadScripts(),!this.wrapperModel.liveGame){const e=Object(s.d)(ee.a),t=(this.configs.game.es5bundle,"");e.initWrapperAPI(this.wrapperAPI),await this.pluginManager.beforeGameLoad(),await Object(M.e)(`mobile${t}.js`),await(i=this.configs.path,/ipad.*mqqbrowser/i.test(navigator.userAgent)?Object(M.e)(`${i}patch-pixi-ipad-qq.js`):Promise.resolve())}var i;await this.startGame(),this.wrapGame(),window.Provider="SkyWind"}getNetworkSpeed(){if(!this.configs.isSplashNeeded)return;const{name:e,size:t}=Object(s.d)(n.a).networkTest;(async(e,t)=>{const i=navigator,s=i.connection||i.webkitConnection||i.mozConnection||{},n=s.downlink||s.downlinkMax;if(n)return 1024*n;const a=Date.now();return await Object(M.c)(`${e}?${a}`),8*t/((Date.now()-a)/1e3)})(e,t).then(e=>{this.device.networkSpeed=e})}async startGame(){try{await this.gameRunner()}catch(e){throw this.dispatcher.emit("GAME_LOAD_FAILED"),new Error(e||"Game doesn't load!")}}loadScripts(){const{scripts:e=[]}=this.configs.game;return Promise.all(e.map(({name:e,async:t})=>Object(M.e)(e,t)))}}},227:function(e,t,i){"use strict";i.r(t);var s=i(3),n=(i(161),i(0)),a=i(88);class o extends a.a{constructor(e={}){super(e),e.text="swipeForFullScreen"}getTemplate(){return i(162)}show(){super.show();const{hideTimeout:e}=this.options;e&&e>0&&(this.timer=setTimeout(()=>this.hide(),e))}hide(){this.timer&&(clearTimeout(this.timer),this.timer=null),super.hide()}}var r=i(14),h=i(116),c=i(85),d=i(9),l=i(93),u=i(89),p=i(13),m=i(99),b=i(84);let g=class{constructor(){this.device=Object(n.d)(b.a),this._nativeWindowScrollTo=window.scrollTo.bind(window),this.device.deviceOS===m.b.IOS&&(window.scrollTo=()=>{})}scrollTo(e,t){this._nativeWindowScrollTo(e,t)}};g=Object(s.a)([n.a],g);var O=i(8);i.d(t,"FullScreenSwiper",(function(){return v}));class v{constructor(e){this.forceType=e,this.device=Object(n.d)(b.a),this.popupManager=Object(n.d)(c.a),this.resizeManager=Object(n.d)(l.a),this.dispatcher=Object(n.d)(O.a),this.scrollManager=Object(n.d)(g),this.widgetManager=Object(n.d)(u.a),this.innerDispatcher=new d.EventEmitter,this.statusBarHeight=this.device.viewportSettings.statusBarHeight,this.initialize()}initialize(){document.body.classList.add("swipe-fs-target"),this.isFullscreenPrevious=this.isFullscreen,this.buildSwipeControl(),this.buildOverlay(),this.addListeners()}buildSwipeControl(){this.el=document.createElement("div"),this.el.className="swipe-control",document.body.appendChild(this.el)}addListeners(){this.dispatcher.on("RESIZE",this.onResize,this),this.innerDispatcher.on("CHANGED",this.onFullScreenChanged,this),this.device.browser.isSafariIOS&&(this.dispatcher.on("ROTATE",this.onRotate,this),this.onScroll=Object(h.a)(this.onScroll,100),addEventListener("scroll",this.onScroll,{passive:!0}))}onScroll(){!pageYOffset||this.isFullscreen||this.popupManager.isPopupOpened||this.scrollManager.scrollTo(0,0)}onResize(){const{isFullscreen:e}=this;e!==this.isFullscreenPrevious&&(this.isFullscreenPrevious=e,this.innerDispatcher.emit("CHANGED"))}onFullScreenChanged(){const{isFullscreen:e}=this;Object(p.e)(this.el,e),e?this.overlay.hide():this.scrollManager.scrollTo(0,0),this.dispatcher.emit("LOCK_SWIPE",e)}get isFullscreen(){if(this.device.isChromeEmulator)return!0;const e=this.resizeManager.isLandscape?screen.width:screen.height;return innerHeight>=e-this.statusBarHeight[this.resizeManager.orientation]}async enter(){this.isFullscreen||this.overlay.show()}buildOverlay(){this.overlay=new o({hideTimeout:"always"===this.forceType?void 0:5e3}),this.widgetManager.addWidget({root:document.body,widget:this.overlay}),this.overlay.hide()}onRotate(){setTimeout(()=>this.el.scrollIntoView(),500)}async exit(){this.overlay.visible&&this.overlay.hide()}onChange(e){this.innerDispatcher.on("CHANGED",e)}}Object(s.a)([r.a],v.prototype,"onScroll",null)},228:function(e,t,i){"use strict";i.r(t);var s=i(3),n=(i(157),i(97)),a=i(14),o=i(0),r=i(10),h=i(4),c=i(88),d=i(106),l=i(13);class u extends c.a{constructor(){super(),this.topPosition=14,this.model={enabled:!1,hidden:!1,visible:!1},this.events={[`${this.device.event.down} this`]:this.onDown,[`${this.device.event.up} this`]:this.onUp}}updateOffsets(e){this.el.style.top=`${e+this.topPosition}px`}addListeners(){super.addListeners(),this.dispatcher.on("MENU_STATE",this.onChangeState,this).on("MENU_SET_OPTIONS",this.onSetOptions,this).on("MENU_VISIBILITY",e=>this.setVisible(!e))}getTemplate(){return i(158)}onChangeState(e,t){const{visible:i,enabled:s}=e;void 0!==i&&this.setVisible(i),void 0!==s&&this.setDisabled(!s,t)}onDown(){Object(l.f)(this.el,!0)}async onSetOptions(e){const{style:t}=this.el,{iconPath:i,hideButton:s,lockButtonState:n,buttonStyle:a}=e;if(!0!==this._lockButtonState||!1===n){if(a)for(const e of Object.keys(a))t[e]=a[e];i&&(await Object(h.c)(i),this.el.classList.add("custom-button"),t.backgroundImage=`url(${i})`),e.isSingleIconState&&(t.backgroundPosition="0 0"),void 0!==s&&(t.display=s?"none":"",this.model.hidden=s,this.update()),this.setSize(e),void 0!==n&&(this._lockButtonState=n)}}onUp(){Object(l.f)(this.el,!1),this.dispatcher.emit("MENU_STATE",{open:!0})}setDisabled(e,t=!1){Object(l.d)(this.el,e,t),this.model.enabled=!e,t||this.update()}setSize({buttonBounds:e,buttonStyle:t}){var i,s;e&&Object(d.a)(this.el,e);const n=(null===(i=t)||void 0===i?void 0:i.top)&&parseInt(t.top,10)||(null===(s=e)||void 0===s?void 0:s.y);n&&(this.topPosition=n,this.updateOffsets(this.device.getMarginSettings().top))}setVisible(e){this.model.hidden||(this.model.visible=e,Object(l.e)(this.el,!e),this.update())}update(){this.dispatcher.emit("MENU_BUTTON_UPDATE",this.model)}}var p=i(89),m=i(94);i.d(t,"MenuViewSidebar",(function(){return g}));const b=e=>{Object(r.b)(e,".hover").forEach(e=>Object(l.f)(e,!1))};let g=class extends n.a{constructor(){super(),this.isMenuSwipe=!1,this.isOpen=!1,this.isPopupOpen=!1,this.defaultActions={history:this.onClickGameHistoryButton,cashier:this.onCashierButtonClick,paytable:this.onClickPaytable,lobby:()=>this.dispatcher.emit("GO_LOBBY"),help:()=>this.openHelp()},this.sidebarButton=new u,this.initialize()}getMenuConfiguration(){return{showPlayForReal:this.wrapperModel.showPlayForReal,sidebar:this.sidebar}}muteSound(e,t){super.muteSound(e,t),this.setSoundCheckBoxState()}setMenuConfiguration(e){const{menuListContainer:t}=this.elements;this.setSidebarListeners(!1),this.elements.soundButton=void 0,super.setMenuConfiguration(e),this.sidebar=e.sidebar,t.innerHTML=this.renderSidebar(),this.findMenuElements(),this.setSidebarListeners(!0),this.setSoundCheckBoxState(),this.updateHistoryButton()}setMenuItemState(e,t){const i=this.getMenuItemById(e);if(!i)return;const{disabled:s,checked:n}=t,{classList:a}=i;if(void 0!==s&&(Object(l.d)(i,s),a.contains("menu-switch"))){const t=i.querySelector(".menu-switch-input");t.disabled=s,this.setCheckBoxState(e,!s&&t.checked)}void 0!==n&&a.contains("menu-switch")&&this.setCheckBoxState(e,n)}setMenuItemVisibility(e,t){super.setMenuItemVisibility(e,t);const i=this.sidebar.find(t=>t.id===e);i&&(i.hidden=!t)}setVolume(e){super.setVolume(e>0?100:-100),this.setSoundCheckBoxState()}addListeners(){super.addListeners(),this.dispatcher.on("MENU_SET_OPTIONS",this.onSetMenuOptions,this).on("RESIZE",this.updateOffsets,this).on("TOGGLE_PAYTABLE",this.onTogglePaytable,this).on("POPUP_STATE_UPDATE",e=>{this.isPopupOpen=e}),this.setSidebarListeners(!0);const{menuListContainer:e}=this.elements;e.addEventListener("change",e=>{const t=e.target;this.setCheckBoxState(t.dataset.id,t.checked)}),e.addEventListener("click",e=>this.onSidebarClick(e));const t=({target:e},t)=>{if(e.classList.contains("menu-list-link")){if(!t)return void b(this.elements.menuListContainer);Object(l.f)(e,t)}},{up:i,down:s}=this.device.event;e.addEventListener(s,e=>t(e,!0)),e.addEventListener(i,e=>t(e,!1)),this.addMobileWorkarounds()}findMenuElements(){super.findMenuElements(),this.elements={menuHolder:this.el(".menu-holder"),menuOverlay:this.el(".menu-overlay"),soundButton:this.el(".menu-sound>.menu-switch-input"),historyButton:this.el(".menu-history"),cashierButton:this.el(".menu-cashier"),paytableButton:this.el(".menu-paytable"),menuListContainer:this.el(".menu-list-container")}}getTemplate(){return i(159)}initialize(){this.preloadImages=["sidebar-spr.png"],4===Object(o.d)(m.a).features.mark?this.preloadImages.push("sidebar-btn-mark4.png"):this.preloadImages.push("sidebar-btn-icon-spr.png","sidebar-btn-spr.png"),super.initialize()}async onChangeState(e){await super.onChangeState(e);const{open:t}=e;void 0!==t&&t!==this.isOpen&&(t?this.onOpenMenu():this.onCloseMenu())}renderMenu(){this.menuData=this.buildMenu(),super.renderMenu(),Object(o.d)(p.a).addWidget({widget:this.sidebarButton})}setVisible(e){super.setVisible(e),e&&this.updateOffsets(this.resizeManager.resolution)}toggleMenuPanel(e){const{menuHolder:t,menuOverlay:i}=this.elements;Object(l.e)(t,!e),Object(l.e)(i,!e),this.setOverlayListening(e)}updateOffsets(e){const{marginSettings:t,dynamicOffsets:i,height:s}=e,{menuHolder:n}=this.elements,a=t.top+i.top;this.sidebarButton.updateOffsets(a),n.style.top=`${t.top}px`,n.style.height=`${s+i.top+i.bottom}px`}addMobileWorkarounds(){const{up:e,move:t}=this.device.event;this.element.addEventListener(t,()=>{this.isMenuSwipe=!0}),this.element.addEventListener(e,e=>{this.isMenuSwipe&&(e.stopImmediatePropagation(),b(this.elements.menuListContainer)),this.isMenuSwipe=!1},!0)}buildMenu(){return this.sidebar=this.initSideBar(),{showPlayForReal:this.wrapperModel.showPlayForReal,sidebar:this.renderSidebar()}}closePanels(e){e&&e.preventDefault(),this.onCloseMenu()}defaultMenuItemAction(e,t){var i;this.dispatcher.emit("MENU_ITEM_CLICK",{id:t}),t in this.defaultActions&&this.defaultActions[t].call(this,e),"switch"!==(null===(i=this.getItemConfig(t))||void 0===i?void 0:i.type)&&this.onCloseMenu()}getItemConfig(e){return this.sidebar.find(({id:t})=>t===e)}initSideBar(){const{click:e,up:t}=this.device.event,{lobbyURL:i,playForRealURL:s,showPlayForReal:n}=this.wrapperModel,a={id:"cashier",type:"link",newTab:!this.cashier.isSameTab,href:this.cashier.URL},o={id:"lobby",type:"button",event:e},r={id:"playForReal",type:"link",href:s},h={id:"help",hidden:!0,type:"button",event:e},c=[{id:"paytable",type:"button",event:t},{id:"history",type:"history",href:this.history.URL,hidden:!this.history.visible,disabled:!this.history.enabled},{id:"sound",type:"switch"}];return this.cashier.hidden||c.unshift(a),i&&c.unshift(o),n&&c.unshift(r),c.splice(c.length-2,0,h),c.forEach(e=>e.label=e.label||this.lang(e.id)),c}onClickPaytable(){this.dispatcher.emit("ONPAYTABLE"),this.playButtonClickSound()}onCloseMenu(){this.isOpen=!1,this.toggleMenuPanel(!1),this.dispatcher.emit("MENU_VISIBILITY",!1),this.dispatcher.emit("LOCK_SWIPE",!1),this.toggleMenuTouchEvents()}onOpenMenu(){this.isPopupOpen||this.model.isDisabled||(this.isOpen=!0,this.toggleMenuPanel(!0),this.dispatcher.emit("MENU_VISIBILITY",!0),this.playButtonClickSound(),this.dispatcher.emit("LOCK_SWIPE",!0),setTimeout(()=>{this.toggleMenuTouchEvents()},400))}onSetMenuOptions({menuPosition:e}){e&&Object(l.c)(this.element,"right","right"===e)}onSidebarClick(e){let t=e.target;for(;t!==e.currentTarget&&!t.dataset.id;)t=t.parentElement;const i=t.dataset.id;i&&this.defaultMenuItemAction(e,i)}onTogglePaytable(e){this.setMenuItemState("paytable",{disabled:e})}renderSidebar(){return i(160)(this.sidebar)}setCheckBoxState(e,t){this.switchCheckBox(e,t),"sound"===e&&this.muteSound(!this.elements.soundButton.checked)}setOverlayListening(e){const{menuOverlay:t}=this.elements,{click:i}=this.device.event;e?t.addEventListener(i,this.closePanels):t.removeEventListener(i,this.closePanels)}setSidebarListeners(e){this.sidebar.forEach(({id:t,callback:i,event:s})=>{if(!i)return;const n=this.getMenuItemById(t);n&&(e?n.addEventListener(s,i):n.removeEventListener(s,i))})}setSoundCheckBoxState(){this.switchCheckBox("sound",!this.model.isMutedSound)}switchCheckBox(e,t){const i=this.getMenuItemById(e),s=i.querySelector(".menu-switch-fake");s&&(i.querySelector(".menu-switch-input").checked=t,Object(l.b)(s,t),Object(l.b)(i,t))}toggleMenuTouchEvents(){const{menuListContainer:e}=this.elements;Object(l.c)(e,"touch-disabled",!this.isOpen),Object(l.c)(e,"allow-swipe",this.isOpen)}get mobileElements(){const{menuOverlay:e,historyButton:t}=this.elements;return{menuButton:this.sidebarButton.el,menuOverlay:e,historyButton:t}}};Object(s.a)([a.a],g.prototype,"closePanels",null),g=Object(s.a)([Object(o.b)(n.a)],g)},229:function(e,t,i){"use strict";i.r(t);i(164);var s=i(0),n=i(83),a=i(16),o=i(5),r=i(4),h=i(125),c=(i(1),i(6)),d=i(93),l=i(13);const u={SCALE_BREAKPOINTS:[{size:480,scale:1.5},{size:640,scale:2}]};var p=i(8),m=i(109);i.d(t,"ScreenLock",(function(){return b}));class b{constructor(){this.isLocked=!1,this.orientationAPI=screen.orientation,this.dispatcher=Object(s.d)(p.a),this.resizeManager=Object(s.d)(d.a),this.locale=Object(s.d)(n.a),this.splash=Object(s.d)(a.a),this.path=Object(s.d)(o.a).path}lock(e){if(this.isLocked)return Promise.resolve();const{imageUrl:t,orientation:i,imageWidth:s,imageHeight:n}=e;this.isLockForLandscape="landscape"===i,this.orientationAPI&&(this.tryLockOrientation(),this.dispatcher.on("FULLSCREEN_CHANGE",this.tryLockOrientation,this));const a=t||Object(c.k)(this.path,`lock-${i}.png`);if(this.options=Object.assign({message:this.locale.i18n("screenLock")},e),this.ready=Object(r.c)(a),this.overlay=this.render(),t&&(this.overlay.style.backgroundImage=`url(${t})`),s||n){const e=s?`${s/2}px`:"auto",t=n?`${n/2}px`:"auto";this.overlay.style.backgroundSize=`${e} ${t}`}return this.ready.then(()=>{document.body.appendChild(this.overlay),this.dispatcher.on("ROTATE",this.checkOrientation,this),this.checkOrientation(this.resizeManager.resolution),this.isLocked=!0}),this.ready}unlock(){if(this.isLocked&&(document.body.removeChild(this.overlay),this.dispatcher.off("ROTATE",this.checkOrientation,this),this.isLocked=!1,this.orientationAPI)){this.dispatcher.off("FULLSCREEN_CHANGE",this.tryLockOrientation,this);try{this.orientationAPI.unlock()}catch(e){}}}checkOrientation({isLandscape:e,width:t,height:i}){const s=this.isLockForLandscape!==e;let n;s&&(n=this.getScale(t,i));const a=()=>this.toggleLockScreen(s,n);this.splash.isActive||!this.splash.isComplete?this.dispatcher.once("SPLASH_COMPLETE",a,this):a()}toggleLockScreen(e,t){this.overlay.style[m.a.transform]=t?`scale(${t})`:"",Object(l.c)(document.body,"screenlock",e),Object(l.c)(this.overlay,"lock-screen_hidden",!e),this.dispatcher.emit("SCREEN_LOCK",e),this.dispatcher.emit("LOCK_SWIPE",e),e&&this.dispatcher.emit("HIDE_KEYBOARD")}tryLockOrientation(){if(this.orientationAPI)try{this.orientationAPI.lock(this.options.orientation)}catch(e){}}getScale(e,t){const i="landscape"===this.options.orientation?e:t,s=u.SCALE_BREAKPOINTS.filter(e=>i>e.size);return s.length?s[s.length-1].scale:void 0}render(){const e=i(165);return Object(h.b)(e(this.options))}}},230:function(e,t,i){"use strict";i.r(t);var s=i(0),n=i(83),a=i(5),o=i(94);i(148),i(149),(async()=>{await Object(s.d)(a.a).loadSettings(),await Object(s.d)(n.a).initialize(),Object(s.d)(o.a).parseVersionConfig();const{WrapperLoader:e}=i(226);new e})()},80:function(e,t,i){"use strict";i.d(t,"a",(function(){return h}));var s=i(3),n=i(5),a=i(0),o=(i(1),i(87)),r=i(8);let h=class{constructor(){this.configs=Object(a.d)(n.a),this.dispatcher=Object(a.d)(r.a),this.storage=Object(a.d)(o.a).wrapperStorage,this.isDisabled=!1,this.initialize()}initialize(){this.isSidebar=!0}get isMutedSound(){return this.volume<=0}getVolume(){return Math.max(this.volume,0)}setVolume(e,t=!0){Math.abs(e)>100&&(e=100*(e>0?1:-1)),this.volume=e,this.dispatcher.emit("SOUND",this.isMutedSound?0:this.volume/100),t&&this.storage.setItem("sound",`${e}`)}muteSound(e,t){void 0!==e&&(void 0===this.volume&&this.initSound(),this.setVolume((e?-1:1)*Math.abs(this.volume),t))}initSound(){if(void 0!==this.volume)return;const e=parseFloat(this.storage.getItem("sound"));this.volume=isNaN(e)?100:e}};h=Object(s.a)([a.a],h)},90:function(e,t,i){},92:function(e,t,i){"use strict";var s=i(3),n=i(81),a=i(0),o=i(80),r=(i(90),i(13));class h{constructor(){this._visible=!1}set visible(e){this._visible!==e&&(this.el||this.create(),this._visible=e,Object(r.e)(this.el,!e))}create(){this.el=document.createElement("div"),this.el.className="pause-overlay hidden",document.body.appendChild(this.el)}}var c=i(8),d=i(82);i.d(t,"a",(function(){return l}));let l=class{constructor(){this.isPaused=!1,this.server=Object(a.d)(n.a),this.menuModel=Object(a.d)(o.a),this.overlay=new h,this.dispatcher=Object(a.d)(c.a),this.gameAPIManger=Object(a.d)(d.a)}async pause({mute:e=1,showOverlay:t=!0}={}){if(this.isPaused)return;this.isPaused=!0,this.server.pause(),t&&(this.overlay.visible=!0),e&&!this.menuModel.isMutedSound&&this.proceedMute(e);const{isGameAPIAvailable:i}=this.gameAPIManger;i&&(await this.gameAPIManger.checkReelsStopped(),this.gameAPIManger.pause())}proceedMute(e){this.isMuted=!0,2===e?(this.menuModel.muteSound(!0,!1),this.unmute=()=>this.menuModel.muteSound(!1,!1)):(this.dispatcher.emit("MUTE_SOUND",!0),this.unmute=()=>this.dispatcher.emit("MUTE_SOUND",!1))}async resume(){if(!this.isPaused)return;this.isPaused=!1,this.server.resume(),this.overlay.visible=!1,this.isMuted&&(this.unmute(),this.isMuted=!1);const{isGameAPIAvailable:e}=this.gameAPIManger;e&&(await this.gameAPIManger.checkReelsStopped(),this.gameAPIManger.unpause())}};l=Object(s.a)([a.a],l)},94:function(e,t,i){"use strict";i.d(t,"a",(function(){return l}));var s=i(3),n=i(5),a=i(0),o=i(84),r=i(1),h=i(8),c=i(86),d=i(82);i(100);let l=class{constructor(){this.gameName=document.title,this.configs=Object(a.d)(n.a),this.gameAPIManager=Object(a.d)(d.a),this.initialize()}initialize(){h.a.once("INIT_RESPONSE_RECEIVED",this.checkIfGameNameMustBeShown,this).once(c.a.GAME_API_INITIALIZED,this.refineGameType,this);const{isLive:e}=this.configs;this.features={mark:0,arcadia:!1,card:!1,live:e,slot:!1,table:!1}}get isSlot(){return this.features.slot}isAllowExternalGameModules(){const{live:e,arcadia:t}=this.features;return!t&&!e}showGameName(e){this.gameNameElement||this.createGameNameElement();const t=e&&e.styles;t&&Object.assign(this.gameNameElement.style,t)}parseVersionConfig(){if(this.features.live)return;let e=!1;const t={mark2:1,mark3:2,mark4:4,markt:6},i=this.configs.version||{};for(const s of Object.keys(i)){const n=s.toLowerCase(),a=n.match(/mark\w/);if(a){const e=a[0];this.features.mark=t[e],"mark3"===e&&parseInt(i[s].split(".")[0],10)>=14&&(this.features.mark=3)}else n.indexOf("engine")>-1?this.features.mark=2:n.indexOf("arcadia")>-1?this.features.arcadia=!0:n.indexOf("common")>-1&&(e=!0)}this.features.slot=0!==this.features.mark,this.features.table=!this.features.mark&&!this.features.arcadia&&!e}refineGameType(){var e;const t=null===(e=this.gameAPIManager.gameAPI.context)||void 0===e?void 0:e.gameType;this.features.card="CARD"===t,this.features.slot="SLOT"===t,this.features.table="TABLE"===t,h.a.emit("GAME_TYPE_REFINED")}checkIfGameNameMustBeShown({jrsdSettings:e}){{if(!e||!e.showGameName||!Object(r.d)("showGameName"))return;const{showGameNameDesktop:t,showGameNameMobile:i}=this.configs.game;if(!1===i)return}this.showGameName()}createGameNameElement(){this.gameName=document.title,this.gameNameElement=document.createElement("div"),this.gameNameElement.classList.add("game-name"),this.gameNameElement.textContent=this.gameName,Object(a.d)(o.a).gameWrapper.appendChild(this.gameNameElement)}};l=Object(s.a)([a.a],l)},95:function(e,t,i){"use strict";var s=i(3),n=i(81),a=i(83),o=i(6),r=i(5),h=i(0),c=i(85),d=i(12),l=i(84),u=i(91),p=i(8),m=i(1);i.d(t,"a",(function(){return g}));const b={3:e=>Object(h.d)(c.a).show(4,{iFrameURL:e,className:"game-history"}),0:o.l,2:e=>Object(o.l)(e,{name:"History"})};let g=class{constructor(){this.locale=Object(h.d)(a.a),this.configs=Object(h.d)(r.a),this.device=Object(h.d)(l.a),this.serverModel=Object(h.d)(u.a),this.wrapperModel=Object(h.d)(d.a),this.dispatcher=Object(h.d)(p.a),this.active=!1,this.rawURL=Object(m.f)("history_url"),this.available=!!this.rawURL,this.visible=!(!this.available||!Object(m.d)("history")),this.navigationMode=(()=>{const e=Object(m.c)("history_in_popup");return"1"===e||"2"===e?3:0})(),this.isPopupMode=3===this.navigationMode,this._enabled=!1,this._URL=this.rawURL,this.params={mobile:!0,historyUrl:location.href.split("?")[0].replace("index.html","history.html")},this.available&&(this.isWorkaroundNeeded=!this.isPopupMode&&(this.device.isIOS||this.device.browser.isQQ),this.addListeners())}get enabled(){return this._enabled&&!(this.isPopupMode&&this.isPopupOpen)}get URL(){return this._URL}addListeners(){this.dispatcher.once("SESSION_CHANGE",this.activate,this).once("SETUP_GAME_PARAMS",this.onSetupGameParams,this).on("HISTORY_OPEN",this.open,this),this.isPopupMode&&this.visible&&this.dispatcher.on("POPUP_STATE_UPDATE",this.onPopupStateUpdate,this)}onPopupStateUpdate(e){this.isPopupOpen=e,this.dispatcher.emit("HISTORY_UPDATED")}async onSetupGameParams({historyUrl:e,nameTranslations:t}){const i={};e&&(i.historyUrl=e||this.configs.game.historyUrl);const s=await this.getGameName(t);s&&(i.gameName=encodeURIComponent(s)),Object.keys(i).length&&this.setParams(i)}async getGameName(e){const{ID:t,NAME:i}=this.configs.game;if("zh-cn"!==this.locale.code)return i;if(e&&e["zh-cn"])return e["zh-cn"];const s=`games/${t}`;try{await this.locale.loadPlugin(s)}catch(e){return i}return this.locale.i18n(`${s}.gameName`)}activate(){if(this.active)return;this.active=!0;const{screenDensity:e,isWebGLSupport:t}=this.device,i={gameSession:Object(h.d)(n.a).getSession().getSession(),dpi:e,language:this.locale.code,canvas:t?0:1,api:this.serverModel.URL};this.setParams(i)}open(e){if(!this.available)return;this.dispatcher.emit("HISTORY_BEFORE_OPEN",e);const{event:t}=e;t&&this.isWorkaroundNeeded||(t&&t.preventDefault(),b[this.navigationMode](this.URL))}setParams(e){this.params=Object.assign(Object.assign({},this.params),e),this._enabled=this.rawURL&&"gameSession"in this.params&&!this.wrapperModel.funMode||!1,this.updateURL(),this.dispatcher.emit("HISTORY_UPDATED")}updateURL(){var e,t;this._URL=(null===(t=null===(e=this.serverModel.initResponse)||void 0===e?void 0:e.brandSettings)||void 0===t?void 0:t.omitHistoryURLParams)?this.rawURL:Object(m.h)(this.URL,Object.keys(this.params).map(e=>`${e}=${this.params[e]}`).join("&"))}};g=Object(s.a)([h.a],g)},97:function(e,t,i){"use strict";i.d(t,"a",(function(){return y}));var s=i(3),n=i(0),a=i(83),o=i(81),r=i(14),h=i(5),c=i(80),d=i(4),l=i(7),u=i(103),p=i(96),m=i(12),b=i(93),g=i(6),O=i(89),v=i(84),E=i(98),S=i(8),M=i(82),f=i(95),w=i(13);class y{constructor(){this.initialized=!1,this.preloadImages=[],this.afterResourcesLoaded=new l.a,this.device=Object(n.d)(v.a),this.dispatcher=Object(n.d)(S.a),this.gameAPIManager=Object(n.d)(M.a),this.helpModel=Object(n.d)(u.a),this.model=Object(n.d)(c.a),this.wrapperModel=Object(n.d)(m.a),this.resizeManager=Object(n.d)(b.a),this.history=Object(n.d)(f.a),this.cashier=Object(n.d)(E.a),this.widgets=Object(n.d)(O.a),this.balanceModel=Object(n.d)(p.a),this.configs=Object(n.d)(h.a),this.locale=Object(n.d)(a.a),this.server=Object(n.d)(o.a),this.wasDisplayed=!1}initialize(){this.loadResources(),this.renderMenu(),this.findMenuElements(),this.addListeners(),this.initialized=!0}findMenuElements(){this.element=document.querySelector(".wrapper-menu")}el(e){return this.element.querySelector(e)}getMenuItemById(e){return this.el(`.menu-${e}`)}muteSound(e,t){this.model.muteSound(e,t)}setVolume(e){this.model.setVolume(e)}initSound(){this.model.initSound(),setTimeout(()=>this.setVolume(this.model.volume),0)}onDisabled(e){this.model.isDisabled=e}playButtonClickSound(){this.dispatcher.emit("BUTTON_CLICK")}renderMenu(){const e=this.getTemplate();document.body.insertAdjacentHTML("beforeend",e(this.menuData)),this.element=document.querySelector(".wrapper-menu")}getTemplate(){throw new Error("Method not implemented.")}async loadResources(){const{preloadImages:e}=this;e&&e.length&&await Object(d.c)(Object(g.k)(this.configs.path,e)),this.afterResourcesLoaded.resolve()}setMenuItemState(e,t,i=!1){const s=this.getMenuItemById(e);s&&void 0!==t.disabled&&Object(w.d)(s,t.disabled,i)}getMenuConfiguration(){return this.menuData}setMenuConfiguration(e){this.menuData=e}addListeners(){this.dispatcher.on("MUTE_SOUND",this.muteSound,this).on("MENU_STATE",this.onChangeState,this).on("CHANGE_MENU_ITEM_VISIBILITY",this.setMenuItemVisibility,this),this.history.visible&&this.dispatcher.on("HISTORY_UPDATED",this.updateHistoryButton,this),this.cashier.hidden||this.dispatcher.on("CASHIER_UPDATED",this.updateCashierButton,this)}onCashierButtonClick(e){this.cashier.open({source:0,event:e,callback:this.updateBalance})}onClickGameHistoryButton(e){this.history.open({source:0,event:e})}async onChangeState({visible:e,enabled:t}){await this.afterResourcesLoaded,void 0!==e&&(this.setVisible(e),e&&!this.wasDisplayed&&(this.wasDisplayed=!0,this.dispatcher.emit("MENU_WAS_DISPLAYED"))),void 0!==t&&this.onDisabled(!t)}setVisible(e){Object(w.e)(this.element,!e)}lang(e){return Object(g.a)(this.locale.i18n(e))}setMenuItemVisibility(e,t){const i=this.getMenuItemById(e);i&&Object(w.e)(i.parentElement,!t)}openHelp(){this.helpModel.handleHelp()}updateHistoryButton(){const{historyButton:e}=this.elements;if(!this.history.visible||!e)return;const{enabled:t,URL:i}=this.history;Object(w.d)(e,!t),e.href=i}updateCashierButton(){const{cashierButton:e}=this.elements;if(this.cashier.hidden||e)return;const{enabled:t}=this.cashier;Object(w.d)(e,!t)}async updateBalance(){const{balance:{amount:e}}=await this.server.balanceRequest();this.gameAPIManager.isGameAPIAvailable?await this.gameAPIManager.setBalance(e):this.balanceModel.updateViewBalance(e)}arrange(){}close(){}closeMenu(){}closeSwitchPanel(){}get volume(){return this.model.volume}initalize(){}}Object(s.a)([r.a],y.prototype,"onCashierButtonClick",null),Object(s.a)([r.a],y.prototype,"onClickGameHistoryButton",null),Object(s.a)([r.a],y.prototype,"updateBalance",null)},98:function(e,t,i){"use strict";var s=i(3),n=i(6),a=i(0),o=i(85),r=i(8),h=i(1);const c=()=>{const e=Object(h.c)("cashier_popup")||"800x600",[,t,i]=/(\d+)x(\d+)/.exec(e);return`width=${t},height=${i}`};i.d(t,"a",(function(){return l}));const d={3:(e,t)=>{Object(a.d)(o.a).show(4,{cbClose:t,iFrameURL:e,showImmediately:!0})},2:(e,t)=>{const i=Object(n.l)(e,Object.assign(Object.assign({},{name:"Cashier",options:c()}),{onCloseCallback:t}));window.focus&&i.focus()}};let l=class{constructor(){this.dispatcher=Object(a.d)(r.a),this.hidden=!1===Object(h.d)("cashier"),this.URL=Object(h.f)("cashier"),this.navigationMode=Object(h.k)("cashier_in_wrapper_popup")?3:Object(h.d)("cashier_target_same_tab")?1:0,this.isSameTab=1===this.navigationMode,this._enabled=!!this.URL,this.openFn=d[this.navigationMode]}get enabled(){return this._enabled}open(e){if(this.dispatcher.emit("CASHIER_BEFORE_OPEN",e),!this.openFn)return;const{event:t,callback:i}=e;t&&t.preventDefault(),this.openFn(this.URL,i)}setOpenCashierFn(e){this.openFn=e,this._enabled=!0,this.dispatcher.emit("CASHIER_UPDATED")}};l=Object(s.a)([a.a],l)}}]);