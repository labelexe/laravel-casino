(window.webpackJsonp1584113172316=window.webpackJsonp1584113172316||[]).push([[30],{100:function(e,t,i){},76:function(e,t,i){"use strict";i.r(t);var s=i(3),a=i(81),n=i(83),r=i(16),o=i(5),c=i(6);function h(){const e=m().getContext("webgl2");return!!(e&&e instanceof window.WebGL2RenderingContext)}function m(){return document.createElement("canvas")}var d=i(0);let u=class{constructor(){this.performanceSupport=performance&&"object"==typeof performance,this.server=Object(d.d)(a.a),this.clearResourceTimings=()=>null,this.setResourceTimingBufferSize=e=>null,this.emptyTimings=[{domainLookupStart:0,domainLookupEnd:0,connectStart:0,connectEnd:0,responseStart:0,responseEnd:0,requestStart:0,secureConnectionStart:0}],this.performanceSupport&&"function"==typeof performance.now?this.now=()=>performance.now():(this.navigationStart=performance&&performance.timing&&performance.timing.navigationStart||Date.now(),this.now=()=>Date.now()-this.navigationStart),this.performanceSupport&&("function"==typeof performance.setResourceTimingBufferSize&&(this.setResourceTimingBufferSize=e=>performance.setResourceTimingBufferSize(e)),"function"==typeof performance.clearResourceTimings&&(this.clearResourceTimings=()=>performance.clearResourceTimings())),this.setResourceTimingBufferSize(300)}getServerTimings(){const e=this.getResources();return this.clearResourceTimings(),this.setResourceTimingBufferSize(300),e&&e.length?e.map(e=>{const{domainLookupStart:t=0,domainLookupEnd:i=0,responseEnd:s=0,startTime:a=0,connectStart:n=a,connectEnd:r=s,responseStart:o=a,requestStart:c=a,secureConnectionStart:h=a}=e;return{domainLookupStart:t,domainLookupEnd:i,connectStart:n,connectEnd:r,responseStart:o,responseEnd:s,requestStart:c,secureConnectionStart:h}}):this.emptyTimings}getResources(){if(!this.performanceSupport)return;const e=this.server.url;if(1!==this.server.mode&&"function"==typeof performance.getEntriesByName)return performance.getEntriesByName(e,"resource");const t=function(e){let t;return"function"==typeof URL?t=new URL(e):(t=document.createElement("a"),t.href=e),t.origin}(e);return performance.getEntriesByType("resource").filter(e=>e.name.startsWith(t))}};u=Object(s.a)([d.a],u);var g=i(80),l=i(1),p=i(12),S=i(84),f=i(94),v=i(8),E=i(86),b=i(82);i.d(t,"SkywindAnalytics",(function(){return y}));const T=["spin","play-mini-game"];let y=class{constructor(){this.analitycsServerURL="",this.assetsLoadingTime=0,this.eventsLog=[],this.gameLoadingTime=0,this.gameStartedTime=0,this.isCardGame=!1,this.isLiveGame=!1,this.isSlotGame=!1,this.spinActionStage="Main game",this.serverProtocol="",this.configs=Object(d.d)(o.a),this.device=Object(d.d)(S.a),this.dispatcher=Object(d.d)(v.a),this.gameAPIManager=Object(d.d)(b.a),this.gameDetector=Object(d.d)(f.a),this.locale=Object(d.d)(n.a),this.menuModel=Object(d.d)(g.a),this.server=Object(d.d)(a.a),this.splash=Object(d.d)(r.a),this.timingService=Object(d.d)(u),this.wrapperModel=Object(d.d)(p.a),this.additionalData=[],this.brandId=this.wrapperModel.token.brandId||-1,this.mode=this.wrapperModel.funMode?"fun":"real",this.playerCode=this.wrapperModel.token.playerCode||"n/a",this.initialize()}initialize(){Object(l.c)("swa_url");this.analitycsServerURL=this.configs.server.skywindAnalytics,this.analitycsServerURL&&(this.checkGameType(),this.sendAnalyticsStart("pluginLoaded"),this.addListeners())}addListeners(){this.dispatcher.once("SPLASH_COMPLETE",this.onSplashComplete,this).once("GAME_TYPE_REFINED",this.checkGameType,this).on("SERVER_REQUEST",this.onServerRequest,this).on("ADD_TO_ANALYTICS",e=>this.eventsLog.push(e)).on("ANALYTICS_PARAMS_CHANGED",this.onChangeAnalyticsParams,this).on("ANALYTICS_SEND_CUSTOM_DATA",this.sendAnalyticsCustom,this).on("SWAEvent.EXTEND_DATA",this.onExtendData,this),this.isLiveGame?this.addListenersLive():this.dispatcher.once(E.a.GAME_LOADED,this.onGameLoaded,this).once(E.a.PLAY_CLICKED,this.onPlayClicked,this)}addListenersLive(){this.dispatcher.once("TRANSPORT_INITIALIZED",()=>{this.server.transport.socket.on("play",this.onServerRequestLive,this)},this).on("SERVER_ERROR",(e,t)=>{this.sendAnalytics({error:{code:e,message:t}})},this)}checkExtendedData(e){if(this.additionalData.length)for(let t=0;t<this.additionalData.length;++t){if(!this.additionalData[t].types.includes(e.type))continue;const{key:i,data:s,sendOnce:a}=this.additionalData[t];e[i]="function"==typeof s?s():s,a&&(this.additionalData.splice(t,1),--t)}}fetch(e){if(!this.analitycsServerURL)throw new Error("Analytics URL not found");fetch(this.analitycsServerURL,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},mode:"no-cors",body:JSON.stringify(e)})}getBasicData(){return this._basicData||(this._basicData={brandId:this.brandId,currency:this.wrapperModel.token.currency||"n/a",isMobile:!0,language:this.locale.code,mode:this.mode,name:document.title,origin:location.origin,playerCode:this.playerCode,referrer:document.referrer||"n/a",urlParams:this.device.getParams,wrapperVersion:"6.33.0"}),this._basicData}getDeviceData(){if(!this._deviceData){const{webgl1support:e,maxTextureSize:t}=function(){const e=m(),t=e.getContext("webgl")||e.getContext("experimental-webgl"),i=!!(t&&t instanceof WebGLRenderingContext);return{webgl1support:i,maxTextureSize:t&&i?t.getParameter(t.MAX_TEXTURE_SIZE):-1}}();this._deviceData={benchmark:this.device.benchMarkScore,browser:this.device.getBrowser(),canvasMode:!this.device.isWebGLSupport,dpi:this.device.screenDensity,es6support:!0,maxTextureSize:t,operatingSystem:this.device.getOS(),pixelRatio:devicePixelRatio,protocol:this.serverProtocol,slowConnection:this.device.isSlowConnection,splashName:this.splash.splashName,userAgent:navigator.userAgent,webgl1support:e,webgl2support:h()}}const{screenSize:e,viewportSize:t}=function(){const e=devicePixelRatio||1;return{screenSize:Object(c.n)(screen.width*e,screen.height*e),viewportSize:Object(c.n)(innerWidth*e,innerHeight*e)}}(),i=(this.device.isLandscape?"landscape":"portrait")||"n/a",s=this.menuModel.getVolume();return Object.assign(Object.assign({},this._deviceData),{orientation:i,screenSize:e,sound:!!s,soundLevel:s,viewportSize:t})}getGameData(){return this._gameId||(this._gameId=this.server.gameCode),this._gameServer||(this._gameServer=this.server.url),this._gameSession||(this._gameSession=this.server.getSession().getSession()),{gameId:this._gameId||"n/a",gameServer:this._gameServer||"n/a",gameSession:this._gameSession||"n/a"}}getTimingsData(e){const t=this.timingService.getServerTimings();return((e,t)=>{const{domainLookupStart:i,domainLookupEnd:s,connectStart:a,connectEnd:n,responseStart:r,responseEnd:o,requestStart:c,secureConnectionStart:h}=e,m={dnsTime:s-i,requestDuration:t?t.time:0,responseTime:o-r,sslTime:c-h,tcpTime:n-a,timeToFirstByte:r-c,totalTime:o-a};return Object.keys(m).forEach(e=>{m[e]<0&&(m[e]=0)}),m})(t[t.length-1],e)}onChangeAnalyticsParams({serverProtocol:e}){this.serverProtocol=e}onGameLoaded(){this.gameLoadingTime=this.timingService.now(),this.sendAnalyticsStart("gameLoaded")}onExtendData(e){this.additionalData.push(e)}onPlayClicked(){this.gameStartedTime=this.timingService.now(),this.sendAnalyticsStart("gameStarted")}async onServerRequest(e){const t=this.timingService.now(),i={params:e.body};try{const t=await e.requestPromise;i.roundEnded=t.roundEnded,i.isJackpot=!!t.jackpot}catch(e){i.error=e}i.time=this.timingService.now()-t,this.sendAnalytics(i,e.options&&e.options.wsEvent),this.isSlotGame&&this.setSpinActionStage(i)}onServerRequestLive(e){const{error:t,requestId:i,result:s}=e,{request:a}=s,n={error:t,params:{request:a,requestId:i,startGameToken:null}},r=this.prepareData(n,"live");this.fetch(r)}onSplashComplete(){const e=this.timingService.now();if(this.assetsLoadingTime=e,this.isLiveGame)return this.gameLoadingTime=e,this.gameStartedTime=e,void this.sendAnalyticsStart("gameStarted");this.sendAnalyticsStart("assetsLoaded")}prepareData(e,t){const i=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({type:t,customData:e.customData},this.getBasicData()),this.getDeviceData()),this.getGameData()),this.getTimingsData(e)),(({error:e,params:t}={})=>{const{request:i,requestId:s=-1}=t||{},a={request:i,requestId:s,errorCode:e?e.code||-1:0};return e&&(a.errorMessage=e.message||e),a})(e));if("init"===t)return i;if(this.eventsLog.length&&(i.eventsLog=this.eventsLog,this.eventsLog=[]),this.isSlotGame&&(i.spinActionStage=this.spinActionStage,this.gameAPIManager.isGameAPIAvailable)){const{gameAPI:e}=this.gameAPIManager;i.isTurboModeActive=!!e.getTurboMode(),i.isAutoSpinsActive=e.isAutoSpinsActive(),i.isContinuousSpinsActive=e.isContinuousSpinsActive()}return i}checkGameType(){const{card:e,live:t,slot:i}=this.gameDetector.features;this.isCardGame=e,this.isLiveGame=t,this.isSlotGame=i}sendAnalyticsStart(e){const{assetsLoadingTime:t,gameLoadingTime:i,gameStartedTime:s}=this,a=Object.assign(Object.assign({type:"start",typeExtra:e,assetsLoadingTime:t,gameLoadingTime:i,gameStartedTime:s},this.getBasicData()),this.getGameData());this.fetch(a)}sendAnalytics(e,t){let i;const{request:s}=e.params||{};if("init"===s?i="init":this.isCardGame?i="card":T.includes(s)?i="spin":"play"===t?i="play":e.error&&(i="error"),!i)return;const a=this.prepareData(e,i);this.checkExtendedData(a),this.fetch(a)}sendAnalyticsCustom(e){const t=this.prepareData({customData:e},"custom");this.checkExtendedData(t),this.fetch(t)}setSpinActionStage({isJackpot:e,roundEnded:t}){"Jackpot"===this.spinActionStage&&t?this.spinActionStage="Main game":this.spinActionStage=e?"Jackpot":!1===t?"Feature":"Main game"}};y=Object(s.a)([d.a],y)},80:function(e,t,i){"use strict";i.d(t,"a",(function(){return c}));var s=i(3),a=i(5),n=i(0),r=(i(1),i(87)),o=i(8);let c=class{constructor(){this.configs=Object(n.d)(a.a),this.dispatcher=Object(n.d)(o.a),this.storage=Object(n.d)(r.a).wrapperStorage,this.isDisabled=!1,this.initialize()}initialize(){this.isSidebar=!0}get isMutedSound(){return this.volume<=0}getVolume(){return Math.max(this.volume,0)}setVolume(e,t=!0){Math.abs(e)>100&&(e=100*(e>0?1:-1)),this.volume=e,this.dispatcher.emit("SOUND",this.isMutedSound?0:this.volume/100),t&&this.storage.setItem("sound",`${e}`)}muteSound(e,t){void 0!==e&&(void 0===this.volume&&this.initSound(),this.setVolume((e?-1:1)*Math.abs(this.volume),t))}initSound(){if(void 0!==this.volume)return;const e=parseFloat(this.storage.getItem("sound"));this.volume=isNaN(e)?100:e}};c=Object(s.a)([n.a],c)},94:function(e,t,i){"use strict";i.d(t,"a",(function(){return d}));var s=i(3),a=i(5),n=i(0),r=i(84),o=i(1),c=i(8),h=i(86),m=i(82);i(100);let d=class{constructor(){this.gameName=document.title,this.configs=Object(n.d)(a.a),this.gameAPIManager=Object(n.d)(m.a),this.initialize()}initialize(){c.a.once("INIT_RESPONSE_RECEIVED",this.checkIfGameNameMustBeShown,this).once(h.a.GAME_API_INITIALIZED,this.refineGameType,this);const{isLive:e}=this.configs;this.features={mark:0,arcadia:!1,card:!1,live:e,slot:!1,table:!1}}get isSlot(){return this.features.slot}isAllowExternalGameModules(){const{live:e,arcadia:t}=this.features;return!t&&!e}showGameName(e){this.gameNameElement||this.createGameNameElement();const t=e&&e.styles;t&&Object.assign(this.gameNameElement.style,t)}parseVersionConfig(){if(this.features.live)return;let e=!1;const t={mark2:1,mark3:2,mark4:4,markt:6},i=this.configs.version||{};for(const s of Object.keys(i)){const a=s.toLowerCase(),n=a.match(/mark\w/);if(n){const e=n[0];this.features.mark=t[e],"mark3"===e&&parseInt(i[s].split(".")[0],10)>=14&&(this.features.mark=3)}else a.indexOf("engine")>-1?this.features.mark=2:a.indexOf("arcadia")>-1?this.features.arcadia=!0:a.indexOf("common")>-1&&(e=!0)}this.features.slot=0!==this.features.mark,this.features.table=!this.features.mark&&!this.features.arcadia&&!e}refineGameType(){var e;const t=null===(e=this.gameAPIManager.gameAPI.context)||void 0===e?void 0:e.gameType;this.features.card="CARD"===t,this.features.slot="SLOT"===t,this.features.table="TABLE"===t,c.a.emit("GAME_TYPE_REFINED")}checkIfGameNameMustBeShown({jrsdSettings:e}){{if(!e||!e.showGameName||!Object(o.d)("showGameName"))return;const{showGameNameDesktop:t,showGameNameMobile:i}=this.configs.game;if(!1===i)return}this.showGameName()}createGameNameElement(){this.gameName=document.title,this.gameNameElement=document.createElement("div"),this.gameNameElement.classList.add("game-name"),this.gameNameElement.textContent=this.gameName,Object(n.d)(r.a).gameWrapper.appendChild(this.gameNameElement)}};d=Object(s.a)([n.a],d)}}]);