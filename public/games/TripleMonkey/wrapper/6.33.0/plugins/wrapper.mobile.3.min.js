(window.webpackJsonp1584113172316=window.webpackJsonp1584113172316||[]).push([[3,7],{101:function(e,t,s){"use strict";s.d(t,"a",(function(){return a}));var i=s(3),n=s(0),r=s(126);const o={expiredSession:{message:"expiredSessionErrorMessage",isExpiredSessionPopup:!0,stopShowingPopups:!0},insufficient:{message:"insufficientErrorMessage"},lossLimit:{init:"okLobby",default:"stopPositions"},okLobby:{buttons:{title:"ok",actionEvent:"GO_LOBBY"},stopShowingPopups:!0},okReload:{buttons:{title:"ok",actionEvent:"RELOAD"},stopShowingPopups:!0},realityCheck:{buttons:[{title:"Keep Playing",actionEvent:"SERVER_CONTINUE"},{title:"Quit",actionEvent:"GO_LOBBY"}],middleware:r.b},restartSession:{message:"restartSessionErrorMessage",isRestartSessionPopup:!0,stopShowingPopups:!0},selfExclusion:{message:"Self-exclusion error",buttons:{title:"ok",actionEvent:"GO_LOBBY"}},stopPositions:{buttons:{title:"ok",actionEvent:"STOP_POSITIONS"},middleware:r.c}};let a=class{constructor(){this.errorCodeGroup={expiredSession:[10,11,321,322,511,536,733],insufficient:[91,200],lossLimit:[1507,1508,1509,1510,1511,1512,1513,1515,1516,1517,1518,1521,1522,1523,1524,1525],okLobby:[1500,1501,1526,1527,1528],okReload:[752,1502,1503,1504,1506,1514,1519,1520],realityCheck:[1505],restartSession:[323,510,515,730]},this.errorMap={744:o.selfExclusion,1505:o.realityCheck}}add(e){this.errorMap=Object.assign(Object.assign({},this.errorMap),e)}addToGroup(e,t){this.errorCodeGroup[e].push(t)}get(e,t){const s=this.getConfig(e,t);return s.message||(s.message=`error.${e}`),s}getConfig(e,t){let s=this.errorMap[e];if(!s){const t=Object.keys(this.errorCodeGroup).find(t=>this.errorCodeGroup[t].includes(e));s=o[t]||{}}return s.init&&(s=o[t?s.init:s.default]),s}isCodeInGroup(e,t){return this.errorCodeGroup[e].includes(t)}isSessionExpiredError(e){return this.isCodeInGroup("expiredSession",e)||this.isCodeInGroup("restartSession",e)}isFatalError(e){if(e instanceof Error)return!0;const{code:t}=e;return!this.isCodeInGroup("lossLimit",t)&&!this.isCodeInGroup("realityCheck",t)}};a=Object(i.a)([n.a],a)},106:function(e,t,s){"use strict";s.d(t,"b",(function(){return n})),s.d(t,"a",(function(){return r}));var i=s(109);const n=(e,t,s,i="px",n=1)=>{if(e.clientWidth){let r=t;do{e.style.fontSize=`${r}${i}`,r-=n}while(r&&e.clientWidth>s)}},r=(e,t,s)=>{const{style:n}=e,{width:r,height:o}=t,a=Math.min(r/e.clientWidth,o/e.clientHeight),h=t.y+(s?o:0);n.left=`${t.x}px`,n.right="auto",n.top=`${h}px`,n[i.a.transformOrigin]=s?"0 100% 0":"0 0 0",n[i.a.transform]=`scale(${a})`}},109:function(e,t,s){"use strict";s.d(t,"a",(function(){return n}));const i=e=>{const{style:t}=document.body;for(const s of e)if(s in t)return s;return e[e.length-1]},n={transform:i(["transform","webkitTransform"]),transformOrigin:i(["transformOrigin","webkitTransformOrigin"])}},110:function(e,t,s){},113:function(e,t,s){"use strict";s.d(t,"a",(function(){return o}));var i=s(3),n=s(0),r=s(7);let o=class{constructor(){this.id=0,this.list=[]}use(e){return e.id=this.id++,this.list.push(e),()=>this.remove(e)}remove({id:e}){this.list=this.list.filter(t=>t.id!==e)}check(e){return this.list.length?Object(r.c)(Promise.resolve(e),...this.list):Promise.reject(e)}};o=Object(i.a)([n.a],o)},120:function(e,t,s){"use strict";s.r(t);var i=s(3),n=s(83),r=s(14),o=s(88),a=s(7);s(13);s(150);class h extends o.a{getTemplate(){return s(151)}}const c=function(e){let t=0;return class extends e{constructor(){super(...arguments),this.id=t++}}}(h);class u extends c{constructor(){super(...arguments),this.afterClose=new a.a,this.afterDestroy=new a.a,this.events={[`${this.device.event.down} .toaster-button`]:this.onButtonDown,[`${this.device.event.up} .toaster-button`]:this.onButtonUp},this.afterAutoCloseTimeFinished=new a.a}onButtonDown(){this.button.classList.add("pressed")}onButtonUp(e){e.stopPropagation(),this.dispatcher.emit("BUTTON_CLICK"),this.close()}render(){const{autoClose:e,autoCloseTime:t,buttonType:i}=this.options;return this.options.btn=s("default"===i?152:153),super.render(),this.button=this.el.querySelector(".toaster-button"),e&&this.afterAutoCloseTimeFinished.then(this.close),setTimeout(()=>this.appearing(),50),Object(a.b)(t||6e3).then(()=>this.afterAutoCloseTimeFinished.resolve()),this.el}appearing(){this.el.classList.add("appeared"),this.options.sound&&this.dispatcher.emit("BUTTON_CLICK")}addListeners(){const e=[];this.options.closeOnClick&&e.push(this.close),this.options.onClick&&e.push(this.options.onClick),e.length&&(this.events[`${this.device.event.up} this`]=e),super.addListeners()}set autoClose(e){this.options.autoClose||(this.options.autoClose=e,this.afterAutoCloseTimeFinished.then(this.close))}close(){this.closed||(this.closed=!0,this.afterClose.resolve(),this.el&&(this.el.classList.add("disappeared"),setTimeout(this.destroy,250)))}destroy(){super.destroy(),this.afterDestroy.resolve()}}Object(i.a)([r.a],u.prototype,"close",null),Object(i.a)([r.a],u.prototype,"destroy",null);var l=s(0),d=s(89),p=s(84),m=s(8);const E=["play","spin","player-action"];s.d(t,"ToasterManager",(function(){return A}));let A=class{constructor(){this.dispatcher=Object(l.d)(m.a),this.widgetManager=Object(l.d)(d.a),this.device=Object(l.d)(p.a),this.locale=Object(l.d)(n.a),this.queue=[],this.addListeners()}addListeners(){this.dispatcher.on("SERVER_REQUEST",this.onServerRequest,this)}onServerRequest({body:{request:e}}){E.includes(e)&&this.setAutoCloseForLastToaster()}show(e){const t=new u(this.normalizeOptions(e));return this.setAutoCloseForLastToaster(),this.queue.push(t),t.afterClose.then(()=>this.removeFromQueue(t)),this.currentToaster||this.showNext(),t}normalizeOptions(e){const{text:t,translate:s,buttonText:i="close",translateButtonText:n,buttonType:r="default"}=e;return e.text=s?this.locale.i18n(t):t,e.buttonText=n?this.locale.i18n(i):i,Object.assign(Object.assign({},e),{buttonType:r})}setAutoCloseForLastToaster(){this.queue.length&&(this.queue[this.queue.length-1].autoClose=!0)}removeFromQueue({id:e}){this.queue=this.queue.filter(t=>t.id!==e)}showNext(){this.queue.length?(this.currentToaster=this.queue[0],this.widgetManager.addWidget({root:this.device.gameWrapper,widget:this.currentToaster}),this.currentToaster.afterDestroy.then(()=>this.showNext())):this.currentToaster=null}};A=Object(i.a)([l.a],A)},121:function(e,t,s){"use strict";var i=s(3),n=s(49),r=s(0),o=s(8);s.d(t,"a",(function(){return h}));const a={cashier:()=>o.a.emit("CASHIER_OPEN",{source:1}),close:()=>{},closeWindow:n.closeWindow,continue:"SERVER_CONTINUE",stopPositions:"STOP_POSITIONS","game-history":()=>o.a.emit("HISTORY_OPEN",{source:1}),lobby:"GO_LOBBY",refresh:"RELOAD"};let h=class{constructor(){this.dispatcher=Object(r.d)(o.a),this._map=a}getAction(e){const t=this._map[e];return t?"string"==typeof t?()=>this.dispatcher.emit(t):t:()=>{}}setActions(e){this._map=Object.assign(Object.assign({},this._map),e)}};h=Object(i.a)([r.a],h)},125:function(e,t,s){"use strict";s.d(t,"a",(function(){return r})),s.d(t,"b",(function(){return o}));var i=s(10);const n=e=>{e.setAttribute("target","_blank"),e.setAttribute("rel","nofollow noopener")},r=e=>{if(!/(&#?[\d\w]+;)|(<.+\/\w*>)/.test(e))return e;const t=new DOMParser,{body:s}=t.parseFromString(`<!doctype html><body>${e.replace(/&lt;/g,"<")}`,"text/html");return Object(i.b)(s,"a").filter(e=>!e.hasAttribute("target")).forEach(n),s.innerHTML},o=e=>{const t=document.createElement("div");return t.innerHTML=e,t.firstChild}},126:function(e,t,s){"use strict";s.d(t,"b",(function(){return h})),s.d(t,"c",(function(){return c})),s.d(t,"a",(function(){return l}));var i=s(81),n=s(0),r=s(91),o=s(8),a=s(82);const h=async e=>{const t=Object(n.d)(i.a),s=Object(n.d)(o.a);if(await s.promisifiedOnce("SERVER_CONTINUE"),1===t.mode&&await t.performReInit(),"spin"===e.request)return t.genericRequestLast()},c=async()=>{const e=Object(n.d)(i.a),t=Object(n.d)(o.a),{defaultResponse:s}=Object(n.d)(r.a),{gameAPI:h}=Object(n.d)(a.a);await t.promisifiedOnce("STOP_POSITIONS");try{if(!s||!h)throw 1;return h.isAutoSpinsActive()&&h.resetAutoSpins(),1===e.mode&&await e.performReInit(),s}catch(e){t.emit("RELOAD")}},u={stopPositions:c,continue:h},l=({buttons:e})=>{for(const{gameAction:t}of e)if(t in u)return u[t]}},150:function(e,t,s){},151:function(e,t){e.exports=function(e){var t='<div class="toaster button-'+e.buttonType;return e.cssClass&&(t+=" "+e.cssClass),t+='"> <p>'+e.text+"</p> "+e.btn(e)+"</div>"}},152:function(e,t){e.exports=function(e){return'<div class="toaster-button default">'+e.buttonText+"</div>"}},153:function(e,t){e.exports=function(e){return'<div class="toaster-button cross"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 40 40" enable-background="new 0 0 40 40"> <line x1="10" y1="10" x2="30" y2="30" stroke="#fff" stroke-width="4" stroke-linecap="round" stroke-miterlimit="10"></line> <line x1="30" y1="10" x2="10" y2="30" stroke="#fff" stroke-width="4" stroke-linecap="round" stroke-miterlimit="10"></line> </svg></div>'}},49:function(e,t,s){"use strict";s.r(t),s.d(t,"closeWindow",(function(){return r}));var i=s(0),n=s(83);s(110);const r=()=>{const e=document.createElement("button");e.onclick=()=>(window.open("","_self").close(),setTimeout(o,500),!1),document.body.appendChild(e),e.click()};function o(){const{body:e}=document,t=Object(i.d)(n.a);e.innerHTML=t.i18n("gameÐ¡losed"),e.classList.add("closed-game")}},81:function(e,t,s){"use strict";var i=s(3),n=s(7),r=s(5),o=s(14),a=s(6),h=s(0);class c{constructor(e){this.requestFn=e,this.items=[]}add(e,t){return new Promise((s,i)=>{this.items.unshift({params:e,options:t,resolve:s,reject:i})})}next(){const{params:e,options:t,resolve:s,reject:i}=this.items.pop();return this.requestFn(e,t).then(s,i)}}class u extends c{resolve(){for(;this.items.length;)this.next()}}var l=s(91),d=s(8);const p=Object(h.d)(d.a),m=(e,t,s)=>{const i=s.value;s.value=async function(...e){try{await i.call(this,...e)}catch(e){p.emit("FAILED_LOAD_RESOURCES")}}};var E=s(113);class A extends c{constructor(){super(...arguments),this.inProgress=!1}add(e,t){const s=super.add(e,t);return this.next(),s}next(){if(!this.inProgress&&this.items.length)return this.inProgress=!0,super.next().then(this.finish)}finish(){this.inProgress=!1,this.next()}}Object(i.a)([o.a],A.prototype,"finish",null);class g{constructor(){this.counter=0,this.list=[]}add(e){return e._id=this.counter++,this.list.push(e),()=>this.remove(e._id)}remove(e){this.list=this.list.filter(t=>t._id!==e)}applyTo(e){return this.list.length?Object(n.c)(e,...this.list):e}}var O=s(96);class P{constructor(){this.dispatcher=Object(h.d)(d.a)}setSession(e){this.gameSession=e,this.dispatcher.emit("SESSION_CHANGE",e)}getSession(){return this.gameSession}}var I=s(108);var T=s(125),b=s(85),S=s(12),f=s(101),v=s(114),R=s(15),w=s(120),_=s(121),y=s(126);class C{constructor(e){this.server=e,this.forcePopupOkButtonCodes=[],this.ignoreCodes=[],this.actionMap=Object(h.d)(_.a),this.dispatcher=Object(h.d)(d.a),this.errorManager=Object(h.d)(v.ErrorManager),this.errorPopupMapping=Object(h.d)(f.a),this.popupManager=Object(h.d)(b.a),this.toasterManager=Object(h.d)(w.ToasterManager),this.windowManager=Object(h.d)(R.a),this.wrapperModel=Object(h.d)(S.a)}setupGameParams(e,t){this.forcePopupOkButtonCodes=e||[],this.ignoreCodes=t||[]}serverError(e){if(!e)return void this.showErrorPopup({checkOffline:!0});const{code:t=-1,extraData:s,message:i,isInitResponse:n}=e,r=this.errorPopupMapping.get(t,n);return this.ignoreCodes.includes(t)||r.ignorable?void 0:s?this.parseErrorExtraData(e,r):(r.useServerMessage&&(r.message=i),(({skipHandling:e})=>"legacy"===e)(e)?void 0:(this.legacyServerError(r,t),r.middleware))}getPopupButtons(e,t){const{buttons:s,isExpiredSessionPopup:i,isRestartSessionPopup:n}=t,r=this.forcePopupOkButtonCodes.includes(e)||this.wrapperModel.forcePopupOkButton;return i&&this.wrapperModel.quitGameURL||r?{title:"ok",actionEvent:"GO_LOBBY"}:n?(this.windowManager.setGoToLobbyOrClose(),{title:this.wrapperModel.quitGameURL?"lobby":"close",actionEvent:"GO_LOBBY"}):s}legacyServerError(e,t){const{message:s,stopShowingPopups:i}=e,n={cssClass:"error-popup",message:s,model:{code:t},stopShowingPopups:i};"title"in e&&(n.title=e.title);const r=this.getPopupButtons(t,e);r&&(n.buttons=r),this.showErrorPopup(n)}async showAwaitPopup(e){this.server.pause();const t=await this.popupManager.showAwait(0,e);for(const t of Object(a.d)(e.buttons)){const{ready:e}=t;e&&await e}return this.server.resume(),t}showExtraPopup(e){const t=this.parseExtraMessage(e);if(t&&t.message){if(2===e.msgType)return this.showAwaitPopup(t);this.popupManager.show(0,t)}return Promise.resolve()}showToaster({buttons:e,message:t}){const{label:s,translate:i=!0}=e[0]||{};this.toasterManager.show({text:t,buttonText:i&&s?s.toLowerCase():s,translateButtonText:i})}parseExtraData({messageArray:e}){const t=[];for(const s of e)1===s.msgType?this.showToaster(s):t.push(this.showExtraPopup(s));return Promise.all(t)}parseErrorExtraData(e,t){var s;const{code:i,extraData:n}=e,{errorVisibility:r,messageArray:o}=n,a=e.message?Object(T.a)(e.message):void 0,h=t.message;if(1===r)return;const c=(null===(s=o)||void 0===s?void 0:s.length)?o.map(e=>this.parseExtraMessage(e)):[{message:a}],u=(({useServerMessage:e},t,s)=>void 0===e?"":e?t:s)(n,a,t.message);let l;for(const e of c)e&&(e.model={code:i},e.message=u||!e.skipI18n&&h,e.message||(e.message=a),e.middleware&&(l=e.middleware),this.showError(e,r));return l}showError(e,t){void 0!==t&&4!==t&&3!==t||this.showErrorPopup(e)}parseExtraMessage(e){if(!e||0===e.msgType)return null;const{msgTitle:t="serverErrorTitle",message:s="",translate:i=!0,translateTitle:n}=e;return{buttons:this.parseButtons(e),middleware:Object(y.a)(e),checkOffline:!1,isButtonsEqualSize:!0,message:s,skipI18n:!1===i,title:t,translateTitle:n}}parseButtons(e){const t=[];for(const s of e.buttons){const e={title:s.label,translate:s.translate,action:()=>e.ready=this.onButtonAction(s),noClose:s.noClose||!!s.link};t.push(e)}return t}runGameAction(e){this.dispatcher.emit("GAME_ACTION",e),this.actionMap.getAction(e)()}async onButtonAction(e){const{gameAction:t,serverCall:s,link:i,openLinkInNewTab:n=!0}=e;if(i)window.open(i,n?"_blank":"_self");else if(s)try{await this.playerActionRequest(s),this.runGameAction(t)}catch(e){}else this.runGameAction(t)}async playerActionRequest(e){const{params:t,regulatoryAction:s}=e,i={params:t,request:"player-action",action:s};this.dispatcher.emit("LOADING",!0);try{await this.server.executeRequest(i),this.dispatcher.emit("LOADING",!1)}catch(e){return this.popupManager.hideAll(),this.serverError(e),Promise.resolve()}}showErrorPopup(e){this.errorManager.showPopup(e)}}class L{constructor(e,t,s){this.body=e,this.options=t,this.requestPromise=s}}const N={HTTP:0,WEB_SOCKET:1};s.d(t,"a",(function(){return j}));let j=class{constructor(){this.isPaused=!1,this.mode=0,this.transportModes=N,this.responseMiddleware=new g,this.additionalInitParams={},this.additionalRequestParams={},this.cheat=null,this.isErrorPopupShown=!1,this.isFreeSpinsActive=!1,this.isInitResponse=!1,this.lastRequestBody={},this.requestId=0,this.setting={jpUpdateBalance:!0,jpGetBalance:!0},this.balanceModel=Object(h.d)(O.a),this.dispatcher=Object(h.d)(d.a),this.errorMiddleware=Object(h.d)(E.a),this.limitsModel=Object(h.d)(I.a),this.model=Object(h.d)(l.a),this.pauseQueue=new u(this.performGenericRequest),this.requestQueue=new A(this.executeRequest),this.serverActionsManager=new C(this),this.session=new P,this.addListeners()}getSession(){return this.session}get url(){return this.model.URL}get gameCode(){return this.model.gameCode}setSettings(e){this.setting=Object.assign(Object.assign({},this.setting),e)}async loadServerEmulatorAdapter(){}async loadHttpTransport(){const{TransportHttp:e}=await s.e(33).then(s.bind(null,232));this.transport=new e(this.model.URLWithParams),this.mode=0}async loadWebSocketTransport(){const{TransportWebSocket:e}=await Promise.all([s.e(37),s.e(34)]).then(s.bind(null,234));this.transport=new e(this.model.URLWithParams),this.mode=1}async initServer(e={}){this.mode=this.model.getInitialMode(),await this.initTransport(),this.isInitResponse=!0;const t=await this.performInitRequest(e);return this.isInitResponse=!1,this.dispatcher.emit("INIT_RESPONSE_RECEIVED",t),this.setState(t),t}async initTransport(){if(0===this.mode)return await this.loadHttpTransport();try{await this.loadWebSocketTransport(),await this.transport.init()}catch(e){this.mode=0,await this.loadHttpTransport()}}genericRequestSafe(e,t={}){return this.lastRequestBody={params:e,options:t},this.genericRequest(e,t)}genericRequestLast(){const{cheat:e,options:t,params:s}=this.lastRequestBody;return s?this.genericRequest(s,t):Promise.resolve()}genericRequest(e,t={}){return this.isPaused?this.pauseQueue.add(e,t):this.performGenericRequest(e,t)}performGenericRequest(e,t={}){return(t.allowParallelRequest?this.executeRequest(e,t):this.requestQueue.add(e,t)).catch(e=>this.errorMiddleware.check(e)).catch(e=>{if((({code:e,skipHandling:t},s)=>{var i;return"all"===t||(null===(i=s.ignoreErrorCodes)||void 0===i?void 0:i.includes(e))})(e,t))return Promise.reject(e);const s=this.handleError(e);return"function"==typeof s?s(e):Promise.reject(e)})}async executeRequest(e,t={}){const s=Object.assign(Object.assign({},this.getRequestBody(t)),e);try{const e=await this.fetch(s,t);return this.handleServerResponse(e,t.ignoreBalance),e}catch(e){return t.isCustomRequest&&this.requestId--,Promise.reject(e)}}balanceRequest(){return this.genericRequest({request:"balance"},{allowParallelRequest:!0,hasRequestId:!1})}async spinRequest(e,t){const s=this.performSpinRequest(e,t),{minSpinDuration:i}=this.limitsModel,{emulateMinSpinDuration:r}=this.model.options;return i&&!1!==r&&await Object(n.b)(i),s}bonusSelectionRequest(e){return this.spinRequest({bet:0,coin:0,lines:0,selectionID:e})}jackpotTickerRequest(){return this.performJackpotRequest("jp-ticker")}jackpotStartMiniGameRequest(){return this.performJackpotRequest("start-mini-game")}jackpotPlayMiniGameRequest(e){return this.performJackpotRequest("play-mini-game",e)}setupGameParameters({errorPopup:e}=Object(h.d)(r.a).game){e&&this.serverActionsManager.setupGameParams(e.forceOkButton,e.ignore)}setPredefinedCombination(e){}setAdditionalParams(e){this.additionalRequestParams=e||{}}setAdditionalInitParams(e){this.additionalInitParams=e||{}}handleServerResponse(e,t){const{balance:s,currencyReplacement:i}=e;i&&this.balanceModel.setCurrency(i),s&&!t&&this.balanceModel.updateBalance(s),this.dispatcher.emit("SERVER_RESPONSE",e)}checkFreeSpins({result:e}){}performInitRequest(e={}){return this.genericRequest(Object.assign(Object.assign(Object.assign({screenSize:Object(a.n)(),request:"init"},this.model.defaultInitParams),e),this.additionalInitParams),{hasGameSession:!1})}async performReInit(){this.pause();const e=await this.performGenericRequest(Object.assign(Object.assign({request:"reinit"},this.model.defaultInitParams),this.additionalInitParams),{hasGameSession:!0});this.requestId=e.lastRequestId+1;const{reInitAction:t}=this.model.options;return t&&await t(this.performGenericRequest),this.resume(),e}async createSocketConnection(e){return this.transport||await this.loadWebSocketTransport(),this.transport.init(e)}performSpinRequest(e,t={}){const s=Object.assign(Object.assign(Object.assign({request:"spin"},e),t),this.additionalRequestParams);return this.genericRequestSafe(s)}getRequestBody(e={}){const{hasGameSession:t=0===this.mode,hasRequestId:s=!0}=e;let i={gameId:this.model.gameCode,name:this.model.gameName};return t&&(i.gameSession=this.session.getSession()),s?(i.requestId=this.requestId++,i):i}injectCheat(e){}performJackpotRequest(e,t){if(this.isErrorPopupShown)return Promise.reject();const s="jp-ticker"===e,{jpUpdateBalance:i,jpGetBalance:n}=this.setting,r={allowParallelRequest:s,ignoreBalance:!i,hasRequestId:!s},o=Object.assign(Object.assign({},!n&&s&&{getBalance:!1}),{selectionID:t,request:e});return this.genericRequest(o,r)}setState(e){var t,s,i,n;const{jrsdSettings:r,result:o}=e;this.jpTickerRefreshPeriod=(null===(s=null===(t=o)||void 0===t?void 0:t.settings)||void 0===s?void 0:s.jpTickerRefreshPeriod)||(null===(i=r)||void 0===i?void 0:i.jpTickerRefreshPeriod),void 0!==(null===(n=r)||void 0===n?void 0:n.showClockOnMobile)&&this.dispatcher.emit("SET_CLOCK_VISIBILITY",r.showClockOnMobile)}async fetchResolve(e){this.model.saveDefaultResult(e),this.isInitResponse&&this.session.setSession(e.gameSession);const{extraData:t}=e;return t&&t.messageArray&&await this.serverActionsManager.parseExtraData(t),e}async fetch(e,t={}){try{const s=this.transport.serverRequest(e,t),i=new L(e,t,s);this.dispatcher.emit("SERVER_REQUEST",i);const n=await this.responseMiddleware.applyTo(s);return this.fetchResolve(n)}catch(t){if(t instanceof Error)throw t;const{request:s}=e;throw Object.assign(Object.assign({},t),{request:s})}}handleError(e){if(e){const{code:t=-1,message:s}=e;this.dispatcher.emit("SERVER_ERROR",t,s),e.isInitResponse=this.isInitResponse}return this.serverActionsManager.serverError(e)}addListeners(){this.dispatcher.on("ERROR_POPUP_SHOWN",this.onShowErrorPopup,this).once("SETUP_GAME_PARAMS",this.setupGameParameters,this)}pause(){this.isPaused=!0}resume(){this.pauseQueue.resolve(),this.isPaused=!1}onShowErrorPopup(e){this.isErrorPopupShown=e}getGameCode(){return this.gameCode}get gameParams(){return{id:this.gameCode,name:this.model.gameName,serverUrl:this.model.URLWithParams}}};Object(i.a)([m],j.prototype,"loadServerEmulatorAdapter",null),Object(i.a)([m],j.prototype,"loadHttpTransport",null),Object(i.a)([m],j.prototype,"loadWebSocketTransport",null),Object(i.a)([o.a],j.prototype,"performGenericRequest",null),Object(i.a)([o.a],j.prototype,"executeRequest",null),j=Object(i.a)([h.a],j)},82:function(e,t,s){"use strict";var i=s(3),n=s(0),r=s(7),o=s(15),a=s(8),h=s(86);const c=["getTurboMode","isAutoSpinsActive","isContinuousSpinsActive","getJackpotWin"];s.d(t,"a",(function(){return u}));let u=class{constructor(){this.afterPlayClicked=new r.a,this.hasError=!1,this.dispatcher=Object(n.d)(a.a),this.windowManager=Object(n.d)(o.a)}initWrapperAPI(e){this._wrapperAPI=e,this.windowManager.onMessage(this.handleExternalAPIMessage,this),this.dispatcher.once("SERVER_REQUEST",this.checkGameAPIAvailability,this).on("INFO",this.onInfoClicked,this)}disableAudio(){this.gameAPI&&this.gameAPI.disableAudio()}enableAudio(){this.gameAPI&&this.gameAPI.enableAudio()}pause(){this.gameAPI&&this.gameAPI.pause()}unpause(){this.gameAPI&&this.gameAPI.unpause()}async setBalance(e,t=!0){if(this.gameAPI){t&&await this.afterPlayClicked;try{this.gameAPI.setBalance(e)}catch(e){0}}}resetAutoSpins(){this.gameAPI&&this.gameAPI.resetAutoSpins()}get gameAPI(){return this._gameAPI!==window.GameAPI&&this.setGameAPIRef(),this._gameAPI,this._gameAPI}async checkGameAPIAvailability(){await Object(r.b)(100),this.isGameAPIAvailable||(this.isGameAPIAvailable=!1,this.dispatcher.emit(h.a.GAME_API_NOT_AVAILABLE))}checkReelsStopped(){const{gameAPI:e}=this;return e&&this.reelsStarted?new Promise(e=>this.gameAPI.addListenerOnce(h.a.REELS_STOPPED,e)):Promise.resolve()}setErrorState(e=!0){this.hasError=e}enableGameResultShown(){this.gameAPI&&this.gameAPI.addListener(h.a.ROUND_ENDED,this.onGameRoundEnded,this).addListener(h.a.ROUND_STARTED,this.onGameRoundStarted,this).addListener(h.a.JACKPOT_WIN_ANIMATION_STOPPED,this.sendGameResultShownEvent,this)}onGameRoundStarted(){this.shouldSendGameResultShownEvent&&(window.clearTimeout(this.waitWinAnimationTimeoutID),this.shouldSendGameResultShownEvent=!1,this.gameAPI.removeListener(h.a.WIN_ANIMATION_STOPPED,this.onGameWinAnimationStopped,this).removeListener(h.a.JACKPOT_WIN_ANIMATION_STARTED,this.onGameJackpotWinAnimationStarted,this),this.sendGameResultShownEvent())}onGameRoundEnded(){return this.gameAPI.getTotalWin()>0?(this.waitWinAnimationTimeoutID=window.setTimeout(()=>{this.gameAPI.removeListener(h.a.WIN_ANIMATION_STOPPED,this.onGameWinAnimationStopped,this).removeListener(h.a.JACKPOT_WIN_ANIMATION_STARTED,this.onGameJackpotWinAnimationStarted,this),this.onGameWinAnimationStopped()},6e4),this.shouldSendGameResultShownEvent=!0,void this.gameAPI.addListenerOnce(h.a.WIN_ANIMATION_STOPPED,this.onGameWinAnimationStopped,this).addListenerOnce(h.a.JACKPOT_WIN_ANIMATION_STARTED,this.onGameJackpotWinAnimationStarted,this)):this.gameAPI.getJackpotWin()>0?(this.waitWinAnimationTimeoutID=window.setTimeout(()=>{this.gameAPI.removeListener(h.a.JACKPOT_WIN_ANIMATION_STARTED,this.onGameJackpotWinAnimationStarted,this),this.onGameWinAnimationStopped()},6e4),this.shouldSendGameResultShownEvent=!0,void this.gameAPI.addListenerOnce(h.a.JACKPOT_WIN_ANIMATION_STARTED,this.onGameJackpotWinAnimationStarted,this)):(this.sendGameResultShownEvent(),void(this.hasError=!1))}onGameWinAnimationStopped(){window.clearTimeout(this.waitWinAnimationTimeoutID),this.shouldSendGameResultShownEvent=!1,this.sendGameResultShownEvent()}onGameJackpotWinAnimationStarted(){window.clearTimeout(this.waitWinAnimationTimeoutID)}sendGameResultShownEvent(){this.hasError||this.gameAPI.dispatchEvent(h.a.GAME_RESULT_SHOWN)}handleExternalAPIMessage(e){e===h.a.GAME_API_INITIALIZED&&(this.windowManager.offMessage(this.handleExternalAPIMessage,this),this.dispatcher.off("SERVER_REQUEST",this.checkGameAPIAvailability,this),this.setGameAPIRef(),this.isGameAPIAvailable=!0,this.dispatcher.emit(h.a.GAME_API_INITIALIZED),this.addListeners())}onInfoClicked(){this.gameAPI.showPaytable()}addListeners(){this.dispatcher.once(h.a.PLAY_CLICKED,()=>this.afterPlayClicked.resolve());const{gameAPI:e}=this;e.addListener(h.a.REELS_STARTED,()=>this.reelsStarted=!0).addListener(h.a.REELS_STOPPED,()=>this.reelsStarted=!1),h.b.forEach(t=>e.addListener(t,(...e)=>this.reEmitEvent(t,...e)))}reEmitEvent(e,...t){this.dispatcher.emit(e,...t)}setGameAPIRef(){this._gameAPI=window.GameAPI,this._gameAPI&&(this._gameAPI.wrapperAPI=this._wrapperAPI,this.proxySpecificMethods())}proxySpecificMethods(){const e=()=>{};for(const t of c)"function"!=typeof this.gameAPI[t]&&(this.gameAPI[t]=e)}};u=Object(i.a)([n.a],u)},86:function(e,t,s){"use strict";s.d(t,"a",(function(){return i})),s.d(t,"b",(function(){return n}));const i={GAME_API_INITIALIZED:"ExternalEvent.GAME_API_INITIALIZED",GAME_API_NOT_AVAILABLE:"ExternalEvent.GAME_API_NOT_AVAILABLE",GAME_LOADED:"ExternalEvent.GAME_LOADED",GAME_RESULT_SHOWN:"ExternalEvent.GAME_RESULT_SHOWN",ROUND_STARTED:"ExternalEvent.ROUND_STARTED",ROUND_ENDED:"ExternalEvent.ROUND_ENDED",PLAY_CLICKED:"ExternalEvent.PLAY_CLICKED",JACKPOT_WIN_ANIMATION_STARTED:"ExternalEvent.JACKPOT_WIN_ANIMATION_STARTED",JACKPOT_WIN_ANIMATION_STOPPED:"ExternalEvent.JACKPOT_WIN_ANIMATION_STOPPED",WIN_ANIMATION_STARTED:"ExternalEvent.WIN_ANIMATION_STARTED",WIN_ANIMATION_STOPPED:"ExternalEvent.WIN_ANIMATION_STOPPED",BET_CHANGED:"ExternalEvent.BET_CHANGED",TURBO_ON:"ExternalEvent.TURBO_ON",TURBO_OFF:"ExternalEvent.TURBO_OFF",REELS_STARTED:"ExternalEvent.REELS_STARTED",REELS_STOPPED:"ExternalEvent.REELS_STOPPED",AUTO_PLAY_STARTED:"ExternalEvent.AUTO_PLAY_STARTED",AUTO_PLAY_STOPPED:"ExternalEvent.AUTO_PLAY_STOPPED",STOP_BUTTON_CLICKED:"ExternalEvent.STOP_BUTTON_CLICKED",PAYTABLE_OPENED:"ExternalEvent.PAYTABLE_OPENED",PAYTABLE_CLOSED:"ExternalEvent.PAYTABLE_CLOSED"},n=[i.GAME_LOADED,i.PLAY_CLICKED,i.ROUND_STARTED,i.ROUND_ENDED]},88:function(e,t,s){"use strict";var i=s(3),n=s(0),r=s(83),o=s(14),a=s(115),h=s(13),c=s(106),u=s(84),l=s(8);s.d(t,"a",(function(){return d}));class d{constructor(e){this.options=e,this._visible=!1,this.events={},this.device=Object(n.d)(u.a),this.dispatcher=Object(n.d)(l.a)}render(){const e=document.createElement("div"),t=Object(n.d)(r.a),s=this.getTemplate();return e.innerHTML=s(Object.assign({t:t.i18n.bind(t)},this.options)),this.el=e.firstChild,this.addListeners(),this._visible=!0,this.el}hide(){this._visible=!1,Object(h.e)(this.el,!0)}show(){this._visible=!0,Object(h.e)(this.el,!1)}destroy(){this.el&&(this.removeListeners(),this.el.parentElement.removeChild(this.el),this.el=null)}set visible(e){this._visible!==e&&(e?this.show():this.hide())}get visible(){return this._visible}addListeners(){this.events=a.a.add(this.el,this.events,this)}removeListeners(){a.a.remove(this.el,this.events)}get element(){return this.el}updateOptions({visible:e,style:t,bounds:s}){void 0!==e&&(this.visible=e);const{el:i}=this;void 0!==t&&((e,t)=>{!1!==t&&Object.keys(t).length?Object.assign(e.style,t):e.removeAttribute("style")})(i,t),s&&Object(c.a)(i,s)}}Object(i.a)([o.a],d.prototype,"updateOptions",null)},89:function(e,t,s){"use strict";s.d(t,"a",(function(){return r}));var i=s(3),n=s(0);let r=class{get menuElement(){return this._menuElement||(this._menuElement=document.querySelector(".wrapper-menu")),this._menuElement}addWidget({root:e=this.menuElement,widget:t,insert:s,selector:i}){const n=i?e.querySelector(i):e;if(!n)return;const r=t.render();s?n.parentElement.insertBefore(r,n):n.appendChild(r)}};r=Object(i.a)([n.a],r)}}]);