(window.webpackJsonp1584113172148=window.webpackJsonp1584113172148||[]).push([[1],{101:function(e,t,i){"use strict";i.d(t,"c",(function(){return s})),i.d(t,"a",(function(){return o})),i.d(t,"b",(function(){return n})),i.d(t,"e",(function(){return r})),i.d(t,"f",(function(){return a})),i.d(t,"d",(function(){return c})),i.d(t,"g",(function(){return h}));const s={PHONE:"phone",TABLET:"tablet"},o={IPAD:"ipad",IPHONE:"iphone",IPOD:"ipod",ANDROID:"android"},n={IOS:"ios",ANDROID:"android",WINDOWS:"windows"},r={LOW:"ldpi",MEDIUM:"mdpi",HIGH:"hdpi",EXTRA_HIGH:"xhdpi"},a={click:"touchend",down:"touchstart",up:"touchend",move:"touchmove",outside:"touchendoutside"},c={click:"click",down:"mousedown",up:"mouseup",move:"mousemove",outside:"mouseupoutside",over:"mouseover",out:"mouseout"},h=[r.LOW,r.MEDIUM,r.HIGH,r.EXTRA_HIGH]},106:function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var s=i(3),o=i(0),n=i(9);let r=class extends n.EventEmitter{constructor(){super(...arguments),this.offsets=[],this.nextId=0}add(e){const t=this.nextId++;return this.offsets.push(Object.assign(Object.assign({},e),{id:t})),this.emit("UPDATED"),t}get offsetsSum(){const e={top:0,bottom:0};for(const{top:t,bottom:i}of this.offsets)e.top+=t&&t()||0,e.bottom+=i&&i()||0;return e}remove(e){this.offsets=this.offsets.filter(t=>t.id!==e),this.emit("UPDATED",this.offsetsSum)}getOffsetsSumBefore(e){const t={top:0,bottom:0};for(const{top:i,bottom:s,id:o}of this.offsets)o<e&&(t.top+=i&&i()||0,t.bottom+=s&&s()||0);return t}};r=Object(s.a)([o.a],r)},111:function(e,t,i){"use strict";i.d(t,"a",(function(){return c}));var s=i(3),o=i(101),n=i(5),r=i(0),a=i(6);let c=class{constructor(){this.forceDpi="",this.matches={},this.settings={},this.ua={},this.userAgent=navigator.userAgent.toLowerCase(),this.config=i(136),this.configs=Object(r.d)(n.a),this.initialize()}initialize(){this.config=l(this.config);const e=l(this.configs.device);this.mergeData(e),this.parseUserAgent();for(const e of Object.keys(this.config))if("userAgent"!==e){const t=this.config[e];this.settings[e]=this.matchSettings(t),this.matches[e]=this.matchBlackList(t)}for(const e of o.g)if(this.matches[e]){this.forceDpi=e;break}window.addEventListener("keydown",e=>{[32].indexOf(e.keyCode)>-1&&e.preventDefault()},!1),window.focus(),window.addEventListener("click",()=>{var e;(null===(e=document.activeElement)||void 0===e?void 0:e.classList.contains("textbox"))||window.focus()})}isDevicePropertyMatched(e){return!!this.matches[e]}getViewportSize(){const e={resizeTimeout:0,useWindowSize:!1,alternateCheckFullscreen:!1,statusBarHeight:{portrait:0,landscape:0},margin:[],portraitKeyboardRatio:1.2},t=this.settings.viewportSettings;if(!t)return e;const i=Object.assign(Object.assign({},e),t);if(!("margin"in t))return i;i.margin=[];for(const e of Object(a.d)(t.margin)){const{landscape:t,fullscreen:s,mobileType:o=null,height:n=null,top:r=0}=e;let{bottom:a=0}=e;43===a&&(a=0),i.margin.push({landscape:t,fullscreen:s,mobileType:o,height:n,offset:{top:r,bottom:a}})}return i}mergeData(e){for(const t of Object.keys(e))this.config[t]=Object.assign({},this.config[t],e[t])}matchBlackList(e={}){for(const t of Object.keys(e))if(e[t]&&(this.ua[t]||h(t,this.ua)))return!0;return!1}matchSettings(e={}){let t={};for(const i of Object.keys(e))(this.ua[i]||h(i,this.ua))&&(t="boolean"==typeof e[i]?e[i]:d(t,e[i]));return t.constructor===Object&&0===Object.keys(t).length?null:t}getSignatures(e){const t=this.config.userAgent[e];if(!t)throw new Error(`The "${e}" has not described`);return Object(a.d)(t)}checkValue(e){const t=/^(\d+)x(\d+)$/.exec(e);if(t){const e=Math.max(screen.height,screen.width),i=Math.min(screen.height,screen.width),s=Math.max(+t[1],+t[2]),o=Math.min(+t[1],+t[2]);return s===e&&o===i}return new RegExp(e,"i").test(this.userAgent)}parseUserAgent(){for(const e of Object.keys(this.config.userAgent)){this.ua[e]=!1;const t=this.config.userAgent[e];if(t instanceof Object&&!Object(a.h)(t)){for(const i of Object.keys(t))if((this.ua[i]||this.checkValue(i))&&this.checkValue(t[i])){this.ua[e]=!0;break}}else for(const t of this.getSignatures(e))if(this.checkValue(t)){this.ua[e]=!0;break}}this.ua.desktop=!0}};function h(e,t){if(!e.match(/\|{2}|&{2}|:|!/g))return!1;const i=e.split(/\|{2}|&{2}/).map(e=>{const i=/(!)(.+)/.exec(e),s=(i?i[2]:e).split(":").reduce((e,i)=>e&&t[i.trim()],!0);return i?!s:s}),s=e.match(/\|{2}|&{2}/g);if(!s)return i[0];return s.reduce((e,t,s)=>{const o=i[s+1];return"&&"===t?e&&o:e||o},i[0])}function d(e,t){const i=Object.assign({},e);for(const s of Object.keys(t)){const o=e[s],n=t[s];if(void 0===o||"boolean"==typeof n||"number"==typeof n)i[s]=n;else{const e=Object(a.d)(o),t=Object(a.d)(n),r="clear"===t[0];i[s]=r?t.slice(1):e.concat(t)}}return i}function u(e){if(!e)return null;const t={};for(const i of Object.keys(e))t[i.toLowerCase()]=e[i];return t}function l(e){const t={};for(const i of Object.keys(e))Object(a.h)(e[i])&&(e[i]=g(e[i])),t[i]=u(e[i]);return t}function g(e){const t={};for(const i of e)t[i]=!0;return t}c=Object(s.a)([r.a],c)},122:function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));const s=(e,t=100)=>{let i;const s=(...s)=>{i&&clearTimeout(i),i=setTimeout(()=>{e.call(null,...s),i=null},t)};return s.cancel=()=>clearTimeout(i),s}},123:function(e,t,i){"use strict";i.d(t,"a",(function(){return n})),i.d(t,"c",(function(){return r})),i.d(t,"b",(function(){return a}));var s=i(1),o=i(101);const n=()=>{const e=Object(s.c)("dpi");return o.g.includes(e)?e:""},r=(e,t)=>t.width&&t.height&&!(t.width===e.width&&t.height===e.height),a=()=>({width:0,height:0,isLandscape:innerWidth>innerHeight,marginSettings:{top:0,bottom:0},dynamicOffsets:{top:0,bottom:0}})},136:function(e){e.exports=JSON.parse('{"userAgent":{"ipad":"ipad","ipod":"ipod","iphone":"iphone","ios":"ip(ad|hone|od)","android":"android","macos":"mac os","linux":"linux","windows":"windows|win\\\\d\\\\d|win 9x","unix":"unix","uc":"ucbrowser|ubrowser","qq":"qqbrowser","edge":"edge","chrome":"chrome","safariIos":"iP(ad|hone|od).+Version\\\\/[\\\\d\\\\.]+.*Safari","qqIos":"ip[hone|ad|od].*mq(q|b)","qqOsx":"mac os.*qqbrowser","chromeIos":"crios","iPhone414x896":{"iphone":"414x896"},"iPhone375x812":{"iphone":"375x812"},"iPhone414x736":{"iphone":"414x736"},"iPhone375x667":{"iphone":"375x667"},"firefox":"firefox|fxios","firefoxDesktop":"(windows|Macintosh).*firefox","webkit":"applewebkit","qqIphone":"(?=.*qqbrowser)(?=.*iPhone)","UCBrowserOnIOS":"(?=.*UCBrowser)(?=.*iPhone)","miuiBrowser":"miuibrowser","ie11":"trident/7.*rv:11","miuiBrowser android 4":"(?=.*miuibrowser)(?=.*Android 4.\\\\d)","Xiaomi mi 4C":["mi 4lte","mi-4c"],"Xiaomi mi 4C except uc":"android.+?mi 4lte.+?chrome","Xiaomi mi 4C uc":"android.+?mi 4lte.+?ucbrowser","Xiaomi mi 4C baidu":"android.+?mi 4lte.+?bdbrowser","Xiaomi HM Note 1s":"hm note 1s","Xiaomi HM Note 1w":"hm note 1w","Xiaomi HM Note 1 chrome":"hm note 1.*safari/[\\\\d.]+$","Xiaomi Mi3W":"MI 3W","Xiaomi Mi3W chrome|360|QQ":"MI 3W.*safari/[0-9.]+$","Xiaomi Redmi Note 4":"Redmi Note 4","Xiaomi Redmi 4X":"Redmi 4X","All Xiaomi native browsers":["xiaomi","miuibrowser"],"Samsung Galaxy Note II":["n7100","n7105","n7110"],"OPPO A37F":["a37f","a37m"],"OPPO A39":"CPH1605","Samsung A7":"sm-a700h","Samsung S8":"sm-g950f","LE 2X620":"le x620","Samsung360x740":["360x740","360x692"],"SamsungBrowser":"samsungbrowser","QQ Android":"android.+?qqbrowser","vivo Native":"vivobrowser","vivo unstable":"\\\\bvivo\\\\b.*\\\\bchrome/3","All Vivo":["vivo","vivobrowser"],"vivo X7":"vivo X7","IE win8":"(?=.*Windows NT 6.(2|3)).*Trident.*(?=.*(rv:\\\\d+.\\\\d)|(MSIE \\\\d+.\\\\d))","android 7-8 browsers with no bottom panel in landscape":"android.+?(qqbrowser)|(UCBrowser)"},"canvas":{"UCBrowserOnIOS":true,"All Vivo":true,"LE 2X620":true,"OPPO A37F":true,"Samsung A7":true,"Xiaomi mi 4C":true,"qqIphone":true,"Xiaomi Mi3W":true,"IE win8":true,"ie11":true,"miuiBrowser android 4":true},"ldpi":{"OPPO A37F":true,"Samsung A7":true,"vivo X7":true},"mdpi":{"IE win8":true},"hdpi":{"Samsung360x740":true,"Xiaomi Redmi Note 4":true,"Xiaomi Redmi 4X":true},"xhdpi":{"ipad":true,"iphone":true},"simplifiedAnimation":{},"viewportSettings":{"chrome && android":{"resizeTimeout":200},"safariIos":{"resizeTimeout":50},"OPPO A39 || OPPO A37F || LE 2X620 || miuiBrowser":{"resizeTimeout":250},"qqIos":{"resizeTimeout":250},"Samsung360x740":{"margin":{"fullscreen":true,"height":[360,740],"bottom":20}},"Samsung360x740 && SamsungBrowser":{"margin":[{"height":[336,716],"bottom":105}],"portraitKeyboardRatio":1.29},"Samsung360x740 && android 7-8 browsers with no bottom panel in landscape":{"margin":{"fullscreen":false,"landscape":true,"bottom":20}},"Samsung360x740 && qq":{"margin":["clear",{"height":[304],"bottom":20}]},"Samsung360x740 && uc":{"margin":["clear",{"height":[286],"bottom":20}]},"chromeIos":{"resizeTimeout":150,"statusBarHeight":{"portrait":20,"landscape":20}},"iPad || macos && mobile":{"statusBarHeight":40},"iPhone414x896":{"statusBarHeight":{"portrait":64,"landscape":20},"margin":[{"fullscreen":true,"bottom":30},{"landscape":true,"bottom":30}]},"iPhone375x812":{"statusBarHeight":{"portrait":64,"landscape":20},"margin":[{"fullscreen":true,"bottom":25},{"landscape":true,"bottom":25}]},"iPhone375x812:chromeios":{"margin":{"height":[748],"bottom":25}},"iPhone375x812:qq":{"margin":["clear",{"landscape":true,"bottom":25}]},"iPhone414x736 || iPhone375x667":{"statusBarHeight":{"portrait":40,"landscape":20}}},"disableScrolling":{"QQ Android":true,"vivo Native":true},"disableFullScreen":{"uc":true,"qqIos":true,"qq":true,"vivo Native":true,"vivo unstable":true,"Samsung S8 && SamsungBrowser":true},"disablePointerEvents":{"ios":true,"macos && mobile":true,"qqOsx":true,"UCBrowserOnIOS":true}}')},137:function(e,t,i){"use strict";i.r(t),i.d(t,"KeyboardEventManager",(function(){return a}));var s=i(3),o=i(0),n=i(8);let r=!1,a=class{constructor(){this.dispatcher=Object(o.d)(n.a)}initialize(){this.patchWindowKeydownEvent(),this.dispatcher.on("SET_KEYDOWN_DISABLED",e=>r=e),this.disableDocumentKeypressEvents()}patchWindowKeydownEvent(){const e=window.addEventListener;window.addEventListener=(t,i,s)=>{let o;"keydown"===t&&(o=function(e){if(r)return e.preventDefault(),void e.stopPropagation();i.call(this,e)}),e.call(window,t,o||i,s)}}disableDocumentKeypressEvents(){const e=document.addEventListener;document.addEventListener=function(t,...i){"keypress"!==t&&e.call(this,t,...i)}}};a=Object(s.a)([o.a],a)},138:function(e,t,i){"use strict";i.r(t),i.d(t,"DisplaySettings",(function(){return n}));var s=i(0),o=i(5);class n{constructor(){this.data={density:{ldpi:.5,mdpi:.6,hdpi:.75,xhdpi:1},benchMark:{ldpi:30,mdpi:50,hdpi:80,xhdpi:100},safeArea:{width:1180,height:680},padding:{top:0,right:0,bottom:90,left:0},densityKey:"xhdpi"};const{displaySettings:e}=Object(s.d)(o.a).game;this.data=Object.assign(Object.assign({},this.data),e)}calc(e,t,i){const{top:s,right:o,bottom:n,left:r}=this.data.padding,{width:a,height:c}=this.data.safeArea,{density:h,benchMark:d}=this.data,u=Math.min((t-r-o)/a,(e-s-n)/c),l=Object.keys(h).map(e=>({key:e,value:h[e]})),g=Object.keys(d).map(e=>({key:e,value:d[e]}));l.sort((e,t)=>e.value-t.value),g.sort((e,t)=>e.value-t.value);let m=l.length-1;for(let e=0;e<l.length;e++){if(l[e].value>=u){m=e;break}}let p=g.length-1;for(let e=0;e<g.length;e++){const t=g[e];if(!i||t.value>=i){p=e;break}}return this.data.densityKey=0===p?l[p].key:l[Math.floor((m+p)/2)].key,this.data}}},139:function(e,t,i){"use strict";i.r(t),i.d(t,"benchMark",(function(){return n}));var s=i(0),o=i(5);async function n(){try{return await(Worker&&window.performance?new Promise((e,t)=>{const{path:i}=Object(s.d)(o.a),n=new Worker(`${i}bench-worker.js`);setTimeout(()=>e(1),3500),n.onmessage=i=>{const{command:s}=i.data;if("result"===s){const t=1e5/(performance.now()-r);n.terminate(),e(t)}"error"===s&&(n.terminate(),t(new Error("An error occurred during benchmark")))};const r=performance.now();n.postMessage({command:"start"})}):Promise.reject(new Error("Browser doesn't support features needed for benchmark")))}catch(e){return-1}}},84:function(e,t,i){"use strict";var s=i(3),o=i(6),n=i(111),r=i(96),a=i(123),c=i(0),h=i(10),d=i(51),u=i(101);let l=class{constructor(){this.deviceConfig=Object(c.d)(n.a);const{userAgent:e}=navigator;this.userAgent=e.toLowerCase(),this.browserData=Object(d.getParser)(e)}getBrowser(){if(!this.browser){let{name:e,version:t}=this.browserData.getBrowser();this.userAgent.indexOf("qq")>-1&&(e="QQ"),t=t||"-1",this.browser={name:e,version:t}}return this.browser}getOS(){return this.browserData.getOS()}checkBrowser(e){const{ua:t}=this.deviceConfig,i=window.chrome,s=e===u.b.ANDROID,o=s&&i&&!i.webstore&&!t.edge&&t.chrome,n=s&&!o&&!t.uc&&!t.qq&&!t.edge&&t.webkit,r={isUC:t.uc,isQQ:t.qq,isQQIos:t.qqios,isIE:t.ie11,isEdge:t.edge,isChromeIOS:t.chromeios,isSafariIOS:t.safariios,isChromeAndroid:o,isStockAndroid:n,isVivo:t["all vivo"],isVivoNative:t["vivo native"],isFirefox:t.firefox,isStandalone:!!navigator.standalone,list:[]};for(const e of Object.keys(r))if("list"!==e&&r[e]){const t=e.slice(2).toLowerCase();r.list.push(t),document.body.classList.add(t)}return r}};l=Object(s.a)([c.a],l);var g=i(12);const m=e=>{function t(t){const i=new e(t);return i.shaderFrag=i.shaderFrag.replace("highp","mediump"),i}return t.prototype=e.prototype,t},p=e=>{var t,i;const s=e.PIXI;if(!s||(e=>{try{const t=e.glCore.createContext(window.document.createElement("canvas"));return!!t.getShaderPrecisionFormat&&0!==t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT).precision}catch(e){return!1}})(s))return;const{settings:o}=s,n=null===(i=null===(t=s)||void 0===t?void 0:t.WebGLRenderer)||void 0===i?void 0:i.__plugins;if(void 0!==o&&(o.PRECISION_FRAGMENT="mediump"),!n)return;const{sprite_bilinear:r,sprite_strange:a}=n;r&&(n.sprite_bilinear=m(r)),a&&(n.sprite_strange=m(a))};var f=i(87),b=i(8);function w(e,t){const i=["CLICK_SCREEN","onCanvasClick"],s=HTMLCanvasElement.prototype.addEventListener;HTMLCanvasElement.prototype.addEventListener=function(o,n,r){if(((e,s)=>{if(e!==t)return!0;const o=s.toString();for(const e of i)if(o.indexOf(e)>-1)return!1;return!0})(o,n))return void s.call(this,o,n,r);s.call(this,o,(function(t){const{top:i,left:s}=e.getBoundingClientRect(),{clientX:o,clientY:r}=t,a={clientX:o-s,clientY:r-i};a.stopPropagation=t.stopPropagation.bind(t),a.preventDefault=t.preventDefault.bind(t),n.call(this,a)}),r)}}var v=i(1);i.d(t,"a",(function(){return S}));const O=i(50);let S=class{constructor(){this.androidVersion=0,this.benchMarkScore=-1,this.isIOS=!1,this.isTouch=!1,this.gameWrapper=Object(h.a)(".game-wrapper"),this.getParams=v.b,this.event=this.isTouch?u.f:u.d,this.isChromeEmulator=!1,this.isES6Support=!0,this.isIframe=Object(o.b)(),this.isLocalStorageAvailable=Object(c.d)(f.a).isAvailable,this.browserDetector=Object(c.d)(l),this.deviceConfig=Object(c.d)(n.a),this.dispatcher=Object(c.d)(b.a),this.storage=Object(c.d)(f.a).gameStorage,this.wrapperModel=Object(c.d)(g.a),this.userAgent=this.deviceConfig.userAgent,this.initialize()}initialize(){this.detectDevice(),this.isWebGLSupport=!Object(v.d)("canvas")&&!this.deviceConfig.matches.canvas||!!Object(v.d)("webgl"),this.isSimplifiedAnimation=!!this.deviceConfig.matches.simplifiedAnimation||!!Object(v.d)("simplifiedAnimation"),this.deviceOS===u.b.ANDROID&&(this.androidVersion=+this.getBrowser().version),this.browser=this.browserDetector.checkBrowser(this.deviceOS),this.viewportSettings=this.deviceConfig.getViewportSize(),this.calcViewportSize(),this.addBodyCssClasses(),this.addListeners(),w(this.gameWrapper,this.event.click);{const{KeyboardEventManager:e}=i(137);Object(c.d)(e).initialize()}}calcViewportSize(e=screen.availWidth,t=screen.availHeight){const{devicePixelRatio:i}=window;this.deviceLongSide=Math.max(e,t)*i,this.deviceShortSide=Math.min(e,t)*i,this.aspectRatio=this.deviceLongSide/this.deviceShortSide,this.mobileType=this.aspectRatio<=1.6?u.c.TABLET:u.c.PHONE}addBodyCssClasses(){this.deviceOS&&document.body.classList.add(this.deviceOS)}addListeners(){window.addEventListener("contextmenu",e=>e.preventDefault()),this.deviceConfig.matches.disablePointerEvents&&(window.PointerEvent=null),this.dispatcher.once("SETUP_GAME_PARAMS",this.setupDisplaySettings,this)}addIOSListeners(){}detectDevice(){const{ua:e}=this.deviceConfig;this.deviceOS=e.windows?u.b.WINDOWS:""}getBrowser(){return this.browserDetector.getBrowser()}getOS(){return this.browserDetector.getOS()}setupDisplaySettings(){const e=Object(a.a)();e?this.screenDensity=e:this.isSlowConnection?this.screenDensity=u.e.MEDIUM:this.screenDensity=this.deviceConfig.forceDpi||u.e.EXTRA_HIGH}calcMobileDensity(){}async benchMark(){return-1}isAllowFullScreen(){if(!this.wrapperModel.isAllowFullscreen||this.browser.isStandalone)return!1;const{disableFullScreen:e}=this.deviceConfig.matches;return!e&&O.isEnabled}saveDensitySettings(){this.isLocalStorageAvailable&&!Object(a.a)()&&u.g.indexOf(this.screenDensity)>u.g.indexOf(this.storage.getItem("dpi"))&&this.storage.setItem("dpi",this.screenDensity)}get isSlowConnection(){return this.networkSpeed<450}getMarginSettings(){return Object(c.d)(r.a).marginSettings}getScreenResolution(){return Object(c.d)(r.a).resolution}get isLandscape(){return Object(c.d)(r.a).isLandscape}preLaunchGameHooks(){p(window)}};S=Object(s.a)([c.a],S)},87:function(e,t,i){"use strict";var s=i(3);class o{constructor(e,t=!0){this.prefix=e,this.isAvailable=t}getItem(e){return this.isAvailable?localStorage.getItem(this.addPrefix(e)):null}setItem(e,t){this.isAvailable&&localStorage.setItem(this.addPrefix(e),t)}removeItem(e){this.isAvailable&&localStorage.removeItem(this.addPrefix(e))}addPrefix(e){return`${this.prefix}_${e}`}}var n=i(5),r=i(0),a=i(12);i.d(t,"a",(function(){return c}));let c=class{constructor(){if(this.isAvailable=(()=>{try{const e="__t__";return localStorage.setItem(e,e),localStorage.removeItem(e),!0}catch(e){return!1}})(),this.configs=Object(r.d)(n.a),this.wrapperModel=Object(r.d)(a.a),this.wrapperStorage=new o("sww",this.isAvailable),!this.isAvailable)return this.gameStorage=this.wrapperStorage,this.playerStorage=this.wrapperStorage,void(this.gamePlayerStorage=this.wrapperStorage);this.initialize()}initialize(){const{token:e}=this.wrapperModel,{playerCode:t}=e,i=e.gameCode||this.configs.game.ID;this.gameStorage=new o(i),this.playerStorage=new o(t),this.gamePlayerStorage=new o(`${i}_${t}`)}};c=Object(s.a)([r.a],c)},96:function(e,t,i){"use strict";i.d(t,"a",(function(){return u}));var s=i(3),o=i(14),n=(i(122),i(111)),r=i(0),a=i(84),c=i(8),h=i(123),d=i(106);i(50);let u=class{constructor(){this.device=Object(r.d)(a.a),this.deviceConfig=Object(r.d)(n.a),this.dispatcher=Object(r.d)(c.a),this.offsets=Object(r.d)(d.a),this.nativeResizeTarget=this.getNativeResizeTarget(),this.viewportSettings=this.deviceConfig.getViewportSize(),this.beforeRotateActions=[],this._resolution=Object(h.b)()}get resolution(){return this._resolution}get marginSettings(){return this._resolution.marginSettings}get isLandscape(){return this._resolution.isLandscape}async initialize(){this.nativeResizeTarget.addEventListener("resize",this.onResize,!0),this.dispatcher.on("INITIATE_RESIZE",this.onResize),this.offsets.on("UPDATED",this.onResize),this.onResize()}initBeforeRotateActions(){}onVisibilityChange(e){}onResize(){this.doResize()}doResize(){const e=this.getResizeOptions();if(!Object(h.c)(this.resolution,e))return;this._resolution=e;const{width:t,height:i,dynamicOffsets:s,marginSettings:o,isLandscape:n,rotate:r}=e;this.dispatcher.emit("RESIZE",e),Object.assign(this.device.gameWrapper.style,{top:`${o.top+s.top}px`,width:`${t}px`,height:`${i}px`})}getWidth(){return Math.max(document.documentElement.clientWidth,window.innerWidth)}getHeight(){return this.viewportSettings.useWindowSize?window.screen.height:this.device.browser.isChromeAndroid?document.documentElement.clientHeight:window.innerHeight}getMarginSettings(e,t){let i={top:0,bottom:0};const s=this.isFullScreen(t);for(const o of this.viewportSettings.margin)if(!(void 0!==o.fullscreen&&o.fullscreen!==s||void 0!==o.landscape&&o.landscape!==t||o.mobileType&&o.mobileType!==this.device.mobileType||o.height&&-1===o.height.indexOf(e))){i=o.offset;break}return i}isFullScreen(e){const{width:t,height:i}=window.screen;let s=t,o=i;this.device.isIOS&&e&&(s=i,o=t);const{landscape:n,portrait:r}=this.viewportSettings.statusBarHeight;return o-=e?n:r,innerWidth===s&&innerHeight>=o}getNativeResizeTarget(){var e;const t=window.visualViewport;return this.device.isIOS&&(null===(e=t)||void 0===e?void 0:e.addEventListener)?t:window}get ignoreMarginSettings(){return!!this.externalResizeData}getResizeData(){return{width:this.getWidth(),height:this.getHeight()}}getResizeOptions(){const{width:e,height:t}=this.externalResizeData||this.getResizeData(),i=e>t&&e/t>this.viewportSettings.portraitKeyboardRatio,s=this.offsets.offsetsSum,o=this.ignoreMarginSettings?{top:0,bottom:0}:this.getMarginSettings(t,i);return{width:e,height:t-o.top-o.bottom-s.top-s.bottom,isLandscape:i,dynamicOffsets:s,marginSettings:o,rotate:!1}}changeResizeEvent(e){this.nativeResizeTarget.removeEventListener("resize",this.onResize,!0),this.dispatcher.on(e,this.onExternalResize)}onExternalResize({width:e,height:t}){this.externalResizeData={width:e,height:t},this.onResize()}get orientation(){return this.isLandscape?"landscape":"portrait"}async getResizeTimeout(){}};Object(s.a)([o.a],u.prototype,"onVisibilityChange",null),Object(s.a)([o.a],u.prototype,"onResize",null),Object(s.a)([o.a],u.prototype,"doResize",null),Object(s.a)([o.a],u.prototype,"onExternalResize",null),u=Object(s.a)([r.a],u)}}]);