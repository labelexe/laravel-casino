/**
 * class for handling the control of a gamomat slotmachine
 * @copyright LoCoNET GmbH 2013-2014
 */function SlotmachineController(params){function fullScreenHandler(){function c(){obj_devConf.addScrollBottomMargin()&&f.append('<div id="androidAutoEnableHelper" style="height:80px;"></div>');var e=function(){l||(n?n():f[0][s](),obj_devConf.addScrollBottomMargin()&&$("#androidAutoEnableHelper").remove())},t=0;$(document).on({touchstart:function(e){var n=e.originalEvent.touches[0]||e.originalEvent.changedTouches[0];t=n.pageY},touchmove:function(n){var r=n.originalEvent.touches[0]||n.originalEvent.changedTouches[0];t-r.pageY>50&&e()},click:e})}var e=!1,t=null,n=null,r=null,i="fullscreenEnabled",s="requestFullscreen",o="exitFullscreen",u="fullscreenElement",a="fullscreenchange",f=null,l=!1;(function(){var h={webkit:["webkitFullscreenEnabled","webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitfullscreenchange"],moz:["mozFullScreenEnabled","mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozfullscreenchange"],ms:["msFullscreenEnabled","msRequestFullscreen","msExitFullscreen","msFullscreenElement","MSFullscreenChange"]};startFullScreen&&stopFullScreen&&enabledFullScreen&&(n=startFullScreen,r=stopFullScreen,t=enabledFullScreen);var p=obj_devConf.autoEnableFullscreen(),d=obj_devConf.useBodyForFullscreen();f=d||p?$("body"):$(".container");if(document[i])e=!0;else for(var v in h){var m=h[v][0];if(document[m]){e=!0,i=m,s=h[v][1],o=h[v][2],u=h[v][3],a=h[v][4];break}}(!e||p)&&$(".controlButton_fullscreen").remove(),e&&($(document).on(a,function(){l=document[u],obj_loader.enforceImmidiateResizing(Date.now()+500)}),p&&c()),__autoResizerHasFullscreen=function(){return document[u]}})(),this.toggle=function(){if(!e)return;return(!t||!t())&&!document[u]?n?n():f[0][s]():r?r():document[o](),!1}}function startWaiting(){waitRotator&&stopWaiting();if(!transform)return;$(".waitingForServer").css(transform,"rotate(0deg)").show();var e=function(){var t=$(".waitingForServer");waitRotator=$({deg:0}),waitRotator.animate({deg:360},{duration:1e3,step:function(e){var n={};n[transform]="rotate("+e+"deg)",t.css(n)},easing:"linear",done:e})};e()}function stopWaiting(){if(!waitRotator)return;waitRotator.stop(),waitRotator=null,$(".waitingForServer").hide()}function initEventListeners(){$(".linemarkerClickarea").unbind("click").click(function(){if(!$(this).hasClass("active")||$(this).hasClass("deactivated")||actFreeRound)return!1;var e=minLines,t=$(this).attr("class").split(" ");for(var n in t){if(t[n].substr(0,5)!="lines")continue;var r=t[n].substr(5);for(var i in possLines){e=possLines[i];if(possLines[i]>=r)break}}return e>actMaxLines?!1:(winAnimIsRunning?(winAnimAbortedForNextAction=!0,abortWinAnim(!0)):abortWinLines(),obj_sound.getActiveSound("fg1")==="gambleTeaser"&&obj_sound.stop("fg1"),e==actMaxLines?obj_sound.playGeneric("maxReached"):obj_sound.playGeneric("buttonClick"),obj_console.block(),unblockConsoleOnServerResponse.lines=!0,requestSender("setLines",{lines:e}),!1)}),$("#cheatFreeRounds").change(function(){var e=parseInt($("#cheatFreeRounds").val());e&&requestSender("cheatFreeRounds",{rounds:e})})}function setConsoleEventListeners(){var winAnimAbortHandler=function(e){typeof e=="undefined"&&(e=!0),winAnimIsRunning?(winAnimAbortedForNextAction=!0,abortWinAnim(e)):abortWinLines()};obj_console.addEventListener("onLinesplus",function(e){if(actFreeRound)return;typeof e=="undefined"&&(e=!1),winAnimAbortHandler(!startJackpot),obj_sound.getActiveSound("fg1")==="gambleTeaser"&&obj_sound.stop("fg1");if(startJackpot)return;var t=!hasBetChangeLoops&&actLines===actMaxLines&&!e;obj_console.block(),unblockConsoleOnServerResponse.lines=!0,requestSender("applyUserRequest",{request:!actMaxLinebet&&!actMaxLines?"maxbet":"linesplus",coins:obj_balanceManager.getFull(),infoActive:infoVisible,noChangeAllowed:t})}),obj_console.addEventListener("onLinesminus",function(e){if(actFreeRound)return;typeof e=="undefined"&&(e=!1),winAnimAbortHandler(!startJackpot),obj_sound.getActiveSound("fg1")==="gambleTeaser"&&obj_sound.stop("fg1");if(startJackpot)return;var t=!hasBetChangeLoops&&actLines===minLines&&!e;obj_console.block(),unblockConsoleOnServerResponse.lines=!0,requestSender("applyUserRequest",{request:!actMaxLinebet&&!actMaxLines?"maxbet":"linesminus",coins:obj_balanceManager.getFull(),infoActive:infoVisible,noChangeAllowed:t})}),obj_console.addEventListener("onLinebetplus",function(e){if(actFreeRound)return;typeof e=="undefined"&&(e=!1),winAnimAbortHandler(!startJackpot),obj_sound.getActiveSound("fg1")==="gambleTeaser"&&obj_sound.stop("fg1");if(startJackpot)return;var t=!hasBetChangeLoops&&actLinebet==actMaxLinebet&&!e;obj_console.block(),unblockConsoleOnServerResponse.linebet=!0,requestSender("applyUserRequest",{request:!actMaxLinebet&&!actMaxLines?"maxbet":"linebetplus",coins:obj_balanceManager.getFull(),infoActive:infoVisible,noChangeAllowed:t})}),obj_console.addEventListener("onLinebetminus",function(e){if(actFreeRound)return;typeof e=="undefined"&&(e=!1),winAnimAbortHandler(!startJackpot),obj_sound.getActiveSound("fg1")==="gambleTeaser"&&obj_sound.stop("fg1");if(startJackpot)return;var t=!hasBetChangeLoops&&actLinebet==minLinebet&&!e;obj_console.block(),unblockConsoleOnServerResponse.linebet=!0,requestSender("applyUserRequest",{request:!actMaxLinebet&&!actMaxLines?"maxbet":"linebetminus",coins:obj_balanceManager.getFull(),infoActive:infoVisible,noChangeAllowed:t})}),obj_console.addEventListener("onMaxbet",function(){if(actFreeRound)return;winAnimAbortHandler(),obj_console.block(),unblockConsoleOnServerResponse.lines=!0,unblockConsoleOnServerResponse.linebet=!0,requestSender("applyUserRequest",{request:"maxbet",coins:obj_balanceManager.getFull(),infoActive:infoVisible})}),obj_console.addEventListener("onSpin",function(){if(infoVisible||settingsVisible)return requestHideInfo(),!1;obj_sound.getActiveBGSound()===introVoiceSound&&obj_sound.stopBgSound();if(isMaxiplayInfoVisible)return closeMaxiplayInfo(),!1;if(isJackpotInfoVisible)return closeJackpotBetInfo(),!1;if(typeof callback_afterJackpotPlayoutIntroSign=="function")return obj_console.deactivateButtons({spin:!0}),obj_console.block(),stopFeatureCountdown(),callback_afterJackpotPlayoutIntroSign(),callback_afterJackpotPlayoutIntroSign=null,!1;if(canJackpotAnimBeAborted)return obj_console.deactivateButtons({spin:!0}),obj_console.block(),canJackpotAnimBeAborted=!1,obj_jackpot.abortAnim(),!1;if(useFakeReels&&canSpinBeRequestedBeforeGambleOffer)return canSpinBeRequestedBeforeGambleOffer=!1,wasSpinRequestedBeforeGambleOffer=!0,startInfiniteSpins(),!1;featureCountdown&&stopFeatureCountdown(),actSlotmachineMode=="winRepeater-intro"?typeof callback_afterWinRepeaterIntroPause=="function"&&(obj_console.block(),obj_console.showUserInfo({type:"none"}),obj_console.deactivateButtons({spin:!0}),obj_sound.getActiveSound("fg2")==="fanfare"&&obj_sound.stop("fg2"),requestSender("startWinRepeater",{})):actSlotmachineMode=="winRepeater-wait"?(obj_console.block(),obj_console.showUserInfo({type:"none"}),obj_console.deactivateButtons({spin:!0}),startWinRepeaterStep(!0)):actSlotmachineMode=="freegame-intro"?typeof callback_afterFreegameIntroPause=="function"&&(obj_console.block(),obj_console.showUserInfo({type:"none"}),obj_console.deactivateButtons({spin:!0}),obj_sound.getActiveSound("fg2")==="fanfare"&&obj_sound.stop("fg2"),requestFGBonusSymbol?requestSender("getFGBonusSymbol",{}):callback_afterFreegameIntroPause()):actSlotmachineMode=="freegame-retrigger"?typeof callback_afterFreegameRetriggerPause=="function"&&(obj_console.block(),obj_console.deactivateButtons({spin:!0}),obj_sound.getActiveSound("fg2")==="fanfare"&&obj_sound.stop("fg2"),callback_afterFreegameRetriggerPause()):(obj_console.block(),$(".linemarkerClickarea").removeClass("active"),actFreegame?(typeof callback_onFreegameRestart=="function"&&(callback_onFreegameRestart(),callback_onFreegameRestart=null),freegamesAreRunning=!0,actSlotmachineMode="freegame-spin",obj_console.showUserInfo({type:"freegame",value:actFreegame,maxValue:maxFreegames})):actSlotmachineMode="basegame-spin",resetConsole(),spin())}),obj_console.addEventListener("onAutospinChoice",function(){obj_timer.has("waitForAutoNoGamble")&&obj_timer.remove("waitForAutoNoGamble");if(infoVisible||settingsVisible)return requestHideInfo(),!1;obj_sound.getActiveBGSound()===introVoiceSound&&obj_sound.stopBgSound();if(isMaxiplayInfoVisible)return closeMaxiplayInfo(),!1;isJackpotInfoVisible&&closeJackpotBetInfo(),autospins=obj_console.getValue("autospins"),autospinOutcome={balanceChange:0,totalWin:0,freegamesReached:!1,lastBetBeforeFreegames:0},obj_console.resetAutospinStopReason(),obj_console.switchOnAutospins(),requestSender("triggerGameEvent",{type:"autospin",value:!0}),$(".linemarkerClickarea").removeClass("active"),checkForSpin({withAutospinDelay:!1})}),obj_console.addEventListener("onStopautospin",function(){obj_console.switchOffAutospins(),stopAutospin(),requestSender("triggerGameEvent",{type:"autospin",value:!1}),featureCountdown&&(stopFeatureCountdown(),obj_console.showUserInfo({type:"pleasePressSpin"}));if(spinresult){var e=0;jackpotWin?e=jackpotWin:spinresult.freegameWin?e=spinresult.freegameWin:spinresult.winCoins&&(e=spinresult.winCoins),gambleOfferIsPossible=e&&!actFreegame&&!spinresult.actFreegame&&!maxRoundWinReached&&(typeof spinresult.winRepeater=="undefined"||!spinresult.winRepeater)}winAnimIsRunning&&startAbortableWinAnim()}),obj_console.addEventListener("onStopspin",function(){showTurbospinPopup&&!obj_console.isQuickspinActivated()&&(quickspinCount++,wasQuickspinRequested=!0),enforceMinimalSpinDuration||(isSpinningInfinitely?wasQickspinRequestedDuringInfiniteSpin=!0:obj_anim.quickStop())}),obj_console.addEventListener("onAbortwinanim",function(){typeof callback_onFreegameOutroAbort=="function"?(callback_onFreegameOutroAbort(),callback_onFreegameOutroAbort=null):(actFreegame&&actFreegame<maxFreegames&&(winAnimAbortedForNextAction=!0),abortWinAnim(!0))}),obj_console.addEventListener("onTakewin",function(){inGambleMode=!1,finishGambleRound()}),obj_console.addEventListener("onSplitwin",function(){obj_console.block(),requestSender("splitGambleWin",{inLadderMode:inLadderMode?1:0})}),obj_console.addEventListener("onNogamble",function(e){if(isLastFreeRound||startJackpot)e="wait";winAnimIsRunning&&(winAnimAbortedForNextAction=!0,abortWinAnim(e=="spin"));if(startJackpot)return;if(e=="spin"){var t=obj_balanceManager.getFull()+obj_console.getValue("win");t<obj_console.getValue("totalbet")&&(e="wait")}noGambleRequested=!0,obj_console.block(),obj_animManager.abort("stopTakeWinOrGambleOfferBGSound"),obj_sound.getActiveSound("fg1")==="gambleTeaser"&&obj_sound.stop("fg1"),requestSender("noGamble",{enforceNextAction:e})}),obj_console.addEventListener("onGambleCard",function(){winAnimIsRunning&&(winAnimAbortedForNextAction=!0,abortWinAnim(!1)),obj_animManager.abort("stopTakeWinOrGambleOfferBGSound");if(startJackpot)return;obj_console.block(),unblockConsoleOnServerResponse.initGambleCard=!0,requestSender("initGambleCard")}),obj_console.addEventListener("onGambleLadder",function(){winAnimIsRunning&&(winAnimAbortedForNextAction=!0,abortWinAnim(!1)),obj_animManager.abort("stopTakeWinOrGambleOfferBGSound");if(startJackpot)return;obj_console.block(),unblockConsoleOnServerResponse.initGambleLadder=!0,requestSender("initGambleLadder")}),obj_console.addEventListener("onGambleCardChoice",function(e){obj_console.block();var t=null;$("#cheatCard").size()&&(t=$("#cheatCard").val(),$("#cheatCard").val(0)),requestSender("gambleCard",{choice:e,cheatCard:t})}),obj_console.addEventListener("onGambleLadderChoice",function(){obj_console.block();if(!obj_gamble.stopRunningDrawOutAnim()){var e=null;$("#cheatLadderStep").size()&&(e=$("#cheatLadderStep").val(),$("#cheatLadderStep").val(0)),requestSender("gambleLadder",{cheatLadderStep:e})}}),obj_console.addEventListener("onMaxiplay",function(){winAnimAbortHandler(),obj_sound.getActiveSound("fg1")==="gambleTeaser"&&obj_sound.stop("fg1"),obj_sound.getActiveBGSound()===introVoiceSound&&obj_sound.stopBgSound(),obj_sound.getActiveBGSound()==="ambiente"&&obj_sound.muteBgSound(1e3),obj_console.block(),unblockConsoleOnServerResponse.maxiplay=!0,requestSender("toggleMaxiplay",{coins:obj_balanceManager.getFull()})}),obj_console.addEventListener("onJackpot",function(){winAnimAbortHandler();if(startJackpot)return;obj_sound.getActiveSound("fg1")==="gambleTeaser"&&obj_sound.stop("fg1"),obj_console.block(),unblockConsoleOnServerResponse.jackpotBet=!0,requestSender("increaseJackpotBet",{})}),obj_console.addEventListener("onStopFeatureCountdown",function(){stopFeatureCountdown(),obj_console.showUserInfo({type:"pleasePressSpin"})}),obj_console.addEventListener("onPaytable",function(){infoVisible?requestHideInfo("info"):(settingsVisible&&(settingsVisible=!1),$(".linemarkerClickarea").removeClass("active"),obj_console.block(),unblockConsoleOnServerResponse.info=!0,requestSender("showInfoSite",{section:"paytable"}))}),obj_console.addEventListener("onSettings",function(){settingsVisible?requestHideInfo("settings"):(infoVisible&&(infoVisible=!1),$(".linemarkerClickarea").removeClass("active"),obj_console.block(),unblockConsoleOnServerResponse.info=!0,requestSender("showInfoSite",{section:"settings"}))}),obj_console.addEventListener("onRules",function(){var rulesContainer=null;loadRulesInClient&&(obj_console.block(),$(".popupContainer").after('<div class="'+obj_console.type()+'" id="rulesContainer"></div>'),rulesContainer=$("#rulesContainer").hide(),rulesContainer.append('<iframe /><div id="closeRules"></div>'),obj_devConf.areIframesScrollable()||rulesContainer.css({"-webkit-overflow-scrolling":"touch",overflow:"scroll"}),$("#rulesContainer #closeRules").on("click",function(){$("#cheatFreeRounds").parents(".selectBoxes").css("opacity",""),obj_sound.playGeneric("buttonClick"),$("#rulesContainer").remove(),obj_console.unblock()}));if(rulesJSLoader){var onRulesShown=function(){$("#cheatFreeRounds").parents(".selectBoxes").css("opacity",0),obj_sound.playGeneric("buttonClick")};rulesJSLoader(onRulesShown,rulesContainer?rulesContainer[0]:null)}else if(rulesURL){$("#cheatFreeRounds").parents(".selectBoxes").css("opacity",0);if(rulesURL.indexOf("javascript:")==0)eval(rulesURL);else if(rulesContainer){var getUrlForIFrame=function(){var e=rulesURL;return obj_devConf.areIframesScrollable()||(e+=(rulesURL.indexOf("?")==-1?"?":"&")+"height="+rulesContainer.height()),e};rulesContainer.find("iframe").attr("src",getUrlForIFrame()),obj_devConf.areIframesScrollable()||rulesContainer.on("resize",function(){$("#rulesContainer iframe").attr("src",getUrlForIFrame())}),rulesContainer.show()}else window.open(rulesURL,"_blank")}else console.log("event handler on rules button failed: no rules url defined")}),obj_console.addEventListener("onHistory",function(){typeof gameHistoryHandler=="function"?gameHistoryHandler():(obj_console.block(),unblockConsoleOnServerResponse.showHistoryPage=!0,requestSender("showHistoryPage",{page:1}))}),obj_console.addEventListener("onCloseInfoSite",function(){requestHideInfo()}),obj_console.addEventListener("onFullscreen",obj_fullscreen.toggle)}function resetConsole(){obj_console.setMode(actSlotmachineMode),(actSlotmachineMode=="basegame-wait"||actSlotmachineMode=="freegame-wait")&&thiz.allowManualReelsMode(),(actSlotmachineMode=="basegame-wait"||actSlotmachineMode=="gamble-offer-start"||actSlotmachineMode=="gamble-offer-continue")&&!actFreeRound&&$(".linemarkerClickarea").not("active").addClass("active"),actSlotmachineMode=="basegame-wait"&&thiz.checkAvailableButtons()}function setPossLinebets(e,t,n,r){var i=[];for(var s in e)i[s]=e[s];possLinebets.length==1&&i.length>1&&obj_console.setValues({linebetsAreFixed:!1}),possLinebets=i,minLinebet=possLinebets[0],r?updateNextPrevLinebet():calcMaxLinebet(),n&&obj_console.setValues({linebet:t,prevLinebetIsMax:prevLinebet===actMaxLinebet&&minLinebet!=actMaxLinebet,nextLinebetIsMax:nextLinebet===actMaxLinebet&&minLinebet!=actMaxLinebet})}function calcMaxLinebet(e){var t=typeof e=="object"&&typeof e.money!="undefined"?e.money:obj_balanceManager.getFull(),n=typeof e=="object"&&typeof e.lines!="undefined"?e.lines:actLines;if(limitBetsToAvailableBalance){actMaxLinebet=!1;if(possLinebets.length){var r=possLinebets.length-1;while(r>=0){if(obj_console.getTotalBet(possLinebets[r],n)<=t){actMaxLinebet=possLinebets[r];break}r--}}}else actMaxLinebet=possLinebets[possLinebets.length-1];updateNextPrevLinebet()}function setLinebet(e){actLinebet=parseInt(e),possLinebets.length>1?calcMaxLinebet():updateNextPrevLinebet(),possLines.length>1&&calcMaxLines(),obj_console.setValues({linebet:actLinebet,prevLinebetIsMax:prevLinebet===actMaxLinebet&&minLinebet!==actMaxLinebet,nextLinebetIsMax:nextLinebet===actMaxLinebet&&minLinebet!==actMaxLinebet,prevLineIsMax:prevLines===actMaxLines&&minLines!==actMaxLines,nextLineIsMax:nextLines===actMaxLines&&minLines!==actMaxLines})}function updateNextPrevLinebet(){var e=-1;while(typeof possLinebets[e+1]!="undefined"&&possLinebets[e+1]<=actLinebet)e++;possLinebets[e]===actLinebet?(prevLinebet=e===0||actLinebet>actMaxLinebet?actMaxLinebet:possLinebets[e-1],nextLinebet=actLinebet<actMaxLinebet?possLinebets[e+1]:possLinebets[0]):(prevLinebet=e===-1||actLinebet>actMaxLinebet?actMaxLinebet:possLinebets[e],nextLinebet=e===-1||possLinebets[e+1]>actMaxLinebet?possLinebets[0]:possLinebets[e+1])}function calcMaxLines(e){var t=typeof e=="object"&&typeof e.money!="undefined"?e.money:obj_balanceManager.getFull(),n=typeof e=="object"&&typeof e.linebet!="undefined"?e.linebet:actLinebet;if(limitBetsToAvailableBalance){actMaxLines=!1;if(possLines.length){var r=possLines.length-1;while(r>=0){if(obj_console.getTotalBet(n,possLines[r])<=t){actMaxLines=possLines[r];break}r--}}}else actMaxLines=possLines[possLines.length-1];updateNextPrevLines()}function setLines(e){actLines=parseInt(e),possLines.length>1?calcMaxLines():updateNextPrevLines(),possLinebets.length>1&&calcMaxLinebet(),showAvailableLines(),obj_console.setValues({lines:actLines,prevLineIsMax:prevLines===actMaxLines&&minLines!==actMaxLines,nextLineIsMax:nextLines===actMaxLines&&minLines!==actMaxLines,prevLinebetIsMax:prevLinebet===actMaxLinebet&&minLinebet!==actMaxLinebet,nextLinebetIsMax:nextLinebet===actMaxLinebet&&minLinebet!==actMaxLinebet})}function updateNextPrevLines(){var e=-1;while(typeof possLines[e+1]!="undefined"&&possLines[e+1]<=actLines)e++;possLines[e]===actLines?(prevLines=e===0||actLines>actMaxLines?actMaxLines:possLines[e-1],nextLines=actLines<actMaxLines?possLines[e+1]:possLines[0]):(prevLines=e===-1||actLines>actMaxLines?actMaxLines:possLines[e],nextLines=e===-1||possLines[e+1]>actMaxLines?possLines[0]:possLines[e+1])}function stopAutospin(){autospins=0,isSpinningInfinitely&&obj_anim.stopInfiniteSpin()}function startFeatureCountdown(){featureCountdown=10,obj_console.showUserInfo({type:"countdownFreegames",value:featureCountdown}),obj_console.activateButtons({stopfeaturecountdown:!0}),obj_timer.add({name:"featureCountdown",interval:1e3,func:function(){featureCountdown--,featureCountdown?obj_console.showUserInfo({type:"countdownFreegames",value:featureCountdown}):(stopFeatureCountdown(),obj_console.clickButton("spin",{noSound:!0}))}})}function stopFeatureCountdown(){featureCountdown=0,obj_timer.has("featureCountdown")&&obj_timer.remove("featureCountdown"),obj_console.hideButtons({stopfeaturecountdown:!0})}function abortWinAnim(e){obj_console.block(),obj_console.abortWinCounterAnim("win"),obj_console.abortWinCounterAnim("actWin");if(runningLinepings){var t=0,n=runningLinepings=="normal"?actLinewins:runningLinepings=="bonus"?actBonusLinewins:actFreegameLinewins;for(var r in n)t+=n[r];var i=runningLinepings=="freegame"?"winFreegames":"win",s=t;obj_console.increaseWinCounter({name:i,value:s}),(actFreegame||winRepeaterSectors!==null)&&i=="win"&&obj_console.increaseWinCounter({name:"actWin",value:s}),runningLinepings=!1}obj_anim.abortWinAnim(e)}function abortWinLines(){obj_console.block(),obj_anim.abortWinlineStepping(obj_console.unblock)}function requestHideInfo(e){obj_console.block(),unblockConsoleOnServerResponse.hideInfoSite=!0,requestSender("hideInfoSite",{section:e})}function closeInfoSite(e){$(".infoContainer").html("").removeAttr("data-jackpotlevel"),infoVisible=!1,settingsVisible=!1,thiz.checkAvailableButtons(),resetConsole(),obj_console.hideMenu(),obj_console.isQuickspinActivated()&&(showTurbospinPopup=!1)}function showMaxiplayInfo(){var e=$("#maxiplay_container");e.show(),$("#maxiplay_container .close").unbind("click").click(function(){closeMaxiplayInfo()}),typeof callback_renderMPSign=="function"&&(obj_console.block(),callback_renderMPSign(function(){obj_console.unblock()})),obj_timer.add({name:"closeMaxiplayInfo",time:5e3,func:closeMaxiplayInfo}),isMaxiplayInfoVisible=!0}function closeMaxiplayInfo(){obj_timer.has("closeMaxiplayInfo")&&obj_timer.remove("closeMaxiplayInfo"),$("#maxiplay_container").hide(),isMaxiplayInfoVisible=!1,obj_console.maxiplayInfoIsOver()}function updatePossJackpotBets(e){possJackpotBets=e.possBets,isJackpotInfoVisible&&showJackpotBetInfo(e.infoData,!1),obj_console.updatePossJackpotBets(possJackpotBets),obj_console.updateAutospinLossLimit(),thiz.checkAvailableButtons()}function updateJackpotLevel(e){if(typeof e=="undefined"){actJackpotLevel=0;return}actJackpotLevel=-1;for(var t in possJackpotBets)possJackpotBets[t]==e&&(actJackpotLevel=parseInt(t));actJackpotLevel<0&&(actJackpotLevel=0)}function closeJackpotIntro(){obj_timer.has("closeJackpotIntro")&&obj_timer.remove("closeJackpotIntro"),showJackpotIntro=null,obj_jackpot.hideIntroSign(),obj_console.onJackpotInfoClose(),dontChangeConsoleButtonStates=!1,thiz.checkAvailableButtons(),obj_console.showUserInfo({type:"choose"}),prepareForSpin()}function showJackpotBetInfo(e,t){typeof e=="undefined"&&(e={}),e.betLevel=actJackpotLevel,e.betsPerLevel=possJackpotBets,obj_jackpot.showBetInfoSign(e);if(typeof t=="undefined"||t)obj_timer.has("closeJackpotBetInfo")&&obj_timer.remove("closeJackpotBetInfo"),obj_timer.add({name:"closeJackpotBetInfo",time:actJackpotLevel?5e3:3e3,func:closeJackpotBetInfo});isJackpotInfoVisible=!0}function closeJackpotBetInfo(){obj_timer.has("closeJackpotBetInfo")&&obj_timer.remove("closeJackpotBetInfo"),obj_jackpot.hideBetInfoSign(),isJackpotInfoVisible=!1,obj_console.onJackpotInfoClose()}function showAvailableLines(){$(".linemarkersBox .linemarker").removeClass("activeLines"),$(".linemarkersBox .linemarker .linemarkerLabel").not("hidden").addClass("hidden");if(totalMaxLines<=10||maxLinesPerReel&&maxLinesPerReel<=10){var e=actLines;for(var t=0;t<=e;t++)$(".linemarkersBox .linemarker.lines"+t).addClass("activeLines"),$(".linemarkersBox .linemarker .dimmer").hide()}else $(".linemarkersBox .linemarker.lines"+actLines).addClass("activeLines"),$(".linemarkersBox .linemarker.lines"+actLines+" .linemarkerLabel").removeClass("hidden");if(maxLinesPerReel&&totalMaxLines!=maxLinesPerReel){var e=actLines;for(var t=maxLinesPerReel+1;t<=e;t++)$(".linemarkersBoxX .linemarker.lines"+t).addClass("activeLines"),$(".linemarkersBoxX .linemarker .dimmer").hide()}xtremeSlot&&$(".gameContainer .dimmingSlotAreas .dimmArea").each(function(){var e=$(this).attr("id").split("-"),t=e[1];t<=actLines?$(this).css("visibility","hidden"):$(this).css("visibility","visible")})}function dimOtherLinemarkers(e){totalMaxLines<=10?($(".linemarkersBox .linemarker .dimmer").removeClass("hidden").show(),e!=0&&$(".linemarkersBox .linemarker.lines"+e+" .dimmer").hide()):maxLinesPerReel&&totalMaxLines!=maxLinesPerReel&&($(".linemarkersBox .linemarker .dimmer").removeClass("hidden").show(),$(".linemarkersBoxX .linemarker .dimmer").removeClass("hidden").show(),e!=0&&(e<=maxLinesPerReel?$(".linemarkersBox .linemarker.lines"+e+" .dimmer").hide():$(".linemarkersBoxX .linemarker.lines"+e+" .dimmer").hide()))}function initFreeRounds(e,t){actFreeRound=e.actFreeRound,maxFreeRounds=e.maxFreeRounds,isLastFreeRound=actFreeRound>=maxFreeRounds,setLines(e.lines),setLinebet(e.freeRoundBet),obj_console.setValues({actWin:e.freeRoundWin}),obj_console.showUserInfo({type:"freeround",value:actFreeRound,maxValue:maxFreeRounds}),obj_console.switchOnFreeRounds(),typeof e.maxiplay!="undefined"&&e.maxiplay!=inMaxiplayMode&&(e.maxiplay?(inMaxiplayMode=!0,obj_console.switchOnMaxiplay()):(inMaxiplayMode=!1,obj_console.switchOffMaxiplay(!0))),actFreeRoundsEvent="intro",handleFreeRoundsEvent(t)}function handleFreeRoundsEvent(e){callback_afterFreeRoundsIntro=e;var t=function(){obj_console.switchOffFreeRounds(),dontShowFreeRoundsOutroSign||dontShowWinOnFreeRoundsOutroSign?lastWin&&obj_console.showUserInfo({type:"lastWin",value:lastWin}):totalFreeRoundsWin&&obj_console.showUserInfo({type:"lastWin",value:totalFreeRoundsWin}),totalFreeRoundsWin=0;if(typeof spinresult.resetAfterFreeRounds!="undefined"){var e=spinresult.resetAfterFreeRounds;typeof e.lines!="undefined"&&setLines(e.lines),typeof e.linebet!="undefined"&&setLinebet(e.linebet),typeof e.possJackpotBets!="undefined"&&updatePossJackpotBets(e.possJackpotBets),typeof e.maxiplay!="undefined"&&e.maxiplay!=inMaxiplayMode&&(e.maxiplay?(inMaxiplayMode=!0,obj_console.switchOnMaxiplay()):(inMaxiplayMode=!1,obj_console.switchOffMaxiplay(!0)))}else thiz.showErrorPopup(obj_restHandler.onFatalError)};actFreeRoundsEvent=="intro"&&requestSender("activateFreeRoundsMode",{});if(actFreeRoundsEvent=="intro"&&!useExternalFreeRoundsIntroSign&&!dontShowFreeRoundsIntroSign||actFreeRoundsEvent=="outro"&&!dontShowFreeRoundsOutroSign){obj_console.block();var n=$(".popupContainer"),r=$('<div class="freeRoundsdSign"></div>').insertAfter(n);r.addClass(typeof jv_usedLang!="undefined"?jv_usedLang:"").html(['<div class="freeRoundsBG"></div>','<div class="freeRoundsContent '+actFreeRoundsEvent+(!dontShowWinOnFreeRoundsOutroSign&&totalFreeRoundsWin?" withWin":"")+'">','<div class="freeRoundsDesc"></div>','<div id="buttonContinue">',obj_lang["game_freerounds_"+actFreeRoundsEvent+"-button"],"</div>","</div>"].join(""));var i=function(n){obj_timer.has("stopFreeRoundsOutro")&&obj_timer.remove("stopFreeRoundsOutro"),winAnimIsRunning?(winAnimAbortedForNextAction=!0,abortWinAnim(!0)):abortWinLines();var i=actFreeRoundsEvent=="outro";r.remove(),actFreeRoundsEvent=!1,obj_console.unblock(),i&&t(),(typeof n=="undefined"||!n)&&obj_sound.playGeneric("buttonClick"),typeof e=="function"&&e()};r.find("#buttonContinue").on("click",function(){i()});var s=r.find(".freeRoundsDesc");if(actFreeRoundsEvent=="intro"){s.append('<div class="desc-1">'+obj_lang["game_freerounds_intro-1"]+"</div>");switch(freeRoundsType){case"spinWin":s.append('<div class="desc-2">'+obj_lang["game_freerounds_intro-2-spinWin"]+"</div>"),s.find(".winFactor").html(freeRoundsTargetWinFactor);break;case"totalWin":s.append('<div class="desc-2">'+obj_lang["game_freerounds_intro-2-totalWin"]+"</div>"),s.find(".winAmount").html(displayMoney(freeRoundsTargetWin));break;case"feature":s.append('<div class="desc-2">'+obj_lang["game_freerounds_intro-2-feature"]+"</div>"),s.find(".feature").html(obj_lang["game_freerounds_feature-"+freeRoundsStopFeatures[0]]);break;default:s.append('<div class="desc-2">'+obj_lang["game_freerounds_intro-2"]+"</div>"),s.find(".freeRoundsAmount").html(maxFreeRounds)}var o=s.find(".desc-2"),u=~~(1.2*parseInt(o.css("font-size"))),a=1;o.height()>u&&(a=2,s.addClass("desc2Has2Lines"));var f=parseInt(o.css("font-size"));while(o.height()>a*u&&f>20)o.css("font-size",f--);actSlotmachineMode=autospins?"basegame-autospin":"basegame-wait",resetConsole()}else{obj_console.showUserInfo({type:"none"}),autospins&&(actSlotmachineMode="basegame-autospin"),resetConsole(),!dontShowFreeRoundsOutroSign&&!dontShowWinOnFreeRoundsOutroSign&&(lastWin=totalFreeRoundsWin),!dontShowWinOnFreeRoundsOutroSign&&totalFreeRoundsWin&&s.append(['<div class="desc-1">'+obj_lang["game_freerounds_outro-1"]+"</div>",'<div class="winAmount">'+displayMoney(totalFreeRoundsWin)+"</div>"].join("")),s.append('<div class="desc-2">'+obj_lang["game_freerounds_outro-2"]+"</div>");var o=s.find(".desc-2"),u=1.25*parseInt(o.css("font-size"));o.height()>2*u&&s.addClass("desc2Has3Lines"),freeRoundsOutroDelay&&obj_timer.add({name:"stopFreeRoundsOutro",time:freeRoundsOutroDelay,func:function(){i(!0)}})}r.show()}else if(actFreeRoundsEvent=="intro"&&useExternalFreeRoundsIntroSign){actSlotmachineMode="basegame-wait-inactive",resetConsole();if(freeRoundsIntroDelay){var l=Date.now()+freeRoundsIntroDelay,c=function(){return Date.now()<l?!0:(thiz.onFreeRoundsIntroClose(),!1)};obj_animManager.add("closeFreeRoundsIntro",c),requestSender("showFreeRoundsIntro",{})}else requestSender("showFreeRoundsIntro",{})}else actFreeRoundsEvent=="outro"&&t(),actFreeRoundsEvent=!1,typeof e=="function"&&e()}function checkForAutospinStopReasonPopup(){if(!showAutospinStopReasonPopup)return;var e=obj_console.getAutospinStopReason();obj_console.resetAutospinStopReason();if(e&&e.type!=="winFreegames"){var t=function(){obj_console.block();var e=obj_devConf.mode("r")?1:2,t=$(".autospinStopReasonPopup .errorText");t.css("padding","0px "+10*e+"px");var n=t.height(),r=parseInt(t.css("line-height"));3===~~(n/r+.5)&&(t.css("margin-top",30*e+"px"),$(".autospinStopReasonPopup .reconnectButton").css("top",-10*e+"px"))},n=function(){obj_console.unblock()},r=obj_lang["game_error_autospin-stopReason-"+e.type];r=r.replace("<WERT>",displayMoney(e.value)),thiz.showErrorPopup(n,{type:"autospinStopReasonPopup",buttonType:"Okay",errorText:r,onOpen:t})}}function prepareForSpin(e,t){wasGameEventRegistered_spinStart=!1,wasGameEventRegistered_spinStop=!1,typeof t=="undefined"&&(t=!1),obj_console.isBlocked()&&obj_console.unblock();if(winRepeaterSectors!==null)actSlotmachineMode="winRepeater-wait",obj_console.showUserInfo({type:"pleasePressSpin"}),obj_console.setValues({actWin:spinresult.freegameWin});else if(actFreegame){if(actFreegame==1||isFirstLoad)obj_console.showUserInfo({type:"freegame",value:actFreegame,maxValue:maxFreegames}),actSlotmachineMode="freegame-wait";if(!isFirstLoad||!isLastFreegame){var n=isFirstLoad&&startJackpot?actFreegame-1:actFreegame;isLastFreegame=n==maxFreegames}}else{actFreeRoundsEvent=="outro"?obj_console.showUserInfo({type:"none"}):actFreeRound?freeRoundsType==="default"?obj_console.showUserInfo({type:"freeround",value:actFreeRound,maxValue:maxFreeRounds}):obj_console.showUserInfo({type:"freerounds"}):lastWin>0?obj_console.showUserInfo({type:"lastWin",value:lastWin}):obj_console.getActUserInfo()=="endFreegames"&&obj_console.showUserInfo({type:"none"});if(!autospins||actFreeRoundsEvent=="outro")actSlotmachineMode="basegame-wait"}isFirstLoad?(isFirstLoad=!1,$(".backBox").removeClass("hidden"),$(".animationBox").removeClass("hidden"),$(".mainControlBox").css("opacity",""),resetConsole(),actFreeRound?obj_console.scaleUserInfo("freeround"):obj_console.scaleUserInfo("choose")):!onPendingCalled&&onPending&&autospins==0&&!actFreegame&&(obj_console.block(),onPending(function(){obj_console.unblock()}),onPendingCalled=!0),noGambleRequested=!1;var r=function(){var t=function(e){checkForSpin({enforceNextAction:typeof e!="undefined"?e:!1})};spinresult&&typeof spinresult.startFreeRounds!="undefined"?initFreeRounds(spinresult.startFreeRounds,t):t(e)};winRepeaterSectors===null&&typeof startJackpot=="function"&&!t?(obj_console.block(),startJackpot()):typeof showJackpotIntro=="function"?showJackpotIntro():actFreeRoundsEvent?handleFreeRoundsEvent(r):r()}function checkForSpin(e){withAutospinDelay=typeof e.withAutospinDelay!="undefined"?e.withAutospinDelay:!0,winAnimAbortedForNextAction=!1,actFreegame,winRepeaterSectors===null&&(autospins&&!areAutospinsPaused&&(actFreegame||obj_balanceManager.getFull()>=obj_console.getValue("totalbet"))?(actFreegame?(actSlotmachineMode="freegame-autospin",obj_console.showUserInfo({type:"freegame",value:actFreegame,maxValue:maxFreegames})):(actSlotmachineMode="basegame-autospin",autospins>0&&(obj_console.setValues({autospins:autospins}),autospins--,autospins||obj_console.switchOffAutospins())),obj_console.block(),resetConsole(),spinExecutionTime||(spinExecutionTime=Date.now()+(withAutospinDelay||enforceMinimalSpinDuration?autospinDelay:0)),spin()):(obj_console.isButtonActive("stopautospin")&&(obj_sound.getActiveSound("fg2")=="autospinOn"&&obj_sound.stop("fg2"),obj_sound.playGeneric("autospinOff","fg2")),actSlotmachineMode=actFreegame?"freegame-wait":"basegame-wait",resetConsole(),areAutospinsPaused&&(obj_console.activateButtons({stopautospin:!0}),obj_console.hideButtons({autospin:!0})))),e.enforceNextAction&&(obj_console.unblock(),obj_console.clickButton(e.enforceNextAction,{noSound:!0}))}function onSpinFailed(e){typeof e!="object"&&(e={}),abortWaitingAnimation(),failedSpins++;if(failedSpins%failedSpinRetriesBeforePopup!==0)spin(!0);else if(useFakeReels
){var t=null;failedSpins<failedSpinRetriesBeforePopup*failedSpinPopupsBeforeReload?t=function(){spin(!0)}:(t=obj_restHandler.onFatalError,e.buttonType="NewLoad"),thiz.showErrorPopup(t,e)}else thiz.showErrorPopup(resetAfterFailedSpins,e)}function abortWaitingAnimation(){spinWaiterTimer&&(clearTimeout(spinWaiterTimer),spinWaiterTimer=null),spinWaiterWasStarted&&(stopWaiting(),spinWaiterWasStarted=!1)}function resetAfterFailedSpins(){failedSpins=0,stopAutospin(),obj_balanceManager.revealAll(),actSlotmachineMode=actFreegame?"freegame-wait":"basegame-wait",resetConsole(),obj_console.unblock()}function spin(e){if(!actFreeRound&&!actFreegame&&(typeof e=="undefined"||!e)){if(obj_balanceManager.getFull()<obj_console.getValue("totalbet"))return!1;betForThisSpin=obj_console.getValue("totalbet"),obj_balanceManager.hide(betForThisSpin)}else betForThisSpin=0;var t=0;$("#cheatModus").size()&&(t=$("#cheatModus").val(),$("#cheatModus").val(0));var n=0;$("#cheatJackpot").size()&&(n=$("#cheatJackpot").val(),$("#cheatJackpot").val(0)),abortWaitingAnimation(),useWaitingAnimation&&(spinWaiterTimer=setTimeout(function(){spinWaiterWasStarted=!0,startWaiting()},useFakeReels&&!obj_console.isQuickspinActivated()?waitingAnimationDelayLong:waitingAnimationDelayShort)),spinExecutionTime||(spinExecutionTime=enforceMinimalSpinDuration?Date.now()+autospinDelay:Date.now()-1),obj_console.block();if(useFakeReels){var r=Date.now();r>=spinExecutionTime?startInfiniteSpins():obj_timer.add({name:"startInfiniteSpins",time:spinExecutionTime-r,func:startInfiniteSpins})}thiz.forbidManualReelsMode(),onPendingCalled=!1,requestSender("spin",{cheat:t,jackpotCheat:n,freegame:actFreegame>0?"1":"0"},onSpinFailed),!wasGameEventRegistered_spinStart&&onGameEvent&&(wasGameEventRegistered_spinStart=!0,onGameEvent("spinStart"))}function startInfiniteSpins(){if(isSpinningInfinitely)return;if(autospins&&obj_console.isQuickspinActivated())return;obj_anim.startInfiniteSpinAnim(),wasQickspinRequestedDuringInfiniteSpin=!1,isSpinningInfinitely=!0,obj_console.unblock()}function processSpinresult(){spinExecutionTime=0,obj_balanceManager.set(spinresult.playerCoins,!0);var e=0;spinresult.freegameWin?e=spinresult.freegameWin:spinresult.winCoins&&(e=spinresult.winCoins),isLastFreeRound=typeof spinresult.resetAfterFreeRounds!="undefined",typeof spinresult.maxWinReached!="undefined"&&(maxRoundWinReached=spinresult.maxWinReached),typeof spinresult.abortFreegames!="undefined"&&spinresult.abortFreegames&&(isLastFreegame=!0),possLinebets.length>1&&calcMaxLinebet({money:obj_balanceManager.getFull()+e}),possLines.length>1&&calcMaxLines({money:obj_balanceManager.getFull()+e}),obj_console.setValues({prevLineIsMax:prevLines===actMaxLines&&minLines!==actMaxLines,prevLinebetIsMax:prevLinebet===actMaxLinebet&&minLinebet!==actMaxLinebet,nextLineIsMax:nextLines===actMaxLines&&minLines!==actMaxLines,nextLinebetIsMax:nextLinebet===actMaxLinebet&&minLinebet!==actMaxLinebet}),jackpotType&&(coinsAfterJackpot=0,jackpotWin=0,spinresult.jackpotGame&&(obj_console.prepareForJackpotFeature(),startJackpot=function(){obj_jackpot.init(spinresult.jackpotGame,actJackpotLevel,actFreegame)})),gambleOfferIsPossible=e&&!actFreegame&&!spinresult.actFreegame&&!autospins&&!maxRoundWinReached&&(typeof spinresult.winRepeater=="undefined"||!spinresult.winRepeater),checkAvailableGambleButtons({gambleAllowed:spinresult.gambleAllowed,newMaxGambleLadderBet:spinresult.newMaxGambleLadderBet,newMaxGambleCardBet:spinresult.newMaxGambleCardBet,win:e,winFactor:spinresult.winFactor}),!spinresult.isFreeGame&&!actFreeRound&&(lastWin>0?obj_console.showUserInfo({type:"lastWin",value:lastWin}):obj_console.showUserInfo({type:"none"}));var t=function(){obj_console.hideButtons({stopspin:!0,spin:!0}),obj_console.deactivateButtons({abortwinanim:!0}),obj_console.block()};startGameRound&&!spinresult.isFreeGame&&startGameRound(),obj_anim.startSpinAnim(spinresult,onFinishedSpinAnim,obj_console.unblock,t),canTurbospinPopupBeShownAfterThisRound=!0,isSpinningInfinitely=!1,canSpinBeRequestedBeforeGambleOffer=!1,wasSpinRequestedBeforeGambleOffer=!1,useFakeReels||(wasQickspinRequestedDuringInfiniteSpin=!1),!enforceMinimalSpinDuration&&(obj_console.isQuickspinActivated()||wasQickspinRequestedDuringInfiniteSpin)&&obj_console.clickButton("stopspin",{noSound:!0,enforce:!0,keepHolding:!0})}function onFinishedSpinAnim(){wasGameEventRegistered_spinStart&&!wasGameEventRegistered_spinStop&&onGameEvent&&(wasGameEventRegistered_spinStop=!0,onGameEvent("spinStop"));var e=!actFreegame&&spinresult.actFreegame,t=typeof spinresult.winRepeater!="undefined"&&!!spinresult.winRepeater,n=t&&winRepeaterSectors!==null;!actFreegame&&(!actFreeRound||!e)&&obj_console.showUserInfo({type:"none"}),isLastFreegame&&maxFreegames<spinresult.maxFreegames&&(isLastFreegame=!1);if(autospins||t){autospinOutcome.freegamesReached=e||t,autospinOutcome.freegamesReached&&(autospinOutcome.lastBetBeforeFreegames=betForThisSpin);var r=spinresult.winCoins,i=r;spinresult.freegameWin&&(i=spinresult.freegameWin);var s=0;if(spinresult.jackpotGame){var o=spinresult.jackpotGame.result;typeof o.totalWin!="undefined"&&(s=o.totalWin),typeof o.lastSpinWin!="undefined"&&(r=o.lastSpinWin)}var u=isLastFreegame?autospinOutcome.lastBetBeforeFreegames:betForThisSpin;if(!actFreegame&&!e||isLastFreegame)n?autospinOutcome.balanceChange=autospinOutcome.balanceChange+r:autospinOutcome.balanceChange=autospinOutcome.balanceChange-u+i,autospinOutcome.balanceChangeIncludingJackpot=autospinOutcome.balanceChange+s,autospinOutcome.totalWin=i,autospinOutcome.totalWinIncludingJackpot=i+s;if(actFreegame||e)autospinOutcome.balanceChange=autospinOutcome.balanceChange+s,autospinOutcome.balanceChangeIncludingJackpot=autospinOutcome.balanceChange;autospinOutcome.ignoreActBet=actFreegame&&!isLastFreegame;if(!actFreegame&&!e||isLastFreegame){var a=obj_console.isNextAutospinPossible(autospinOutcome);autospins&&!a&&obj_console.clickButton("stopautospin")}}var f=function(e){callback_afterFreegameRetriggerPause=e,actSlotmachineMode="freegame-retrigger",resetConsole(),obj_console.unblock(),winAnimAbortedForNextAction=!1},l=function(){showAvailableLines()};if(spinresult.winCoins>0){obj_console.hideButtons({stopspin:!0,spin:!0}),obj_console.deactivateButtons({abortwinanim:!0}),obj_console.resetWinValues({win:!0}),!actFreeRound&&!actFreegame&&winRepeaterSectors===null&&obj_console.resetWinValues({actWin:!0,winFreegames:!0});var c=function(){allowConsoleWinAnim&&totalMaxLines>10&&(!maxLinesPerReel||maxLinesPerReel>10)&&(obj_console.showUserInfo({type:"none"}),obj_console.animateWinCounter({name:"win",start:0,end:spinresult.winCoins,winFactor:spinresult.winFactor}),actFreegame&&obj_console.animateWinCounter({name:"actWin",start:spinresult.freegameWin-spinresult.winCoins,end:spinresult.freegameWin,winFactor:spinresult.winFactor}))};actLinewins={};var h=function(){};runningLinepings=!1;var p=function(){},d=function(){};if(typeof spinresult.winPerLine!="undefined"){for(var v in spinresult.winPerLine)actLinewins[v]=spinresult.winPerLine[v];h=function(e,t){runningLinepings!="normal"&&(typeof t=="undefined"||!t)&&(runningLinepings="normal",actFreegame&&obj_console.activateButtons({abortwinanim:!0}));var n=actLinewins[e];delete actLinewins[e],obj_console.increaseWinCounter({name:"win",value:n}),(actFreegame||winRepeaterSectors!==null)&&obj_console.increaseWinCounter({name:"actWin",value:n}),dimOtherLinemarkers(e)},p=function(e){dimOtherLinemarkers(e)},d=function(e){spinresult.actFreegame==1&&!e?dimOtherLinemarkers(0):showAvailableLines()}}var m=function(){};actBonusLinewins=[];var g=function(){};if(typeof spinresult.bonusWinPerLine!="undefined"){m=function(){winAnimIsRunning=!0,showAvailableLines(),obj_console.activateButtons({abortwinanim:!0}),obj_console.hideButtons({spin:!0}),obj_console.unblock()};for(var v in spinresult.bonusWinPerLine)actBonusLinewins.push(spinresult.bonusWinPerLine[v]);g=function(e){runningLinepings!="bonus"&&(obj_console.unblock(),runningLinepings="bonus");var t=actBonusLinewins.shift();obj_console.increaseWinCounter({name:"win",value:t}),obj_console.increaseWinCounter({name:"actWin",value:t}),dimOtherLinemarkers(e)}}actFreegameLinewins=[];var y=function(){};if(typeof spinresult.winFGPerLine!="undefined"){for(var v in spinresult.winFGPerLine)actFreegameLinewins.push(spinresult.winFGPerLine[v]);y=function(e){runningLinepings!="freegame"&&(obj_console.unblock(),runningLinepings="freegame");var t=actFreegameLinewins.shift();obj_console.increaseWinCounter({name:"winFreegames",value:t}),dimOtherLinemarkers(e)}}actFreegame&&(obj_console.showUserInfo({type:"freegame",value:actFreegame,maxValue:maxFreegames}),obj_console.resetWinValues({win:!0,winFreegames:!0}));var b=maxFreegames>0&&maxFreegames<spinresult.maxFreegames;if(b)var w=function(){winAnimIsRunning=!1,dimOtherLinemarkers(0),obj_console.hideButtons({stopspin:!0,spin:!0}),obj_console.deactivateButtons({abortwinanim:!0}),obj_console.block()};var E=function(e){var t=0;for(var n in actLinewins)t+=actLinewins[n];t&&(e||(obj_console.setValues({win:t}),obj_console.showUserInfo({type:"win",value:t})),actFreegame&&obj_console.increaseWinCounter({name:"actWin",value:t}))};canTurbospinPopupBeShownAfterThisRound=!1,winAnimIsRunning=!0,obj_anim.startWinAnim({onLineping:h,onWinline:p,onStopWinlines:d,onStamp:m,onBonusLineping:g,onFreegameLineping:y,afterIntermediateAnimStep:function(){winAnimAbortedForNextAction=!1},onAbortable:startAbortableWinAnim,onFinished:isLastFreegame?onFinishedFreeGame:onFinishedWinAnim,retriggerFG:b?[w,f,l]:!1,areAutospinsActive:function(){return autospins!=0},animateConsoleCounter:c,setWinIntoConsole:E})}else{var S=isLastFreegame?onFinishedFreeGame:onFinishedWinAnim;maxFreegames>0&&maxFreegames<spinresult.maxFreegames?(canTurbospinPopupBeShownAfterThisRound=!1,obj_anim.retriggerFreeGames(function(){obj_console.hideButtons({stopspin:!0,spin:!0}),obj_console.deactivateButtons({abortwinanim:!0}),obj_console.block()},f,function(){showAvailableLines(),obj_console.unblock(),S()})):(!actFreegame&&obj_console.type()=="mobile"&&obj_console.increaseNoWinCounter(),S())}onActionDone&&onActionDone()}function startAbortableWinAnim(){gambleOfferIsPossible?(actSlotmachineMode="gamble-offer-start",resetConsole(),checkForAutospinStopReasonPopup()):obj_console.activateButtons({abortwinanim:!0}),obj_console.unblock()}function onFinishedFreeGame(e){canTurbospinPopupBeShownAfterThisRound=!1,obj_console.block();if(typeof startJackpot=="function")startJackpot();else{winAnimIsRunning=!1,actFreegame=0,maxFreegames=0,freegamesAreRunning=!1,isLastFreegame=!1;var t=spinresult&&spinresult.freegameWin>0?spinresult.freegameWin:e&&e.freegameWin>0?e.freegameWin:0;t&&(gambleOfferIsPossible=!autospins&&!maxRoundWinReached,obj_console.setValues({win:t})),actSlotmachineMode="freegame-finalanim",resetConsole(),obj_console.showUserInfo({type:"endFreegames"});var n=function(){actFreeRound&&obj_console.setValues({actWin:totalFreeRoundsWin}),maxRoundWinReached&&(actSlotmachineMode="basegame-wait",resetConsole(),obj_console.showUserInfo({type:"win",value:t})),onFinishedWinAnim()};obj_anim.finishFreeGames(n,startAbortableFreegameEndAnim,spinresult.winCoins,e)}}function startAbortableFreegameEndAnim(e){callback_onFreegameOutroAbort=e,obj_console.unblock()}function startWinRepeaterStep(e){canTurbospinPopupBeShownAfterThisRound=!1;var t=null;winRepeaterSectors===null?(obj_console.hideButtons({stopspin:!0,spin:!0}),obj_console.deactivateButtons({abortwinanim:!0}),obj_console.block(),t=function(e){callback_afterWinRepeaterIntroPause=e,actSlotmachineMode="winRepeater-intro",resetConsole(),obj_console.setValues({actWin:spinresult.freegameWin}),obj_console.isFeatureCountdownActivated()&&autospins?startFeatureCountdown():obj_console.showUserInfo({type:"pleasePressSpin"}),obj_console.unblock()},spinresult.actFreeRound&&spinresult.maxFreeRounds&&spinresult.actFreeRound<spinresult.maxFreeRounds&&(spinresult.actFreeRound=spinresult.actFreeRound+1)):e||(obj_console.showUserInfo({type:"none"}),obj_console.deactivateButtons({abortwinanim:!0}));var n=function(e){winRepeaterSectors=e.failureSectors,spinresult.freegameWin=e.totalWin,typeof e.maxWinReached!="undefined"&&(maxRoundWinReached=e.maxWinReached),obj_anim.setWinRepeaterValues(e),winRepeaterSectors==null?(checkAvailableGambleButtons({gambleAllowed:e.gambleAllowed,newMaxGambleLadderBet:e.newMaxGambleLadderBet,newMaxGambleCardBet:e.newMaxGambleCardBet,win:e.totalWin,winFactor:e.winFactor}),spinresult.playerCoins+=maxRoundWinReached?maxRoundWin:e.totalWin,typeof e.resetAfterFreeRounds!="undefined"&&(spinresult.resetAfterFreeRounds=e.resetAfterFreeRounds,isLastFreeRound=!0),onFinishedWinRepeater()):onFinishedSpinAnim()};obj_anim.startWinRepeater(n,t)}function onFinishedWinRepeater(){var e=spinresult.freegameWin;canTurbospinPopupBeShownAfterThisRound=!1,e>0&&(gambleOfferIsPossible=!autospins&&!maxRoundWinReached,obj_console.setValues({win:e})),obj_balanceManager.increase(e,!0),startJackpot&&(isJackpotAfterWinRepeater=!0),actSlotmachineMode="freegame-finalanim",resetConsole(),obj_console.showUserInfo({type:"win",value:e}),actFreeRound&&obj_console.setValues({actWin:totalFreeRoundsWin}),obj_anim.finishWinRepeater(onFinishedWinAnim)}function onFinishedWinAnim(){winAnimIsRunning=!1,callback_onFreegameOutroAbort=null,updateFreeRoundWinAfterRound=actFreeRound&&!actFreegame&&!spinresult.actFreegame,actFreegame=spinresult.actFreegame,maxFreegames=spinresult.maxFreegames;if(typeof spinresult.winRepeater=="undefined"||!spinresult.winRepeater)actFreeRound=spinresult.actFreeRound;typeof spinresult.winRepeater!="undefined"&&spinresult.winRepeater?startWinRepeaterStep(!1):actFreegame==1?startFreeGames():typeof startJackpot=="function"?(canTurbospinPopupBeShownAfterThisRound=!1,obj_console.block(),startJackpot()):checkForGambleOffer(),!onPendingCalled&&onPending&&autospins==0&&!actFreegame&&(obj_console.block(),onPending(function(){obj_console.unblock()}),onPendingCalled=!0)}function checkAvailableGambleButtons(e){var t=typeof e.gambleAllowed!="undefined"?!e.gambleAllowed:!1;typeof e.newMaxGambleLadderBet!="undefined"&&obj_gamble.setMaxLadderBet(e.newMaxGambleLadderBet),noLadderOffer=isLadderGambleDeactivated||t||e.win>=obj_gamble.getMaxLadderBet(),typeof e.newMaxGambleCardBet!="undefined"&&obj_gamble.setMaxBet(e.newMaxGambleCardBet);var n=obj_gamble.getMaxCardWin();noCardOffer=isCardGambleDeactivated||t||n&&e.win>=n,obj_console.forbidGambleButtons({ladder:noLadderOffer,card:noCardOffer,nogamble:noCardOffer&&noLadderOffer&&(e.winFactor<25||coinsAfterJackpot)})}function checkForGambleOffer(e){var t=useFakeReels&&wasSpinRequestedBeforeGambleOffer;canSpinBeRequestedBeforeGambleOffer=!1,wasSpinRequestedBeforeGambleOffer=!1;if(!gambleOfferIsPossible||t){typeof e=="undefined"&&(e={});if(actFreegame&&!autospins&&winAnimAbortedForNextAction||t)e.enforceNextAction="spin";checkForMaxWinCapping(e)}else if(!winAnimAbortedForNextAction){obj_console.unblock(),actSlotmachineMode="gamble-offer-continue",resetConsole();if(noCardOffer&&noLadderOffer)obj_timer.add({name:"waitForAutoNoGamble",time:autoNoGambleDelay,func:function(){obj_console.clickButton("nogamble",{enforce:!0})}});else if(!noGambleRequested&&!ambienteSound){obj_sound.play({soundLine:"fg1",playwhat:"gambleTeaser",loop:!0});var n=Date.now()+12e3;obj_animManager.add("stopTakeWinOrGambleOfferBGSound",function(){return Date.now()<n?!0:(obj_sound.fadeToStopFgSound(2e3,"fg1"),!1)})}}checkForAutospinStopReasonPopup()}function startFreeGames(e,t){actSlotmachineMode="freegame-beforeIntro",resetConsole(),dimOtherLinemarkers(0),obj_console.block();var n=typeof e=="undefined"?!1:e;typeof t=="undefined"&&(t=0);var r=null;hasPauseInFreegameIntro&&(r=function(e){callback_afterFreegameIntroPause=e,actSlotmachineMode="freegame-intro",resetConsole(),obj_console.setValues({actWin:spinresult.freegameWin}),obj_console.isFeatureCountdownActivated()&&autospins?startFeatureCountdown():obj_console.showUserInfo({type:"pleasePressSpin"}),obj_console.unblock()});var i=function(){showAvailableLines(),obj_console.showUserInfo({type:"freegame",value:actFreegame,maxValue:maxFreegames}),checkForMaxWinCapping()};canTurbospinPopupBeShownAfterThisRound=!1,obj_anim.startFreeGames(i,r,n,t,startJackpot)}function finishGambleRound(){inGambleMode?(actSlotmachineMode=inLadderMode?"ladder-wait":"gamble-wait",resetConsole(),obj_console.unblock()):(obj_console.block(),unblockConsoleOnServerResponse.takeGambleWin=!0,requestSender("takeGambleWin",{gambleType:inLadderMode?"ladder":"card"}))}function checkForMaxWinCapping(e){obj_timer.has("waitForAutoNoGamble")&&obj_timer.remove("waitForAutoNoGamble");if(maxRoundWinReached){autospins&&stopAutospin(),isSpinningInfinitely&&obj_anim.stopInfiniteSpin();var t=$("#errorPopupCode .errorContainer").clone(),n=$(".popupContainer");n.hide(),t.appendTo(n),t.find(".errorPopup").addClass("maxWinCapping"),errorContent=n.find(".errorPopup.maxWinCapping"),errorContent.find(".errorText").html(obj_lang.game_error_maxWinCapping),errorContent.find(".errorText .value").html(displayMoney(maxRoundWin)),errorContent.find(".buttonText").html(obj_lang.game_error_buttonOkay);var r=function(){t.remove(),obj_sound.playGeneric("takeWin"),finishThisRound(e)};errorContent.find(".retry").click(function(){return r(),!1}),n.show()}else finishThisRound(e)}function finishThisRound(e){typeof e!="undefined"&&typeof e.playerCoins!="undefined"&&obj_balanceManager.set(e.playerCoins,!0),coinsAfterJackpot=0;var t=obj_balanceManager.getFull();lastWin=typeof e!="undefined"&&typeof e.lastWin!="undefined"?e.lastWin:jackpotWin?jackpotWin:spinresult&&spinresult.freegameWin?spinresult.freegameWin:spinresult&&spinresult.winCoins?spinresult.winCoins:0,jackpotWin=0,updateFreeRoundWinAfterRound&&(totalFreeRoundsWin+=lastWin),typeof e!="undefined"&&typeof e.slotSessionStats!="undefined"?obj_console.updateSlotSessionStats(e.slotSessionStats):spinresult&&typeof spinresult.slotSessionStats=="object"?obj_console.updateSlotSessionStats(spinresult.slotSessionStats):obj_console.updateSlotSessionStats({addWin:lastWin,addBet:betForThisSpin}),possLinebets.length>1&&calcMaxLinebet({money:t}),possLines.length>1&&calcMaxLines({money:t});var n={prevLineIsMax:prevLines===actMaxLines&&minLines!==actMaxLines,prevLinebetIsMax:prevLinebet===actMaxLinebet&&minLinebet!==actMaxLinebet,nextLineIsMax:nextLines===actMaxLines&&minLines!==actMaxLines,nextLinebetIsMax:nextLinebet===actMaxLinebet&&minLinebet!==actMaxLinebet};alwaysGetTotalmoneyFromServer?requestSender("updateBalanceData",{}):updateFreeRoundWinAfterRound&&(n.actWin=totalFreeRoundsWin),obj_balanceManager.revealAll(),obj_console.setValues(n),isLastFreeRound&&(autospins&&(stopAutospinsAfterFreeRoundsOutro=="always"||stopAutospinsAfterFreeRoundsOutro=="once")&&(stopAutospinsAfterFreeRoundsOutro=="once"&&(stopAutospinsAfterFreeRoundsOutro="never"),stopAutospin(),obj_sound.getActiveSound("fg2")=="autospinOn"&&obj_sound.stop("fg2"),obj_sound.playGeneric("autospinOff","fg2")),actFreeRoundsEvent="outro"),finishGameRound&&!freegamesAreRunning&&actFreegame!=1&&finishGameRound(),checkForTurbospinPopup(function(){wasQuickspinRequested=!1;var t=typeof e!="undefined"&&typeof e.enforceNextAction!="undefined"?e.enforceNextAction:!1;prepareForSpin(t),onActionDone&&onActionDone()})}function checkForTurbospinPopup(e){if(showTurbospinPopup&&canTurbospinPopupBeShownAfterThisRound&&wasQuickspinRequested&&quickspinCount>=quickspinsNeededForTurbospinPopup){autospins&&stopAutospin();var t=$("#errorPopupCode .errorContainer").clone(),n=$(".popupContainer");n.hide().html(""),t.appendTo(n),t.find(".errorPopup").addClass("turbospin"),errorContent=n.find(".errorPopup.turbospin"),errorContent.find(".closeButton").remove(),errorContent.prepend('<div class="errorHeadline">'+obj_lang.game_error_turbospinTitle+"</div>"),errorContent.find(".errorText").html('<div class="text-1"><div class="text-1-1">'+obj_lang["game_error_turbospinText-1"]+"</div>"+'<div class="text-1-2">'+obj_lang["game_error_turbospinText-2"]+"</div>"+"</div>"+'<div class="text-2">'+'<span class="text-2-1">'+obj_lang["game_error_turbospinText-3"]+"</span>"+"</div>"+"<div>"+'<span class="option">'+'<span class="checkbox"></span>'+'<span class="label">'+obj_lang.game_error_turbospinTitle+"</span>"+"</span>"+"</div>"),setTimeout(function(){var e=errorContent.find(".errorText .text-2-1"),t=~~(e.width()*1.01);errorContent.find(".errorText .text-2").width(t);var n=e.height(),r=parseInt(e.css("line-height"));n>r&&errorContent.addClass("tightLayout")},0);var r=errorContent.find(".errorText .option");r.on("click",function(){r.toggleClass("checked")}),errorContent.find(".reconnectButton").html('<div class="buttonText">'+obj_lang.game_error_buttonOkay+"</div>").click(function(){r.hasClass("checked")&&obj_console.activateQuickspin(),t.remove(),showTurbospinPopup=!1,obj_clientSettings.set("showTurbospinPopup",0,!1,7);var n={};return n[obj_console.getActSpinButton()]=!0,obj_console.pulseButtons(n),obj_console.unblock(),e(),!1}),obj_console.block(),n.show(1,function(){var e={};e[obj_console.getActSpinButton()]=!0,obj_console.deactivateButtons(e)})}else e()}function displayHistoryPage(e){obj_console.block();var t=$("#errorPopupCode .errorContainer").clone(),n=$(".popupContainer");n.hide().html(""),t.appendTo(n),t.find(".errorPopup").addClass("history"+(inDemoMode?" inDemoMode":"")),n.find(".reconnectButton").remove(),popupContent=n.find(".errorPopup"),popupContent.prepend('<div class="errorInfo">'+obj_lang.game_history_info+"</div>"),popupContent.prepend('<div class="errorHeadline">'+obj_lang.game_history_headline+"</div>");if(inDemoMode)popupContent.find(".errorText").html(obj_lang.game_history_demoMode);else{var r=$("<table><thead><tr><th>"+obj_lang.game_history_time+"</th>"+"<th>"+obj_lang.game_history_bet+"</th>"+"<th>"+obj_lang.game_history_win+"</th>"+"<th>"+obj_lang.game_history_balanceAfter+"</th>"+"</tr>"+"</thead>"+"<tbody></tbody>"+"</table>");popupContent.find(".errorText").html(r);var i=r.find("tbody"),s=1;for(var o in e.entries){s++;var u=e.entries[o],a=$("<tr></tr>");typeof u["time"]=="undefined"?a.append('<td colspan="4">'+obj_lang.game_history_unfinishedRound+"</td>"):(a.append("<td>"+(new Date(u.time)).toLocaleString(typeof e.lang!="undefined"?e.lang:"en")+"</td>"),a.append("<td>"+displayMoney(u.bet)+"</td>"),a.append("<td>"+displayMoney(u.win)+"</td>"),a.append("<td>"+displayMoney(u.balanceAfter)+"</td>")),i.append(a)}popupContent.append('<div class="pagination"><div class="fl gotoButton prev"></div><div class="fr gotoButton next"></div><div class="clear errorInfo">'+e.page+"/"+e.totalPages+"</div>"+"</div>"),e.page==1&&popupContent.find(".gotoButton.prev").addClass("inactive"),e.page==e.totalPages&&popupContent.find(".gotoButton.next").addClass("inactive"),n.find(".gotoButton").on("click",function(){var t=$(this);if(t.hasClass("inactive"))return;return obj_console.block(),unblockConsoleOnServerResponse.showHistoryPage=!0,requestSender("showHistoryPage",{page:t.hasClass("next")?e.page+1:e.page-1}),!1}),setTimeout(function(){var e=obj_devConf.mode("r")?1:2,t=r.find("th"),n=parseInt(t.css("line-height"))+parseInt(t.css("padding-top"))+parseInt(t.css("padding-bottom"));n=Math.ceil(1.15*n);var o=s*n,u=e*6,a=parseInt(i.css("font-size"));while(a>u&&r.height()>o)a--,i.css("font-size",a+"px")},0)}n.find(".closeButton").on("click",function(){return t.remove(),!1}),n.show(),obj_console.unblock()}function pauseAutospin(){autospins!=0&&(areAutospinsPaused=!0)}function resumeAutospin(){areAutospinsPaused&&(areAutospinsPaused=!1,(actSlotmachineMode=="basegame-wait"||actSlotmachineMode=="freegame-wait")&&checkForSpin({withAutospinDelay:!0}))}var thiz=this,requestSender=null,obj_balanceManager=null,obj_console=null,obj_anim=null,obj_animManager=null,obj_gamble=null,obj_jackpot=null,obj_sound=null,obj_timer=null,obj_loader=null,obj_devConf=null,obj_fullscreen=null,obj_restHandler=null,obj_clientSettings=null,onActionDone=null,onNoMoney=null,onPending=null,onPendingCalled=!1,onGameEvent=null,wasGameEventRegistered_spinStart=!1,wasGameEventRegistered_spinStop=!1,unblockConsoleOnServerResponse={},inDemoMode=!1,possLines=[],linesIndex=-1,actLines=0,prevLines=0,nextLines=0,minLines=0,limitBetsToAvailableBalance=!0,totalMaxLines=0,actMaxLines=0,maxLinesPerReel=0,possLinebets=[],linebetIndex=-1,actLinebet=0,prevLinebet=0,nextLinebet=0,minLinebet=0,actMaxLinebet=0,hasBetChangeLoops=!0,maxRoundWin=0,playIntroSound=!0,introVoiceSound="introVoice",xtremeSlot=!1,allowConsoleWinAnim=typeof params.allowConsoleWinAnim=="undefined"?!0:params.allowConsoleWinAnim,layout169=!1,isFirstLoad=!0,actSlotmachineMode="",autospins=0,areAutospinsPaused=!1,autospinDelay=0,spinExecutionTime=0,enforceMinimalSpinDuration=!1,autospinOutcome={balanceChange:0,balanceChangeIncludingJackpot:0,totalWin:0,totalWinIncludingJackpot:0,freegamesReached:!1,lastBetBeforeFreegames:0,ignoreActBet:!1},showAutospinStopReasonPopup=!1,betForThisSpin=0,spinresult=null,actLinewins={},actBonusLinewins=[],actFreegameLinewins=[],lastWin=-1,maxRoundWinReached=!1,winAnimIsRunning=!1,winAnimAbortedForNextAction=!1,runningLinepings=!1,gambleOfferIsPossible=!1,inGambleMode=!1,inLadderMode=!1,noGambleRequested=!1,isCardGambleDeactivated=!1,isLadderGambleDeactivated=!1,noCardOffer=!1,noLadderOffer=!1,autoNoGambleDelay=500,actFreegame=0,maxFreegames=0,isLastFreegame=!1,freegamesAreRunning=!1,hasPauseInFreegameIntro=!1,requestFGBonusSymbol=!1,callback_afterFreegameIntroPause=null,callback_afterFreegameRetriggerPause=null,callback_onFreegameRestart=null,callback_onFreegameOutroAbort=null,featureCountdown=0,actFreeRound=0,isLastFreeRound=!1,totalFreeRoundsWin=0,updateFreeRoundWinAfterRound=!1,freeRoundsType="default",maxFreeRounds=0,freeRoundsTargetWinFactor=0,freeRoundsTargetWin=0,freeRoundsStopFeatures={},actFreeRoundsEvent=!1,dontShowFreeRoundsIntroSign=!1,useExternalFreeRoundsIntroSign=!1,dontShowFreeRoundsOutroSign=!1,dontShowWinOnFreeRoundsOutroSign=!1,freeRoundsIntroDelay=0,freeRoundsOutroDelay=0,callback_afterFreeRoundsIntro=null,stopAutospinsAfterFreeRoundsOutro="never",winRepeaterSectors=null,callback_afterWinRepeaterIntroPause=null,infoVisible=!1,ambienteSound=!1,settingsVisible=!1,rulesJSLoader=null,rulesURL=!1,loadRulesInClient=!1,callback_renderMPSign=null,callback_onRenderedPaytable=null,gameHistoryHandler=null,failedSpins=0,failedSpinRetriesBeforePopup=3,failedSpinPopupsBeforeReload=5,transform=!1,waitRotator=null,spinWaiterTimer=null,spinWaiterWasStarted=!1,useWaitingAnimation=!0,waitingAnimationDelayShort=2e3,waitingAnimationDelayLong=4e3,useFakeReels=!1,isSpinningInfinitely=!1,wasQickspinRequestedDuringInfiniteSpin=!1,canSpinBeRequestedBeforeGambleOffer=!1,wasSpinRequestedBeforeGambleOffer=!1,quickspinsNeededForTurbospinPopup=5,quickspinCount=0,wasQuickspinRequested=!1,showTurbospinPopup=!1,canTurbospinPopupBeShownAfterThisRound=!1,inMaxiplayMode=!1,isMaxiplayInfoVisible=!1,jackpotType=!1,possJackpotBets={},actJackpotLevel=0,isJackpotInfoVisible=!1,jackpotWin=0,jackpotWinCountdownDurations={0:500,1:700,2:900,3:1050,4:1300,5:1500,6:1800},jackpotWinLevel=-1,coinsAfterJackpot=0,showJackpotIntro=null,startJackpot=null,callback_afterJackpotPlayoutIntroSign=null,canJackpotAnimBeAborted=!1,isJackpotAfterWinRepeater=!1,alwaysGetTotalmoneyFromServer=!1,dontChangeConsoleButtonStates=!1,startGameRound=null,finishGameRound=null,startFullScreen=null,stopFullScreen=null,enabledFullScreen=null;(function(e){requestSender=e.requestSender,obj_console=e.console,obj_balanceManager=new BalanceManager({console:obj_console}),obj_anim=e.anim,obj_animManager=e.animManager,obj_gamble=new GambleController({sound:e.sound,animManager:e.animManager}),obj_sound=e.sound,obj_timer=Timer_getInstance(),obj_loader=e.loader,obj_devConf=e.devConf,obj_restHandler=e.restHandler,obj_clientSettings=new ClientSettings;var t=obj_clientSettings.get("showTurbospinPopup");showTurbospinPopup=t!==null?parseInt(t)>0:!0,typeof e.layout169!="undefined"&&(layout169=e.layout169),typeof e.hasPauseInFreegameIntro!="undefined"&&(hasPauseInFreegameIntro=e.hasPauseInFreegameIntro),typeof e.requestFGBonusSymbol!="undefined"&&(requestFGBonusSymbol=e.requestFGBonusSymbol),typeof e.ambienteSound!="undefined"&&(ambienteSound=e.ambienteSound),typeof e.renderMPSign!="undefined"&&(callback_renderMPSign=e.renderMPSign),typeof e.xtremeSlot!="undefined"&&(xtremeSlot=e.xtremeSlot),typeof e.onPending=="function"&&(onPending=e.onPending),typeof e.introVoiceSound!="undefined"&&(introVoiceSound=e.introVoiceSound),typeof e.hasBetChangeLoops!="undefined"&&(hasBetChangeLoops=e.hasBetChangeLoops),typeof e.startGameRound=="function"&&(startGameRound=e.startGameRound),typeof e.finishGameRound=="function"&&(finishGameRound=e.finishGameRound),typeof e.onRenderedPaytable=="function"&&(callback_onRenderedPaytable=e.onRenderedPaytable),typeof e.useWaitingAnimation!="undefined"&&(useWaitingAnimation=e.useWaitingAnimation),typeof e.useFakeReels!="undefined"&&(useFakeReels=e.useFakeReels),onActionDone=obj_restHandler.onActionDone,onNoMoney=obj_restHandler.onNoMoney,onGameEvent=obj_restHandler.onGameEvent,typeof e.rulesJSLoader=="function"&&(rulesJSLoader=e.rulesJSLoader),typeof e.rulesURL!="undefined"&&(rulesURL=e.rulesURL),!rulesJSLoader&&!rulesURL&&$(".rulesButton").remove(),loadRulesInClient=e.loadRulesInClient,typeof e.startFullScreen=="function"&&(startFullScreen=e.startFullScreen),typeof e.stopFullScreen=="function"&&(stopFullScreen=e.stopFullScreen),typeof e.enabledFullScreen=="function"&&(enabledFullScreen=e.enabledFullScreen);if(xtremeSlot)switch(e.reeltiming){case"moneynormal":case"moneyslow1":case"moneyslow2":autospinDelay=800;break;default:autospinDelay=533}else switch(e.reeltiming){case"turbo":autospinDelay=500;break;case"normal":autospinDelay=typeof e.autospinDelay!="undefined"?e.autospinDelay:333;break;case"slow1":autospinDelay=466;break;case"slow2":autospinDelay=466;break;case"moneynormal":autospinDelay=800;break;case"moneyslow1":autospinDelay=800;break;case"moneyslow2":autospinDelay=800}playIntroSound=obj_devConf.playIntroSound(),transform=obj_devConf.getSupportedTransform(),obj_fullscreen=new fullScreenHandler,e.jackpotType&&(jackpotType=e.jackpotType,$("#jackpotBonusFlySymbol").addClass(obj_console.type()),e.highlightJackpotBet&&$(".jackpotContainer .jackpotInfoContainer").addClass("highlightJackpotBet"),e.showInfoDuringJackpotChance&&$(".jackpotContainer .jpChance").addClass("showInfoDuringJackpotChance"),e.jackpotType&&$(".headlineContainer,.portraitHeadlineContainer").append('<div class="jackpotLogo"></div>'),obj_jackpot=new JackpotController({jackpotType:e.jackpotType,sound:e.sound,animManager:e.animManager,pixiManager:e.pixiManager,pixiAssetPath:e.jackpotAssetPath,loader:obj_loader,conf:obj_devConf,symAnimHandler:obj_anim.getAnimHandler(),onInit:function(){var t=obj_console.getActSpinButton();if(t!="spin"){var n={};n[t]=!0,obj_console.hideButtons(n)}obj_console.deactivateButtons({spin:!0}),obj_console.deactivateAllVisibleButtons({stopautospin:!0}),actFreegame&&!spinresult||isJackpotAfterWinRepeater?obj_console.showUserInfo({type:"none"}):obj_console.getActUserInfo()=="none"&&spinresult&&spinresult.winCoins&&obj_console.showUserInfo({type:"win",value:spinresult.winCoins}),typeof e.onJackpotFeatureStart=="function"&&e.onJackpotFeatureStart(),obj_anim.startJackpot(),canJackpotAnimBeAborted=!1,obj_console.unblock()},onPlayoutIntroSign:function(e){requestSender("switchToJackpotPlayout",{}),typeof e=="function"&&(callback_afterJackpotPlayoutIntroSign=e),obj_console.pulseButtons({spin:!0}),obj_console.unblock(),obj_console.isFeatureCountdownActivated()&&autospins?startFeatureCountdown():obj_console.showUserInfo({type:"pleasePressSpin"}),canJackpotAnimBeAborted=!1},onPlayoutStart:function(){actSlotmachineMode=actFreegame||isJackpotAfterWinRepeater?"jackpot-playout-freegame":"jackpot-playout",resetConsole(),obj_console.unblock(),canJackpotAnimBeAborted=!1},onEnd:function(e){jackpotWinLevel=typeof e!="undefined"?e:-1,obj_console.block(),unblockConsoleOnServerResponse.jackpotResult=!0,autospinOutcome.totalWin=autospinOutcome.totalWinIncludingJackpot,autospinOutcome.balanceChange=autospinOutcome.balanceChangeIncludingJackpot;if(useFakeReels&&!actFreegame&&!isLastFreeRound&&!maxRoundWinReached)if(autospins){var t=obj_console.isNextAutospinPossible(autospinOutcome);t?startInfiniteSpins():obj_console.clickButton("stopautospin")}else obj_console.activateButtons({spin:!0}),canSpinBeRequestedBeforeGambleOffer=!0,obj_console.unblock();requestSender("finishJackpot",{}),obj_console.onJackpotEnd(),obj_anim.stopJackpot(actFreegame),canJackpotAnimBeAborted=!1},onAbortableAnim:function(){var e={spin:!0};autospins&&(e.stopautospin=!0),obj_console.activateButtons(e),obj_console.unblock(),canJackpotAnimBeAborted=!0
},updateConsole:function(e){switch(e.type){case"empty":obj_console.showUserInfo({type:"none"});break;case"points":obj_console.showUserInfo({type:"jackpotWin",value:e.value});break;case"bonusPoints":obj_console.showUserInfo({type:"jackpotBonus",value:e.value})}}}))})(params),this.checkAvailableButtons=function(){var e=obj_console.getVisibleButtons(),t=obj_balanceManager.getFull(),n={},r={},i={},s=!1;for(var o in e)switch(o){case"maxbet":actFreeRound?r[o]=!0:!actFreegame&&obj_console.getTotalBet(minLinebet,minLines)<=t?n[o]=!0:(r[o]=!0,actFreegame||(s=!0));break;case"spin":infoVisible||settingsVisible||actFreeRoundsEvent?n[o]=!0:actFreeRound||actFreegame||obj_console.getTotalBet(actLinebet,actLines)<=t?i[o]=!0:(r[o]=!0,s=!0);break;case"autospin":infoVisible||settingsVisible?r[o]=!0:actFreeRound||actFreegame||obj_console.getTotalBet(actLinebet,actLines)<=t?n[o]=!0:(r[o]=!0,s=!0)}!actFreegame&&!actFreeRound&&(obj_console.getTotalBet(minLinebet,minLines)>t?(s=!0,r.linebet=!0,r.lines=!0,r.maxbet=!0):(n.linebet=!0,n.lines=!0)),obj_console.activateButtons(n),obj_console.deactivateButtons(r),obj_console.pulseButtons(i),s?(stopAutospin(),obj_console.showUserInfo({type:"notEnoughCoins",rememberLastInfo:!0}),calcMaxLinebet(),calcMaxLines(),!actMaxLines&&!actMaxLinebet?obj_console.setValues({prevLineIsMax:!0,prevLinebetIsMax:!0,nextLineIsMax:!0,nextLinebetIsMax:!0}):obj_console.setValues({prevLineIsMax:!actMaxLines||prevLines===actMaxLines&&minLines!==actMaxLines,prevLinebetIsMax:!actMaxLinebet||prevLinebet===actMaxLinebet&&minLinebet!==actMaxLinebet,nextLineIsMax:!actMaxLines||nextLines===actMaxLines&&minLines!==actMaxLines,nextLinebetIsMax:!actMaxLinebet||nextLinebet===actMaxLinebet&&minLinebet!==actMaxLinebet}),onNoMoney&&onNoMoney()):obj_console.restoreLastUserInfo()},this.display=function(e){for(var t in e){var n=e[t];typeof unblockConsoleOnServerResponse[n.type]!="undefined"&&unblockConsoleOnServerResponse[n.type]&&(obj_console.unblock(),delete unblockConsoleOnServerResponse[n.type]);switch(n.type){case"lines":n.value!==!1&&setLines(n.value),obj_console.updateAutospinLossLimit(),actSlotmachineMode=="basegame-wait"?thiz.checkAvailableButtons():!infoVisible&&!settingsVisible&&(actSlotmachineMode=="gamble-offer-start"||actSlotmachineMode=="gamble-offer-continue")&&checkForMaxWinCapping();break;case"possLinebets":setPossLinebets(n.value,actLinebet>0?actLinebet:0,!0);break;case"linebet":n.value!==!1&&setLinebet(n.value),obj_console.updateAutospinLossLimit(),actSlotmachineMode=="basegame-wait"?thiz.checkAvailableButtons():!infoVisible&&!settingsVisible&&(actSlotmachineMode=="gamble-offer-start"||actSlotmachineMode=="gamble-offer-continue")&&checkForMaxWinCapping();break;case"money":var r=parseInt(n.value.totalCoins);spinresult&&(spinresult.playerCoins=r),typeof n.value.actCoins!="undefined"&&(r=parseInt(n.value.actCoins)),obj_balanceManager.set(r,!1,!1),obj_balanceManager.showVisible(),!infoVisible&&!settingsVisible&&!dontChangeConsoleButtonStates&&actSlotmachineMode=="basegame-wait"&&thiz.checkAvailableButtons();break;case"totalmoney":obj_balanceManager.setCasinoBalance(parseInt(n.value)),typeof n.displayInConsole!="undefined"&&obj_balanceManager.displayCasinoBalance(n.displayInConsole);break;case"actWin":obj_console.setValues({actWin:parseInt(n.value)}),!infoVisible&&!settingsVisible&&thiz.checkAvailableButtons();break;case"spinresult":obj_timer.has("startInfiniteSpins")&&obj_timer.remove("startInfiniteSpins"),abortWaitingAnimation(),failedSpins=0,spinresult=n.value;var i=Date.now();i>=spinExecutionTime?processSpinresult():obj_timer.add({name:"processSpinresult",time:spinExecutionTime-i,func:processSpinresult});break;case"spinFailed":obj_timer.has("startInfiniteSpins")&&obj_timer.remove("startInfiniteSpins"),abortWaitingAnimation(),wasGameEventRegistered_spinStart&&!wasGameEventRegistered_spinStop&&onGameEvent&&(wasGameEventRegistered_spinStop=!0,onGameEvent("spinStop")),useFakeReels&&isSpinningInfinitely&&(obj_anim.quickStop(),isSpinningInfinitely=!1);if(n.value==1){var s=!1;typeof n.totalmoney!="undefined"?obj_balanceManager.setCasinoBalance(parseInt(n.totalmoney)):s=!0,obj_balanceManager.set(parseInt(n.money),s),obj_balanceManager.revealAll(),resetAfterFailedSpins(),!infoVisible&&!settingsVisible&&thiz.checkAvailableButtons()}else{var o=resetAfterFailedSpins,u={};n.value==3?(u.buttonType="",u.errorText=obj_lang.game_error_alreadyReconnected,o=obj_restHandler.onFatalError):n.value==4&&(u.buttonType="Close",u.errorText=obj_lang.game_error_gamingLimitReached,o=obj_restHandler.onFatalError),thiz.showErrorPopup(o,u)}break;case"generalServerError":thiz.showErrorPopup(obj_console.unblock);break;case"maxiplay":(actSlotmachineMode=="gamble-offer-start"||actSlotmachineMode=="gamble-offer-continue")&&checkForMaxWinCapping(),inMaxiplayMode=n.value,inMaxiplayMode?(showMaxiplayInfo(),$(".mpLogoBox .mpActive").show(),obj_devConf.playSymbolAnims()&&obj_anim.playExtraAnimations({mpLogo:!0}),obj_console.switchOnMaxiplay(),thiz.checkAvailableButtons()):(closeMaxiplayInfo(),obj_devConf.playSymbolAnims()&&obj_anim.abortExtraAnimations({mpLogo:!0}),obj_console.switchOffMaxiplay(),thiz.checkAvailableButtons(),$(".mpLogoBox .mpActive").hide()),obj_console.updateAutospinLossLimit();break;case"closeJackpotIntro":typeof n.value.bet!="undefined"&&(updateJackpotLevel(n.value.bet),obj_console.updateJackpotLevel(actJackpotLevel)),closeJackpotIntro();break;case"jackpotBet":var a=n.value;updateJackpotLevel(a.bet),(typeof a.noPopup=="undefined"||!a.noPopup)&&showJackpotBetInfo(a),obj_console.updateJackpotLevel(actJackpotLevel),obj_console.updateAutospinLossLimit(),obj_console.unblock(),thiz.checkAvailableButtons();break;case"possJackpotBets":updatePossJackpotBets(n.value);break;case"jackpotResult":typeof n.value.changeSpinresult!="undefined"&&(spinresult=n.value.changeSpinresult),startJackpot=null,isJackpotAfterWinRepeater=!1,coinsAfterJackpot=n.value.playerCoins,obj_balanceManager.set(coinsAfterJackpot,!0),jackpotWin=n.value.jackpotWin,winAnimAbortedForNextAction=null;if(actFreegame){if(jackpotWin){obj_console.deactivateButtons({spin:!0}),obj_console.block(),obj_console.setValues({win:jackpotWin}),obj_console.showUserInfo({type:"win",value:jackpotWin});var f=Date.now()+500,l=typeof jackpotWinCountdownDurations[jackpotWinLevel]!="undefined"?jackpotWinCountdownDurations[jackpotWinLevel]:1e3,c=jackpotWin,h=spinresult&&spinresult.winCoins?spinresult.winCoins:0,p=c-h,d=h?function(){}:function(){obj_console.showUserInfo({type:"freegame"})},v=null;isLastFreegame?v=function(){jackpotWin=0,typeof n.value.changeSpinresult!="undefined"?onFinishedFreeGame(n.value.changeSpinresult):onFinishedFreeGame()}:v=function(){d(),obj_console.unblock(),checkForGambleOffer({lastWin:jackpotWin})},jackpotWinLevel!==!1?obj_animManager.add("stopTakeWinOrGambleOfferBGSound",function(){return Date.now()<f?!0:(obj_console.animateWinCounter({name:"win",start:c,end:h,duration:l,onFinished:v}),obj_balanceManager.reveal(p,!0,l),!1)}):v();return}if(isLastFreegame){onFinishedFreeGame();return}obj_console.showUserInfo({type:"freegame",value:actFreegame-1})}else jackpotWin&&(checkAvailableGambleButtons({gambleAllowed:n.value.gambleAllowed,newMaxGambleLadderBet:n.value.newMaxGambleLadderBet,newMaxGambleCardBet:n.value.newMaxGambleCardBet,win:jackpotWin,winFactor:jackpotWin/obj_console.getValue("totalbet")}),obj_console.setValues({win:jackpotWin}),obj_console.showUserInfo({type:"win",value:jackpotWin}),gambleOfferIsPossible=!autospins&&!maxRoundWinReached);if(autospins){var m=obj_console.isNextAutospinPossible(autospinOutcome);m||obj_console.clickButton("stopautospin")}obj_console.unblock(),n.value.noGamblingAfterJackpot!=="undefined"&&n.value.noGamblingAfterJackpot&&(gambleOfferIsPossible=!1),checkForGambleOffer({playerCoins:coinsAfterJackpot,lastWin:jackpotWin});break;case"info":$(".popupContainer").html(""),$(".container").hasClass("portrait")&&$(".infoContainer .infoPopup").addClass("portraitInfo");var g=!actFreegame&&obj_console.getTotalBet(minLinebet,minLines)<=obj_balanceManager.getFull();n.isSettingsSite?($(".infoContainer").html(n.value),settingsVisible=!0,obj_console.switchToInfoMode("settings",actSlotmachineMode,g)):(jackpotType&&$(".infoContainer").attr("data-jackpotlevel",actJackpotLevel),infoVisible=!0,obj_console.block(),obj_restHandler.renderPaytable({onRendered:callback_onRenderedPaytable,onFinished:function(){obj_console.unblock()},paytableHTML:n.value,resolution:obj_devConf.mode("r")==0?1280:640,maxLines:totalMaxLines}),obj_console.switchToInfoMode("paytable",actSlotmachineMode,g)),obj_console.assignSetupButton("space",$(".infoContainer .setting1")),obj_console.assignSetupButton("quickspin",$(".infoContainer .setting2")),obj_console.assignSetupButton("featureCountdown",$(".infoContainer .setting3")),obj_console.assignSetupButton("leftHandMode",$(".infoContainer .setting4")),isMaxiplayInfoVisible&&closeMaxiplayInfo(),isJackpotInfoVisible&&closeJackpotBetInfo();break;case"hideInfoSite":closeInfoSite(n.value.section);break;case"showHistoryPage":if(!n.value)break;displayHistoryPage(n.value);break;case"initGambleCard":case"initGambleLadder":inGambleMode=!0;var y=n.value,b=typeof y.dontStart!="undefined"&&y.dontStart;b&&obj_console.block(),obj_console.showUserInfo({type:"none"}),y.useGambleLadder=n.type=="initGambleLadder"?!0:!1,y.useGambleLadder?(inLadderMode=!0,$(".gambleBox.gambleLadder").removeClass("hidden").show(),$(".gambleCheats.ladderCheats").show(),obj_console.enableLadderSplitWinButton(y.currentStep>1),actSlotmachineMode="ladder-wait-firstTime",resetConsole()):(inLadderMode=!1,$(".gambleBox.gambleCard").removeClass("hidden").show(),$(".gambleCheats.cardCheats").show(),actSlotmachineMode="gamble-wait",resetConsole(),y.bet<=1&&obj_console.deactivateButtons({splitwin:!0})),$(".slotCheats,.freeRoundCheats").hide(),jackpotType&&$(".jackpotCheats").hide(),y.onFinishedRound=finishGambleRound,y.activateSplitWinButton=function(){obj_console.activateButtons({splitwin:!0})},y.activateTakeWinButton=function(){obj_console.activateButtons({takewin:!0})},y.deactivateGreenButtons=function(){obj_console.deactivateButtons({takewin:!0,splitwin:!0})},y.deactivateLadderButton=function(){obj_console.deactivateButtons({ladderstep:!0})},y.unblockConsole=function(){obj_console.isBlocked()&&obj_console.unblock()},y.onInited=function(){obj_console.isBlocked()&&obj_console.unblock(),b&&requestSender("initComplete",{})},obj_gamble.init(y);break;case"gambleCardResult":case"gambleLadderResult":var w=n.value.bet,E=obj_gamble.getMaxBet(),S=obj_gamble.getMaxLadderBet(),x=obj_gamble.getMaxGambles();inGambleMode=(!x||n.value.actGamble<x)&&w>0&&(!inLadderMode&&(!E||w<=E)||inLadderMode&&(!S||w<S))&&(typeof n.value.quitGamble=="undefined"||!n.value.quitGamble);var T=!inGambleMode;n.value.showDisplayInfo=w>0&&T?function(){var e=w+n.value.collectedWin;obj_console.showUserInfo({type:"win",value:e})}:function(){obj_console.showUserInfo({type:"none"})},obj_console.enableLadderSplitWinButton(!inLadderMode||n.value.currentStep>1),inLadderMode?(actSlotmachineMode=T?"ladder-finalresult":"ladder-result",resetConsole(),obj_gamble.processGambleLadderResult(n.value)):(actSlotmachineMode=T?"gamble-finalresult":"gamble-result",resetConsole(),obj_gamble.processGambleCardResult(n.value)),w||obj_console.deactivateButtons({takewin:!0}),typeof n.value.maxWinReached!="undefined"&&(maxRoundWinReached=n.value.maxWinReached);break;case"takeGambleWin":$(".gambleBox").not(".hidden").addClass("hidden"),$(".gambleCheats").hide(),$(".slotCheats").show(),actFreeRound||$(".freeRoundCheats").show(),jackpotType&&$(".jackpotCheats").show(),obj_gamble.close();var N={playerCoins:parseInt(n.value.playerCoins),lastWin:n.value.gambleWin?n.value.gambleWin:0};typeof n.value.slotSessionStats!="undefined"&&(N.slotSessionStats=n.value.slotSessionStats),obj_console.unblock(),checkForMaxWinCapping(N),ambienteSound&&obj_anim.playAmbienteSound();break;case"splitGambleWin":obj_console.unblock(),inLadderMode?(obj_console.enableLadderSplitWinButton(n.value.currentStep>1),n.value.currentStep<=1&&obj_console.deactivateButtons({splitwin:!0}),obj_gamble.splitLadderWin(n.value)):(n.value.bet<=1&&obj_console.deactivateButtons({splitwin:!0}),obj_gamble.splitCardWin(n.value));break;case"noGamble":obj_console.unblock(),checkForMaxWinCapping(n.value);break;case"restoreAfterWin":obj_console.clickButton("spin",{noSound:!0});break;case"restoreFGintro":spinresult=n.value,autospins||obj_console.deactivateButtons({autospin:!0}),startFreeGames(!0,spinresult.wonFreegames);break;case"fgBonusSymbol":callback_afterFreegameIntroPause(n.value);break;case"makeNewRequest":var C=n.value.requestName,k=typeof n.value.requestParams!="undefined"?n.value.requestParams:{};typeof n.value.sendCallback!="undefined"&&n.value.sendCallback?requestSender(C,k,onSpinFailed):requestSender(C,k);break;case"startWinRepeater":callback_afterWinRepeaterIntroPause(n.value);break;case"alert":alert(n.value)}}},this.showErrorPopup=function(e,t){typeof t=="undefined"&&(t={});var n=$("#errorPopupCode .errorContainer").clone();typeof t.errorText!="undefined"&&n.find(".errorText").html(t.errorText),typeof t.buttonType!="undefined"&&(t.buttonType==0?n.find(".reconnectButton").remove():obj_lang["game_error_button"+t.buttonType]!=="undefined"&&n.find(".reconnectButton .buttonText").text(obj_lang["game_error_button"+t.buttonType])),typeof t.type!="undefined"&&n.addClass(t.type),n.appendTo($(".popupContainer")),n.find(".retry").click(function(){return n.remove(),typeof e=="function"&&e(),typeof t.onButtonClick=="function"&&t.onButtonClick(),!1}),typeof t.onOpen=="function"&&setTimeout(t.onOpen,0)},this.dontGamble=function(){(actSlotmachineMode=="gamble-offer-start"||actSlotmachineMode=="gamble-offer-continue")&&obj_console.clickButton("nogamble",{noSound:!0})},this.allowManualReelsMode=function(){$("#cheatModus option#manualReels").prop("disabled",!1)},this.forbidManualReelsMode=function(){$("#cheatModus option#manualReels").prop("disabled",!0)},this.pauseSlot=function(){pauseAutospin(),obj_console.block()},this.resumeSlot=function(){resumeAutospin(),obj_console.unblock()},this.getState=function(){return actSlotmachineMode},this.onFreeRoundsIntroClose=function(){actFreeRoundsEvent=!1,actSlotmachineMode="basegame-wait",resetConsole(),typeof callback_afterFreeRoundsIntro=="function"&&callback_afterFreeRoundsIntro()},this.init=function(e){var t=typeof e.dontStart!="undefined"&&e.dontStart,n=typeof e.dontStartJackpot!="undefined"&&e.dontStartJackpot;typeof e.useMinimalSpinDuration!="undefined"&&(enforceMinimalSpinDuration=e.useMinimalSpinDuration),typeof e.maxWin!="undefined"&&(maxRoundWin=e.maxWin),limitBetsToAvailableBalance=typeof e.limitBetsToAvailableBalance=="undefined"||e.limitBetsToAvailableBalance;for(var r in e.possLines)possLines[r]=e.possLines[r];actLines=e.lines,minLines=possLines[0],totalMaxLines=possLines[possLines.length-1],calcMaxLines({linebet:e.linebet,money:e.money}),maxLinesPerReel=e.maxLinesPerReel,actLinebet=e.linebet,setPossLinebets(e.possLinebets,e.linebet,!1,!0),calcMaxLinebet({lines:e.lines,money:e.money}),typeof e.actFreegame!="undefined"&&(actFreegame=e.actFreegame),typeof e.maxFreegames!="undefined"&&(maxFreegames=e.maxFreegames),typeof e.isLastFreegame!="undefined"&&(isLastFreegame=e.isLastFreegame),typeof e.spinresult!="undefined"&&typeof e.spinresult.winRepeater!="undefined"&&e.spinresult.winRepeater&&(winRepeaterSectors=e.spinresult.winRepeater,spinresult=e.spinresult),typeof e.actFreeRound!="undefined"&&(actFreeRound=e.actFreeRound),typeof e.freeRoundsType!="undefined"&&(freeRoundsType=e.freeRoundsType),typeof e.maxFreeRounds!="undefined"&&(maxFreeRounds=e.maxFreeRounds),actFreeRound&&freeRoundsType!=="default"&&(maxFreeRounds=1),typeof e.freeRoundsTargetWinFactor!="undefined"&&(freeRoundsTargetWinFactor=e.freeRoundsTargetWinFactor),typeof e.freeRoundsTargetWin!="undefined"&&(freeRoundsTargetWin=e.freeRoundsTargetWin),typeof e.freeRoundsStopFeatures!="undefined"&&(freeRoundsStopFeatures=e.freeRoundsStopFeatures),actFreeRound==1&&!actFreegame&&winRepeaterSectors===null&&(actFreeRoundsEvent="intro"),actFreeRound&&winRepeaterSectors!==null&&(isLastFreeRound=typeof spinresult.resetAfterFreeRounds!="undefined"),typeof e.dontShowFreeRoundsIntroSign!="undefined"&&(dontShowFreeRoundsIntroSign=e.dontShowFreeRoundsIntroSign),typeof e.useExternalFreeRoundsIntroSign!="undefined"&&(useExternalFreeRoundsIntroSign=e.useExternalFreeRoundsIntroSign),typeof e.dontShowFreeRoundsOutroSign!="undefined"&&(dontShowFreeRoundsOutroSign=e.dontShowFreeRoundsOutroSign),typeof e.dontShowWinOnFreeRoundsOutroSign!="undefined"&&(dontShowWinOnFreeRoundsOutroSign=e.dontShowWinOnFreeRoundsOutroSign),typeof e.freeRoundsIntroDelay!="undefined"&&(freeRoundsIntroDelay=e.freeRoundsIntroDelay),typeof e.freeRoundsOutroDelay!="undefined"&&(freeRoundsOutroDelay=e.freeRoundsOutroDelay),typeof e.stopAutospinsAfterFreeRoundsOutro!="undefined"&&(stopAutospinsAfterFreeRoundsOutro=e.stopAutospinsAfterFreeRoundsOutro);var i={linebet:actFreeRound&&typeof e.freeRoundBet!="undefined"?e.freeRoundBet:e.linebet,prevLinebetIsMax:prevLinebet===actMaxLinebet&&minLinebet!=actMaxLinebet,nextLinebetIsMax:nextLinebet===actMaxLinebet&&minLinebet!=actMaxLinebet,lines:e.lines,prevLineIsMax:prevLines===actMaxLines&&minLines!==actMaxLines,nextLineIsMax:nextLines===actMaxLines&&minLines!==actMaxLines,linesForOneLinebet:typeof e.linesForOneLinebet!="undefined"?e.linesForOneLinebet:1,linesAreFixed:possLines.length==1,linebetsAreFixed:possLinebets.length==1,autospins:e.autospinConfig,unlimitedAutospins:e.unlimitedAutospins,hasMaxiplayFeature:typeof e.hasMaxiplayFeature!="undefined"&&e.hasMaxiplayFeature,pulseInterval:e.gamblePulseInterval,useGambleLadder:e.useGambleLadder,useGambleCard:e.useGambleCard,useUniqueStopButton:e.useUniqueStopButton,block:t,enforceMinimalSpinDuration:enforceMinimalSpinDuration,inFreeRoundMode:actFreeRound,loader:obj_loader,hasBetChangeLoops:hasBetChangeLoops,alwaysShowSlotname:typeof e.alwaysShowSlotname!="undefined"&&e.alwaysShowSlotname};obj_balanceManager.set(e.money,!0);var s=typeof e.totalmoney!="undefined";s&&obj_balanceManager.setCasinoBalance(e.totalmoney),obj_balanceManager.displayCasinoBalance(s),typeof e.getTotalmoneyFromServer!="undefined"&&(alwaysGetTotalmoneyFromServer=e.getTotalmoneyFromServer),typeof e.areAutospinsForbidden!="undefined"&&(i.areAutospinsForbidden=e.areAutospinsForbidden),typeof e.defaultAutospinPopupEntry!="undefined"&&(i.defaultAutospinPopupEntry=e.defaultAutospinPopupEntry),typeof e.resetAutospinPopupOnClose!="undefined"&&(i.resetAutospinPopupOnClose=e.resetAutospinPopupOnClose),typeof e.isAdvancedAutospinPopupShownByDefault!="undefined"&&(i.isAdvancedAutospinPopupShownByDefault=e.isAdvancedAutospinPopupShownByDefault),typeof e.canAdvancedAutospinPopupModusBeChanged!="undefined"&&(i.canAdvancedAutospinPopupModusBeChanged=e.canAdvancedAutospinPopupModusBeChanged),typeof e.allowAutospinPopupInFreeRounds!="undefined"&&(i.allowAutospinPopupInFreeRounds=e.allowAutospinPopupInFreeRounds),typeof e.requireAutospinLossLimit!="undefined"&&(i.requireAutospinLossLimit=e.requireAutospinLossLimit),typeof e.requireAutospinWinLimit!="undefined"&&(i.requireAutospinWinLimit=e.requireAutospinWinLimit);if(typeof e.requireAutospinLossLimit!="undefined"&&e.requireAutospinLossLimit||typeof e.requireAutospinWinLimit!="undefined"&&e.requireAutospinWinLimit)stopAutospinsAfterFreeRoundsOutro="always";typeof e.showAutospinStopReasonPopup!="undefined"&&(showAutospinStopReasonPopup=e.showAutospinStopReasonPopup),typeof e.maxPercentageAutospinLossLimit!="undefined"&&(i.maxPercentageAutospinLossLimit=e.maxPercentageAutospinLossLimit),typeof e.maxAutospinWinLimit!="undefined"&&(i.maxAutospinWinLimit=e.maxAutospinWinLimit),typeof e.advancedAutospinDefaultValues!="undefined"&&(i.advancedAutospinDefaultValues=e.advancedAutospinDefaultValues),typeof e.showSlotSessionStatistics!="undefined"&&(i.showSlotSessionStatistics=e.showSlotSessionStatistics),typeof e.slotSessionStats!="undefined"&&(i.slotSessionStats=e.slotSessionStats),actFreeRound&&typeof e.freeRoundWin!="undefined"&&(totalFreeRoundsWin=e.freeRoundWin,i.actWin=totalFreeRoundsWin),actFreegame&&(i.actWin=e.freegameWin),$(".mainControlBox").css("opacity",0).removeClass("hidden").show();var o=0;jackpotType&&typeof e.jackpotGame!="undefined"&&(possJackpotBets=e.jackpotGame.possBets,updateJackpotLevel(e.jackpotGame.actBet),i.jackpotType=jackpotType,i.actJackpotLevel=actJackpotLevel,i.jackpotBets=possJackpotBets,i.closeJackpotPopup=closeJackpotBetInfo,o=e.jackpotGame.actStep,o?(obj_console.showUserInfo({type:"none"}),startJackpot=function(){obj_jackpot.init(e.jackpotGame,actJackpotLevel,actFreegame)},updateFreeRoundWinAfterRound=actFreeRound&&!actFreegame):e.showJackpotIntro&&!actFreegame&&!winRepeaterSectors&&!n&&(obj_console.showUserInfo({type:"none"}),showJackpotIntro=function(){dontChangeConsoleButtonStates=!0,obj_console.deactivateAllVisibleButtons(),obj_jackpot.showIntroSign({sendCloseRequest:function(e){actFreeRound&&(e.activateJackpot=0),obj_console.block(),unblockConsoleOnServerResponse.closeJackpotIntro=!0,requestSender("closeJackpotIntro",e)},close:closeJackpotIntro,betLevel:actJackpotLevel}),obj_timer.add({name:"closeJackpotIntro",time:6e4,func:function(){$(".jackpotContainer .jackpotInfoContainer .settingCheckbox").hasClass("active")&&(obj_console.block(),unblockConsoleOnServerResponse.closeJackpotIntro=!0,requestSender("closeJackpotIntro",{activateJackpot:0,forbidIntro:1})),closeJackpotIntro()}})})),playIntroSound&&actFreegame==0&&winRepeaterSectors==null&&o==0&&!t&&obj_sound.playBgSound(introVoiceSound),obj_console.init(i),obj_balanceManager.revealAll(),typeof e.hasMaxiplayFeature!="undefined"&&e.hasMaxiplayFeature&&typeof e.maxiplay!="undefined"&&e.maxiplay&&(inMaxiplayMode=!0,obj_console.switchOnMaxiplay());if(typeof e.linemarkersContent!="undefined"){$(".gameContainer .linesChoiceBox").html(e.linemarkersContent),typeof e.linemarkersContentX!="undefined"&&$(".gameContainer .linesChoiceBoxX").html(e.linemarkersContentX),showAvailableLines();for(var u=1;u<=totalMaxLines;u++)$(".linemarkerClickareasBox .linemarkerClickarea.lines"+u).removeClass("deactivated")}(totalMaxLines<=10||minLines==totalMaxLines||maxLinesPerReel&&maxLinesPerReel<=10)&&$(".linemarkerClickareasBox").remove(),typeof e.inDemoMode!="undefined"&&e.inDemoMode?(inDemoMode=!0,$(".demoModeSign").html(obj_lang.game_slotmachine_demoMode).show()):(inDemoMode=!1,$(".demoModeSign").remove()),obj_console.type()=="mobile"&&$(".gameContainer .linesChoiceBox .linemarkerClickareasBox").remove(),typeof e.useGambleCard!="undefined"&&(isCardGambleDeactivated=!e.useGambleCard),typeof e.useGambleLadder!="undefined"&&(isLadderGambleDeactivated=!e.useGambleLadder),typeof e.maxGambleBet!="undefined"&&obj_gamble.setMaxBet(e.maxGambleBet),typeof e.maxGambleTries!="undefined"&&obj_gamble.setMaxGambles(e.maxGambleTries),typeof e.maxGambleLadderBet!="undefined"&&obj_gamble.setMaxLadderBet(e.maxGambleLadderBet),typeof e.showClock!="undefined"&&e.showClock&&obj_restHandler.showClock(),typeof e.showRulesButton!="undefined"&&!e.showRulesButton&&$(".rulesButton").remove(),typeof e.hasGameHistoryButton!="undefined"&&e.hasGameHistoryButton?($(".rulesButton").addClass("hasHistoryButton"),typeof e.gameHistoryHandler!="undefined"&&(gameHistoryHandler=e.gameHistoryHandler)):$(".historyButton").remove(),setConsoleEventListeners(),initEventListeners(),obj_anim.initReels(e,function(){prepareForSpin(!1,n)}),typeof e.useTurbospinPopup!="undefined"&&!e.useTurbospinPopup&&(showTurbospinPopup=!1),obj_console.isQuickspinActivated()&&(showTurbospinPopup=!1),t&&requestSender("initComplete",{}),requestSender("triggerGameEvent",{type:"quickspin",value:obj_console.isQuickspinActivated()})},this.onRandomRetrigger=function(){dimOtherLinemarkers(0),actSlotmachineMode="freegame-beforeIntro",resetConsole(),obj_console.showUserInfo({type:"win",value:obj_console.getValue("actWin")}),actFreeRound&&obj_console.setValues({actWin:totalFreeRoundsWin}),obj_console.block()},this.restartFreeGame=function(e){callback_onFreegameRestart=function(){showAvailableLines(),e()},actFreegame=spinresult.actFreegame,maxFreegames=spinresult.maxFreegames,obj_console.setValues({actWin:spinresult.freegameWin}),obj_anim.restartFreeGame(),actSlotmachineMode="freegame-wait",resetConsole(),obj_console.deactivateButtons({autospin:!0}),obj_console.isFeatureCountdownActivated()&&autospins?startFeatureCountdown():obj_console.showUserInfo({type:"pleasePressSpin"}),obj_console.unblock()}};