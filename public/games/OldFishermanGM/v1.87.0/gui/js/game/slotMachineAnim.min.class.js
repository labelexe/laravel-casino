/**
 * class for handling animations of a slot machine
 * @copyright LoCoNET GmbH 2014-06-30
 */function SlotMachineAnim(e){function lt(e){var t=N[e];if(P&&t==c-1&&E&&S){for(var n in S)if(S[n]){var r="symbolTeaser"+n;ut&&h.isFreeGame&&(r+="fg"),i.abortAnimation(r)}S=!1}}function ct(e){var t=N[e];if(!P&&Y.rss)Y.rss({actReel:t,spinresult:h,animHandler:X,playAnim:i.playAnimation,symbolTeaserPos:tt,hasAmbiente:nt,setTeaserPlaying:function(e){z&&(S||(S={}),S[e]=!0),F=Date.now()+H}});else if(!P&&tt&&tt[t]){var n=tt[t][0],s=1;for(var u=0;u<t;++u)tt[u]&&tt[u][0]==n&&++s;r.play({playwhat:"symbolTeaser"+n+"x"+s,soundLine:"fg"+V[s-1]}),F=Date.now()+H;if(E&&z){var a=tt[t][1],f="symbolTeaser"+n;ut&&h.isFreeGame&&(f+="fg"),i.playAnimation(f,[{x:et*t,y:Z*(a-1),elem:"#reel_"+o.getReelIdx(t)+"_"+(l+1-a)}],{loop:!1}),S||(S={}),S[n]=!0}}else P?t==c-1&&r.play({playwhat:!rt||W?"reelstop":"reelstop3",soundLine:"fg1"}):r.play({playwhat:W||nt&&!rt||R==1||R==2?"reelstop":"reelstop"+(t+1),soundLine:"fg1"});P||t==c-1?((!nt||W)&&(!h||!h.isFreeGame)&&r.stopBgSound(),g&&(o.stopAttention(),g=!1),m&&((nt||h.isFreeGame&&h.winCoins==0)&&r.unmuteBgSound(),r.getActiveSound("fg2")==="attentionSpin"&&r.stop("fg2"),m=!1),w&&(o.stopSpecialAttention(),w=!1),b&&((nt||h.isFreeGame&&h.winCoins==0)&&r.unmuteBgSound(),r.stop("fg2"),b=!1)):h&&(h.attentionSpins&&h.attentionSpins[T[t+1]]?(m?y&&r.play({soundLine:"fg2",playwhat:"attentionSpin"}):(h.isFreeGame?r.muteBgSound():nt?h.isFreeGame||(Et(),r.muteBgSound()):r.stopBgSound(),r.play({soundLine:"fg2",playwhat:"attentionSpin"}),m=!0),g=!0,v&&o.startAttention(t+1)):h.specAttentionSpins&&h.specAttentionSpins[T[t+1]]?(b||(h.isFreeGame?r.muteBgSound():nt?h.isFreeGame||(Et(),r.muteBgSound()):r.stopBgSound(),r.play({soundLine:"fg2",playwhat:"attentionSpin"}),b=!0),w=!0,o.startSpecialAttention(t+1,h.specAttentionSpins[T[t+1]])):(g&&(o.stopAttention(),g=!1),m&&((nt||h.isFreeGame&&h.winCoins==0)&&r.unmuteBgSound(),r.getActiveSound("fg2")==="attentionSpin"&&r.stop("fg2"),m=!1),w&&(o.stopSpecialAttention(),w=!1),b&&((nt||h.isFreeGame&&h.winCoins==0)&&r.unmuteBgSound(),r.stop("fg2"),b=!1)))}function ht(e){st=!1,r.isBgMuted()&&r.unmuteBgSound(!0);var t=typeof e!="undefined"?e:typeof h.freegameType!="undefined"?h.freegameType:1;I?r.playBgSound("fgBackIntro"+(t==1?"":t),function(){r.playBgSound("fgBackLoop"+(t==1?"":t),!1,!0)}):r.playBgSound("fgBackLoop"+(t==1?"":t),!1,!0)}function pt(){st=!1,r.isBgMuted()&&r.unmuteBgSound(!0),r.getActiveBGSound()!=="winBackground"&&r.playBgSound("winBackground",!1,!0)}function dt(e){G="base",e.actFreegame&&(G="free",typeof e.freegameType!="undefined"&&e.freegameType!=1&&(G+=e.freegameType)),u.setSpinMode(G)}function vt(e){var t=[];if(e.bonusSymbol)if(typeof e.bonusSymbol!="object")t.push(e.bonusSymbol);else for(var n in e.bonusSymbol)t.push(e.bonusSymbol[n]);if(e.bonusSymbols)for(var n in e.bonusSymbols)t.push(e.bonusSymbols[n]);t.length?u.setBonusSymbols(t):u.clearBonusSymbols()}function mt(e){var t=null,n=!1;if((k||L)&&e.isFreeGame)if(typeof e.bonusSymbol=="object"){n=[];for(var r in e.bonusSymbol)n.push(e.bonusSymbol[r])}else n=[e.bonusSymbol];var i=[[],[],[],[],[]];d=[0,0,0,0,0];for(var r=0;r<c;++r){var s=e["reel_"+T[r]+"_symboldata"];for(var o in s)++d[r]}if(e.copySymbolsOnReels){var u=[];for(var r in e.copySymbolsOnReels){var a=e.copySymbolsOnReels[r];if(a)for(var o in a)u.push([N[r],parseInt(o)+1,ft.bonus[a[o]]])}e.copySymbolsOnReels=u.length>0?u:!1}p=[];var f=l+2;for(var r=0;r<c;++r){var v=T[r],s=e["reel_"+v+"_symboldata"];p[r]=[];for(var o=d[r]-1;o>=d[r]-f;--o)p[r].push(s[o]);for(var o in s){t=s[o],e.copySymbolsOnReels&&d[r]-f<=parseInt(o)&&i[r].push($.inArray(t,n)!=-1?ft.bonus[t]:ft.monochrome[t]);if($.inArray(t,n)!=-1)s[o]=ft.bonus[t];else if(e.isFreeGame){var m=typeof h.freegameType!="undefined"?h.freegameType:1,g=m==1?ft.free:ft["free"+m];s[o]=g[t]}else s[o]=ft.base[t]}}e.prestamp=e.copySymbolsOnReels?i:!1,yt(e,n);var y={};_=[!1,!1,!1,!1,!1];if(e.copySymbolsOnReels){var g=ft.bonus;for(index in e.bonusWinLines){var b=e.bonusWinLines[index];e.bonusWinLines[index]=[e.bonusWinLines[index][0]];var o=1;while(typeof b[o]!="undefined"){if(b[o]){if(!_[o-1]&&((z||A)&&O&&O[b[o]]||Y.ssa)){if(!Y.ssa){var w=O[b[o]];typeof y[w]=="undefined"&&(y[w]=[]);for(var E=0;E<l;++E){var S={x:et*(o-1),y:Z*E};A&&(S.elem="#reel_"+T[o-1]+"_"+(l-E)),y[w].push(S)}}_[o-1]=!0}e.bonusWinLines[index][o]=g.winLines&&g.winLines[b[o]]?g.winLines[b[o]]:g[b[o]]}++o}}var x=e.bonusWinLines;e.bonusWinLines=[];for(var r in x)e.bonusWinLines.push(x[r])}else e.bonusWinLines=null;e.stampAnims=Y.ssa?null:y,bt(e)}function gt(e,t,n,r){var i=null,s=!1;if(typeof e.bonusSymbol!="undefined")if(typeof e.bonusSymbol=="object"){s=[];for(var o in e.bonusSymbol)s.push(e.bonusSymbol[o])}else s=[e.bonusSymbol];for(var o=0;o<c;++o){var u=e["reel_"+T[o]+"_initsymboldata"];for(var a in u){i=u[a];if(k&&$.inArray(i,s)!=-1)u[a]=ft.bonus[i];else if(t){var f=n==1?ft.free:ft["free"+n];u[a]=f[i]}else u[a]=ft.base[i]}}r&&(yt(r,s),bt(r))}function yt(e,t){var n=typeof e.winFGPerLine!="undefined"&&e.winFGPerLine?[]:!1;if(C)var r=[!1,!1,!1,!1,!1];for(index in e.winLines){var i=e.winLines[index],s=e.winLines[index][0];e.winLines[index]=[s],n&&(n[index]=typeof e.winFGPerLine[s]!="undefined"&&e.winFGPerLine[s]);var u=1;while(typeof i[u]!="undefined"){if(i[u]){var f=T[u-1],c=ft.base;if(e.isFreeGame)if(L&&t&&$.inArray(i[u],t)!=-1)c=ft.bonus;else{var d=typeof h.freegameType!="undefined"?h.freegameType:1;c=d==1?ft.free:ft["free"+d]}else if(e.isBookFeature&&e.wildSymbolPositions)for(var v in e.wildSymbolPositions)if(e.wildSymbolPositions[v]["symbol"]==i[u]){c=ft.transformed;break}e.winLines[index][u]=c.winLines&&c.winLines[i[u]]?c.winLines[i[u]]:c[i[u]];if(C&&s==0)for(var m=1;m<=l;++m)if(typeof C=="object"){if($.inArray(p[u-1][m],C)!=-1){r[u-1]=m-1;break}}else if(p[u-1][m]==C){r[u-1]=m-1;break}}else e.winLines[index][u]=!1;++u}C&&(a.setFreeGameTriggers(r),o.setFreeGameTriggers(r))}x=$.extend({},h.symbolAnims),e.winLinesBlend=kt(),e.freeGameWinLines=n;var g=e.winLines;e.winLines=[];for(var y in g)e.winLines.push(g[y])}function bt(e){if(e.symbolAnims){var t={};for(var n in e.symbolAnims){var r=e.symbolAnims[n];typeof t[r.animation]=="undefined"&&(t[r.animation]=[]);var i={x:et*r.reel,y:Z*r.pos,elem:"#reel_"+T[r.reel]+"_"+(l-r.pos)};typeof r.symbol!="undefined"&&(i.symbol=r.symbol),t[r.animation].push(i)}e.symbolAnims=t}else e.symbolAnims=!1}function wt(e){if(!p)return;for(var t=0;t<c;++t){var n=T[t];for(var r=0;r<=l+1;++r){var i=l+1-r;if(D&&$.inArray(p[t][i],D)!=-1)continue;$("#reel_"+n+"_"+r).css("background-image","url( "+jv_hypeSymbolPath+e[p[t][i]]+")")}}}function Et(){it&&clearTimeout(it),it=setTimeout(function(){if(r.isBgMuted())return;r.muteBgSound(2e3),st=!0},7500)}function St(e,t,n,r){if(E&&S)for(var s in S)if(S[s]){var o="symbolTeaser"+s;ut&&e.isFreeGame&&(o+="fg"),i.abortAnimation(o)}m=S=D=P=j=!1,Y.bss&&Y.bss({isFreeGame:e.isFreeGame,spinresult:e,buggySticky:typeof e.buggyStickyPos!="undefined"?e.buggyStickyPos:!1}),h=e,mt(e);var a={reelSymbols:{a:h.reel_a_symboldata,b:h.reel_b_symboldata,c:h.reel_c_symboldata,d:h.reel_d_symboldata,e:h.reel_e_symboldata},copySymbolsOnReels:h.copySymbolsOnReels,prestamp:h.prestamp},v={};for(var s=0;s<c;++s){var g=h["reel_"+T[s]+"_symboldata"],y=v[s]=new Array,b=d[s];for(var w=0;w<l+2;++w)y[w]=g[b-(l+2)+w]}tt=[!1,!1,!1,!1,!1];var x=[[!0,!0,!0,!0,!0],[!0,!1,!0,!1,!0],[!1,!0,!0,!0,!1]],N={0:[2,1,1,1,1],1:[2,2,1],2:[2,1,2]},C=!1;for(var s in x){for(var w=0;w<ot.length;w++){if(x[s][w]!==ot[w]){C=!1;break}C=!0}if(C){V=N[s];break}}if(h.teaserReels&&ot){var k=!1;for(var L=0;L<c;++L){var A=T[L];if(k=h.teaserReels[A]){var O=1,M=0;for(var s=0;s<L;++s)tt[s]&&tt[s][0]==k[0]&&++O;for(var s=L+1;s<c;++s)ot[s]&&++M;O+M>=3&&(tt[L]=k)}}}var _={quickStopData:v,dontBounce:Y.dbr?Y.dbr({symbolTeaser:tt,extraTeaser:h.extraTeaserReels}):E?tt:null,finishPositionData:p,updateWinlinesBlending:function(){h.winLinesBlend=kt()}};typeof h.placeholderSymbols!==undefined&&(_.placeholderSymbols=h.placeholderSymbols);var H=Y.ass?function(){typeof r=="function"&&r(),Y.ass({spinresult:h,callback:t,animHandler:X,playAnim:i.playAnimation,prepareAnim:i.prepareAnimations,startAnim:i.startAnimations,abortAnim:i.abortAnimation,endPosition:p})}:t,B=!1;for(var s in tt)if(tt[s]!==!1){B=!0;break}B&&(j=H,H=function(){if(P){var e=j;j=null,e()}else{var t=function(){var e=Date.now()>=F;if(e){F=!1;var t=j;return j=null,t(),!1}return!0};f.add("checkSpinningTime",t)}}),u.enforceLoaded(function(){u.setSpinResult({onEnd:H,onReelStopped:ct,onReelFinished:lt},a,_)}),typeof n=="function"&&n()}function xt(e,t,s,o,u){it&&clearTimeout(it),nt&&r.stopBgSound(!0),dt(h),vt(h);var a=typeof h.freegameType!="undefined"?h.freegameType:1;Y.sfg?Y.sfg({changeSymbols:function(){wt(a==1?ft.free:ft["free"+a]),$(".container").addClass("freegame")},startFreegame:function(){u||ht(),e()},onFreegameIntroPause:t,hype:n,winFG:o?o:h.wonFreegames?h.wonFreegames:h.actWinFreegames,bonusSymbol:h.bonusSymbol,animHandler:X,playAnim:i.playAnimation,prepareAnim:i.prepareAnimations,startAnim:i.startAnimations,freeGamesAnimations:h.freeGamesAnimations,freegameType:a,bonusSymbolValues:typeof h.bonusSymbolValues!="undefined"?h.bonusSymbolValues:!1},typeof s=="undefined"?!1:s):(u||ht(),wt(a==1?ft.free:ft["free"+a]),$(".container").addClass("freegame"),e())}function Tt(e,t){it&&clearTimeout(it),nt&&r.stopBgSound(!0),Y.pwr?Y.pwr({positions:h.winRepeater,totalWin:h.freegameWin,gambleAllowed:h.gambleAllowed,newMaxGambleLadderBet:h.newMaxGambleLadderBet,newMaxGambleCardBet:h.newMaxGambleCardBet,startWinRepeaterSound:pt,onWinRepeaterIntroPause:t,callback:e}):(pt(),$(".container").addClass("freegame"),e())}function Nt(e){it&&clearTimeout(it),nt&&!h.isFreeGame&&(h.winFactor>=q||typeof h.x25=="string")&&r.muteBgSound(!0),h.blockAnim&&at&&at.css("left",et*h.blockAnimPos+"px");var n=h.winLines,s=h.winLinesBlend;if(typeof h.winPerLine[0]!="undefined"&&h.winPerLine[0]==0){n=[],s=[];for(var o in h.winLines){var u=h.winLines[o];u[0]!=0&&(n.push(u),s.push(h.winLinesBlend[o]))}}var a=null;typeof e.onStamp=="function"?Y.bsts?a=function(){e.onStamp(),Y.bsts()}:a=e.onStamp:Y.bsts&&(a=Y.bsts),i.animate({onLinePingCallback:typeof e.onLineping=="function"?e.onLineping:null,onWinLineCallback:typeof e.onWinline=="function"?e.onWinline:null,onWinLineStopCallback:typeof e.onStopWinlines=="function"?e.onStopWinlines:null,onStampCallback:a,onBonusLinePingCallback:typeof e.onBonusLineping=="function"?e.onBonusLineping:null,onBreakPointCallback:typeof e.afterIntermediateAnimStep=="function"?e.afterIntermediateAnimStep:null,onAbortable:typeof e.onAbortable=="function"?e.onAbortable:null,onFreeGameLinePingCallback:typeof e.onFreegameLineping=="function"?e.onFreegameLineping:null,onFinished:function(){Ct(),typeof e.onFinished=="function"&&e.onFinished()},winFactor:h.winFactor,winFactorBeforeStamp:typeof h.winFactorBeforeStamp!="undefined"?h.winFactorBeforeStamp:h.winFactor,cBellFactor:typeof h.cBellFactor!="undefined"?h.cBellFactor:!1,freeGame:h.isFreeGame,winLines:n,winLineWinFactor:h.winLineWinFactor,winSounds:h.winSounds,winLinesBlend:s,freeGameLines:h.freeGameWinLines,fiveofakind:h.fiveOfAKind,x25:h.x25,additionalWinAnims:h.additionalWinAnims,symbolAnims:h.symbolAnims,stamp:h.copySymbolsOnReels?h.copySymbolsOnReels.length/2:!1,winLinesStamp:h.bonusWinLines,stampAnims:h.stampAnims,stampReplaceFunc:Y.srf?function(e,t){Y.srf({animHandler:X,spinresult:h,winLines:n,winLinesBlend:s,symbolAnims:t,callback:e})}:!1,abortStampReplaceFunc:Y.asrf,stampReplace:h.positionVintner&&h.positionBottles,blockAnim:h.blockAnim,retriggerFG:typeof e.retriggerFG!="undefined"&&e.retriggerFG?function(n){i.isAnimating()&&typeof Y.awa=="function"&&Y.awa({animHandler:X,spinresult:h});var r=typeof e.retriggerFG[2]=="function"?function(){e.retriggerFG[2](),n()}:n;t.retriggerFreeGames(e.retriggerFG[0],e.retriggerFG[1],r)}:null,getWinLinesBlend:kt,blockAnimCallback:Y.bba?function(e){Y.bba({spinresult:h,callback:e,animHandler:X,playAnim:i.playAnimation,prepareAnim:i.prepareAnimations,startAnim:i.startAnimations,endPosition:p})}:!1,abortSpecificBlockAnimCallback:Y.aba?function(e){Y.aba(e)}:!1,areAutospinsActive:e.areAutospinsActive,animateConsoleCounter:e.animateConsoleCounter,setWinIntoConsole:e.setWinIntoConsole,soundSet:R,ringSoundsetMode:U,bsa:Y.bsa,awa:Y.awa?function(){Y.awa({animHandler:X,spinresult:h})}:!1,enforceSingleLineping:Y.esl?Y.esl(h):!1})}function Ct(){nt&&(!h||!h.isFreeGame)&&(h&&(h.winFactor>=q||typeof h.x25=="string")&&r.unmuteBgSound(!0),Et())}function kt(e){typeof e=="undefined"&&(e=!1);var t={};for(index in h.winLines){t[index]={};var n=h.winLines[index],r=n[0],i=1;while(typeof n[i]!="undefined"&&i<=c){var s=T[i-1],o=Y.gbp?Y.gbp({frp:p[i-1],reel:i-1,reelIdx:s,winLine:r,freegame:h.isFreeGame,stickyReel:typeof h.stickyReels[i-1]!="undefined"?h.stickyReels[i-1]:!1,newSticky:typeof h.newStickyPos[i-1]!="undefined"?h.newStickyPos[i-1]:!1,symbAnims:!e&&typeof x!="undefined"&&z?x:!1,symbAnimsforOptSlot:!z&&Q?x:!1}):!1;if(o)for(var u in o)t[index][u]=o[u];++i}}return t}function Lt(e){if(!K){K=!0;if(G==="base")if(nt)t.playAmbienteSound();else{var n=R==1?3:5,s=1+Math.floor(Math.random()*(n-1));s>=J&&++s,J=s,r.playBgSound("reelsound"+s,!1,!0)}}i.isAnimating()?(i.stopWinLines(e,!0),typeof Y.awa=="function"&&Y.awa({animHandler:X,spinMode:G})):e()}var t=this,n=null,r=null,i=null,s=null,o=null,u=null,a=null,f=null,l=3,c=5,h=!1,p=!1,d=[0,0,0,0,0],v=!0,m=!1,g=!1,y=!1,b=!1,w=!1,E=!1,S=!1,x=!1,T=["a","b","c","d","e"],N={a:0,b:1,c:2,d:3,e:4},C=!1,k=!1,L=!1,A=!1,O=!1,M=null,_=null,D=!1,P=!1,H=300,B=500,j=null,F=null,I=!0,q=6,R=3,U=3,z=!0,W=!1,X=null,V=[2,1,1,1,1],J=0,K=!1,Q=!1,G="base",Y={rss:!1,sfg:!1,spfg:!1,rfg:!1,ofge:!1,gbp:!1,bwa:!1,bba:!1,aba:!1,awa:!1,ass:!1,dbr:!1,pwr:!1,cwls:!1,bss:!1,bsa:!1,asas:!1,bsts:!1,ssa:!1,srf:!1,asrf:!1,esl:!1},Z=0,et=0,tt=null,nt=!1,rt=!1,it=0,st=!1,ot=[!0,!0,!0,!0,!0],ut=!1,at=!1,ft=null;(function(e){n=e.hype,r=e.sound,s=e.cache,o=e.winLines,u=e.reelEngine,f=e.animManager;var t=e.conf;l=t.rows(),c=t.reels(),z=e.devConf.playSymbolAnims(),W=e.devConf.useSmallSounds();if(typeof e.ownFunctions=="object")for(var p in e.ownFunctions)Y[p]=e.ownFunctions[p];typeof e.freeGame=="object"&&(a=e.freeGame,Y.sfg||(Y.sfg=a.start),Y.rfg||(Y.rfg=a.retrigger),Y.spfg||(Y.spfg=a.stop)),typeof e.ambienteSound!="undefined"&&(nt=e.ambienteSound);var d=Y.ssa?function(){Y.ssa({animHandler:X,spinresult:h,stampReels:_})}:null;i=new WinAnimator({sound:r,animManager:f,hype:n,cache:s,winLines:o,reelEngine:u,devConf:e.devConf,slotConf:t,linepings:typeof e.linepings=="undefined"?!1:e.linepings,linepingSoundsCount:typeof e.linepingSoundsCount=="undefined"?10:e.linepingSoundsCount,animations:typeof e.animations=="undefined"?null:e.animations,blockAnimations:typeof e.blockAnimations=="undefined"?null:e.blockAnimations,useSingleBonusPing:typeof e.useSingleBonusPing=="undefined"?null:e.useSingleBonusPing,ambiente:nt,winSoundLength:typeof e.winSoundLength!="undefined"?e.winSoundLength:null,cwls:Y.cwls,asas:Y.asas,optimalSlotAnimations:typeof e.optimalSlotAnimations=="undefined"?[]:e.optimalSlotAnimations,optimalSlotBigAnimData:typeof e.optimalSlotBigAnimData=="undefined"?{}:e.optimalSlotBigAnimData,stampAnimFunc:d,calcOptimalSlotAnimOpacity:typeof e.calcOptimalSlotAnimOpacity!="function"?!1:e.calcOptimalSlotAnimOpacity,enforceX25Sound:typeof e.enforceX25Sound=="undefined"?!1:e.enforceX25Sound,winanim:typeof e.winanim=="undefined"?!1:e.winanim}),X={play:i.playAnimation,prepare:i.prepareAnimations,start:i.startAnimations,stop:i.abortAnimation,playOpt:i.playOptimalAnimation,stopOpt:i.stopOptimalAnimations},typeof e.blockAnimations!="undefined"&&e.blockAnimations&&(at=$("#"+e.blockAnimations.hype+"_hype_container")),ft=e.symbols,typeof e.scatterForFreeGames!="undefined"&&(C=e.scatterForFreeGames),typeof e.stamping!="undefined"&&(k=e.stamping),typeof e.bonus!="undefined"&&(L=e.bonus),typeof e.useStampAnimsForOptSlot!="undefined"&&(A=e.useStampAnimsForOptSlot),typeof e.stampAnims=="object"&&(O=e.stampAnims),typeof e.symbolTeaserAnim!="undefined"&&(E=e.symbolTeaserAnim),typeof e.symbolTeaserReels!="undefined"&&(ot=e.symbolTeaserReels),typeof e.specFGTeaserAnim!="undefined"&&(ut=e.specFGTeaserAnim),typeof e.playFreegameIntro!="undefined"&&(I=e.playFreegameIntro),typeof e.passSymbolAnims!="undefined"&&(Q=e.passSymbolAnims),typeof e.stereo!="undefined"&&(rt=e.stereo),typeof e.soundSet!="undefined"&&(U=R=e.soundSet),typeof e.ringSoundSet!="undefined"&&(U=e.ringSoundSet),typeof e.noAttSpinAnim!="undefined"&&e.noAttSpinAnim&&(v=!1),z&&typeof e.symbolTeaserAnimDuration!="undefined"?H=e.symbolTeaserAnimDuration:!z&&typeof e.symbolTeaserOptAnimDuration!="undefined"&&(H=e.symbolTeaserOptAnimDuration),typeof e.freegameOutroWinDelay!="undefined"&&(B=e.freegameOutroWinDelay),typeof e.restartAttentionSpinSound!="undefined"&&(y=e.restartAttentionSpinSound),Z=t.size("sH"),et=t.size("sWs")})(e),this.startInfiniteSpinAnim=function(){Lt(function(){u.startInfiniteSpin({onReelStopped:ct,onReelFinished:lt,onEnd:function(){K=!1,Ct()}})})},this.stopInfiniteSpin=function(){u.stopInfiniteSpin()},this.startSpinAnim=function(e,t,n,r){Lt(function(){K=!1,St(e,t,n,r)})},this.startFreeGames=function(e,t,n,r,s){typeof n=="undefined"&&(n=!1),i.isAnimating()?(i.stopWinLines(function(){xt(e,t,n,r,s)}),typeof Y.awa=="function"&&Y.awa({animHandler:X,spinresult:h})):xt(e,t,n,r,s)},this.restartFreeGame=function(){var e=typeof h.freegameType!="undefined"?h.freegameType:1;wt(e==1?ft.free:ft["free"+e]),$(".container").addClass("freegame")},this.retriggerFreeGames=function(e,t,n){Y.rfg?(e(),Y.rfg({continueFreegame:function(){if(!k||!h.copySymbolsOnReels)r.getActiveBGSound()?r.unmuteBgSound(!0):r.playBgSound("fgBackLoop",!1,!0);n()},winFG:h.wonFreegames?h.wonFreegames:h.actWinFreegames,onAbortable:t,playAnim:i.playAnimation,prepareAnim:i.prepareAnimations,startAnim:i.startAnimations,freeGamesAnimations:h.freeGamesAnimations,animHandler:X})):n()},this.finishFreeGames=function(e,s,o,u){u&&(h=u),vt({}),dt(h),setTimeout(function(){r.stopBgSound(),Y.spfg?Y.spfg({hype:n,win:h.freegameWin,changeSymbols:function(){(!k||!h.copySymbolsOnReels)&&wt(ft.base),$(".container").removeClass("freegame"),i.isAnimating()&&(i.stopWinLines(function(){}),typeof Y.awa=="function"&&Y.awa({animHandler:X,spinresult:h}))},symbolAnims:Q?h.symbolAnims:!1,playAnim:i.playAnimation,playRandomRetrigger:h.playRandomRetrigger,restartFreegame:function(){ht()},onStart:s,onFinished:function(){e(),nt&&t.playAmbienteSound()},abortWinAnims:function(){i.isAnimating()&&(i.stopWinLines(function(){}),typeof Y.awa=="function"&&Y.awa({animHandler:X,spinresult:h}))},freegameType:typeof h.freegameType!="undefined"?h.freegameType:1}):((!k||!h.copySymbolsOnReels)&&wt(ft.base),i.isAnimating()&&(i.stopWinLines(function(){}),typeof Y.awa=="function"&&Y.awa({animHandler:X,spinresult:h})),$(".container").removeClass("freegame"),s(null),e(),nt&&t.playAmbienteSound())},o?B:1e3)},this.finishWinRepeater=function(e){nt&&t.playAmbienteSound(),e()},this.startWinRepeater=function(e,t){i.isAnimating()?(i.stopWinLines(function(){Tt(e,t)}),typeof Y.awa=="function"&&Y.awa({animHandler:X,spinresult:h})):Tt(e,t)},this.startJackpot=function(){it&&clearTimeout(it),(nt||h.isFreeGame||h.actFreegame)&&r.stopBgSound()},this.stopJackpot=function(e){e?ht():nt&&t.playAmbienteSound()},this.quickStop=function(){P=!0,u.quickStop()},this.startWinAnim=function(e){Y.bwa?Y.bwa({spinresult:h,callback:function(){Nt(e)},animHandler:X,playAnim:i.playAnimation,prepareAnim:i.prepareAnimations,startAnim:i.startAnimations,endPosition:p}):Nt(e)},this.isAnimating=function(){return i.isAnimating()},this.abortWinAnim=function(e,t){var n=t?function(){Ct(),t()}:null;i.abortWinAnim(e,n),typeof Y.awa=="function"&&e&&Y.awa({animHandler:X,spinresult:h})},this.abortWinlineStepping=function(e){i.abortWinlineStepping(typeof e!="undefined"?e:null)},this.initReels=function(e,t){var n=typeof e.spinresult!="undefined"?e.spinresult:!1;gt(e.reels,e.actFreegame,typeof e.freegameType!="undefined"?e.freegameType:1,n),dt(e),vt(e),n&&n.winRepeater!=="undefined"&&n.winRepeater?(h=n,pt(),$(".container").addClass("freegame"),Y.ofge&&Y.ofge(n.winRepeater)):e.actFreegame&&e.startFreegame&&((typeof e.jackpotGame=="undefined"||!e.jackpotGame.actStep)&&ht(typeof e.freegameType!="undefined"?e.freegameType:1),$(".container").addClass("freegame"),Y.ofge&&e.bonusSymbol?Y.ofge(e.bonusSymbol):Y.ofge&&e.bonusSymbolValues?Y.ofge(e.bonusSymbolValues):Y.ofge&&Y.ofge());var r={};for(var i in T)typeof e.reels["reel_"+T[i]+"_initsymboldata"]!="undefined"&&(r[T[i]]=e.reels["reel_"+T[i]+"_initsymboldata"]);u.initValues(t,r),typeof e.spinRuntimeCorrection!="undefined"&&u.setSpinRuntimeCorrection(e.spinRuntimeCorrection)},this.setFixedSymbols=function(e){D=e},this.setWinRepeaterValues=function(e){h.winRepeater=e.failureSectors,h.freegameWin=e.totalWin,typeof e.gambleAllowed!="undefined"&&(h.gambleAllowed=e.gambleAllowed),typeof e.newMaxGambleLadderBet!="undefined"&&(h.newMaxGambleLadderBet=e.newMaxGambleLadderBet),typeof e.newMaxGambleCardBet!="undefined"&&(h.newMaxGambleCardBet=e.newMaxGambleCardBet)},this.abortExtraAnimations=function(e){for(var t in e)e[t]&&i.abortAnimation(t)},this.playExtraAnimations=function(e){i.playExtraAnimations(e)},this.playAmbienteSound=function(){r.getActiveBGSound()!=="ambiente"?(st=!1,r.isBgMuted()&&r.unmuteBgSound(),r.playBgSound("ambiente",null,!0)):st?(r.unmuteBgSound(100),st=!1):r.isBgMuted()&&r.unmuteBgSound(!0),Et()},this.getAnimHandler=function(){return X}};